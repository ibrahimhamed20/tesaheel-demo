import{b as oe}from"./chunk-CJUDCIES.js";import{a as ui,b as Pe}from"./chunk-YVOJF66O.js";import{a as xe,b as ne}from"./chunk-OCK53PXK.js";import{a as ke,b as Re,c as pi,d as ci,e as yt,f as Tt,g as me,i as mi,j as ve}from"./chunk-XZBQBUMW.js";import{d as be,f as ot}from"./chunk-BTTLIBHC.js";import{m as ce,n as j,q as li,r as di}from"./chunk-W23ROTL5.js";import{b as Y,c as I,e as $,f as Z,g as Ce,i as Me,k as K,l as rt,m as st,n as J,r as ee,s as Ae,t as te,u as It,w as ae,x as H}from"./chunk-WIKX5TMA.js";import{e as si,f as ie,g as O}from"./chunk-UEPQDKEL.js";import{a as Q}from"./chunk-ORBEOOVW.js";import{b as De,c as z,d as P}from"./chunk-LY326WX5.js";import{c as Kt,d as gt,f as _t,h as ht,i as bt,j as Ct}from"./chunk-NJC4F6AZ.js";import{b as vt,c as Et,i as Jt,k as ei,l as ti,m as ii,n as G,o as ai,p as ni,q as B,s as oi,t as ri}from"./chunk-AGN6QKO6.js";import{$a as f,Ab as it,Ac as Wt,Bb as Fe,Cb as Ve,Cc as nt,Db as Ut,Dc as q,Eb as m,Ec as Qt,Fb as A,Fc as Yt,Gb as v,Gc as $t,Ia as Mt,Ib as se,J as he,Jb as le,K as D,Kb as de,Kc as L,Lb as zt,Ma as n,Mb as M,Mc as Zt,Na as h,Nb as y,O as $e,Ob as F,P as wt,Pb as Gt,Rb as Ot,Sa as kt,T as Ze,Wb as jt,Xb as p,Y as V,Ya as Rt,Yb as u,Z as Ft,Zb as E,_b as Ht,ab as Ke,bb as s,eb as re,f as pe,fb as Je,ga as T,gc as qt,ha as S,jc as X,kc as at,lb as l,mb as o,na as k,nb as C,oa as Vt,ob as Ie,pb as ye,qa as Lt,qb as He,rb as N,tb as _,tc as Xt,ua as Bt,ub as g,v as ge,vb as Pt,wb as et,y as _e,yb as Be,zb as tt}from"./chunk-CD6VLWCW.js";import{a as x,b as w}from"./chunk-4CLCTAJ7.js";var fi=(()=>{class i{_http;constructor(e){this._http=e}deleteClassification(e){return this._http.delete(`${Q.URL_API}Classifications/${e}`)}addClassification(e){return this._http.post(`${Q.URL_API}Classifications`,e)}editClassification(e){return this._http.put(`${Q.URL_API}Classifications`,e)}getAllClassifications(e){return this._http.get(`${Q.URL_API}Classifications?PageSize=${e.size}&PageNumber=${e.number}`)}getClassificationById(e){return this._http.get(`${Q.URL_API}Classifications/${e}`)}uploadGalaryImage(e){let a=new FormData;return a.append("file",e),this._http.post(`${Q.URL_API}BlobsStore/file`,a)}getAllMerchantClassification(){return this._http.get(`${Q.URL_API}Merchants/Classifications`)}static \u0275fac=function(a){return new(a||i)(Ze(ot))};static \u0275prov=$e({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Bi=["titlebar"],Mi=["content"],ki=["footer"],Ri=["*",[["p-header"]],[["p-footer"]]],Pi=["*","p-header","p-footer"],Ui=(i,c,e,a,t,r,d,b,R,U)=>({"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter":i,"p-dialog-mask-scrollblocker":c,"p-dialog-left":e,"p-dialog-right":a,"p-dialog-top":t,"p-dialog-top-left":r,"p-dialog-top-right":d,"p-dialog-bottom":b,"p-dialog-bottom-left":R,"p-dialog-bottom-right":U}),zi=(i,c,e,a)=>({"p-dialog p-component":!0,"p-dialog-rtl":i,"p-dialog-draggable":c,"p-dialog-resizable":e,"p-dialog-maximized":a}),Gi=(i,c)=>({transform:i,transition:c}),Oi=i=>({value:"visible",params:i}),ji=()=>({"p-dialog-header-icon p-dialog-header-maximize p-link":!0}),Hi=()=>({"p-dialog-header-icon p-dialog-header-close p-link":!0}),qi=()=>({"min-width":0});function Xi(i,c){i&1&&He(0)}function Wi(i,c){if(i&1&&(Ie(0),f(1,Xi,1,0,"ng-container",10),ye()),i&2){let e=g(3);n(),s("ngTemplateOutlet",e.headlessTemplate)}}function Qi(i,c){if(i&1){let e=N();l(0,"div",15),_("mousedown",function(t){T(e);let r=g(4);return S(r.initResize(t))}),o()}}function Yi(i,c){if(i&1&&(l(0,"span",21),m(1),o()),i&2){let e=g(5);s("id",e.ariaLabelledBy),n(),A(e.header)}}function $i(i,c){if(i&1&&(l(0,"span",21),et(1,1),o()),i&2){let e=g(5);s("id",e.ariaLabelledBy)}}function Zi(i,c){i&1&&He(0)}function Ki(i,c){if(i&1&&C(0,"span",25),i&2){let e=g(6);s("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}function Ji(i,c){i&1&&C(0,"WindowMaximizeIcon",27),i&2&&s("styleClass","p-dialog-header-maximize-icon")}function ea(i,c){i&1&&C(0,"WindowMinimizeIcon",27),i&2&&s("styleClass","p-dialog-header-maximize-icon")}function ta(i,c){if(i&1&&(Ie(0),f(1,Ji,1,1,"WindowMaximizeIcon",26)(2,ea,1,1,"WindowMinimizeIcon",26),ye()),i&2){let e=g(6);n(),s("ngIf",!e.maximized&&!e.maximizeIconTemplate),n(),s("ngIf",e.maximized&&!e.minimizeIconTemplate)}}function ia(i,c){}function aa(i,c){i&1&&f(0,ia,0,0,"ng-template")}function na(i,c){if(i&1&&(Ie(0),f(1,aa,1,0,null,10),ye()),i&2){let e=g(6);n(),s("ngTemplateOutlet",e.maximizeIconTemplate)}}function oa(i,c){}function ra(i,c){i&1&&f(0,oa,0,0,"ng-template")}function sa(i,c){if(i&1&&(Ie(0),f(1,ra,1,0,null,10),ye()),i&2){let e=g(6);n(),s("ngTemplateOutlet",e.minimizeIconTemplate)}}function la(i,c){if(i&1){let e=N();l(0,"button",22),_("click",function(){T(e);let t=g(5);return S(t.maximize())})("keydown.enter",function(){T(e);let t=g(5);return S(t.maximize())}),f(1,Ki,1,1,"span",23)(2,ta,3,2,"ng-container",24)(3,na,2,1,"ng-container",24)(4,sa,2,1,"ng-container",24),o()}if(i&2){let e=g(5);s("ngClass",y(7,ji)),Ke("tabindex",e.maximizable?"0":"-1")("aria-label",e.maximizeLabel),n(),s("ngIf",e.maximizeIcon&&!e.maximizeIconTemplate&&!e.minimizeIconTemplate),n(),s("ngIf",!e.maximizeIcon),n(),s("ngIf",!e.maximized),n(),s("ngIf",e.maximized)}}function da(i,c){if(i&1&&C(0,"span",30),i&2){let e=g(7);s("ngClass",e.closeIcon)}}function pa(i,c){i&1&&C(0,"TimesIcon",27),i&2&&s("styleClass","p-dialog-header-close-icon")}function ca(i,c){if(i&1&&(Ie(0),f(1,da,1,1,"span",29)(2,pa,1,1,"TimesIcon",26),ye()),i&2){let e=g(6);n(),s("ngIf",e.closeIcon),n(),s("ngIf",!e.closeIcon)}}function ma(i,c){}function ua(i,c){i&1&&f(0,ma,0,0,"ng-template")}function fa(i,c){if(i&1&&(l(0,"span"),f(1,ua,1,0,null,10),o()),i&2){let e=g(6);n(),s("ngTemplateOutlet",e.closeIconTemplate)}}function ga(i,c){if(i&1){let e=N();l(0,"button",28),_("click",function(t){T(e);let r=g(5);return S(r.close(t))})("keydown.enter",function(t){T(e);let r=g(5);return S(r.close(t))}),f(1,ca,3,2,"ng-container",24)(2,fa,2,1,"span",24),o()}if(i&2){let e=g(5);s("ngClass",y(6,Hi))("ngStyle",y(7,qi)),Ke("aria-label",e.closeAriaLabel)("tabindex",e.closeTabindex),n(),s("ngIf",!e.closeIconTemplate),n(),s("ngIf",e.closeIconTemplate)}}function _a(i,c){if(i&1){let e=N();l(0,"div",16,3),_("mousedown",function(t){T(e);let r=g(4);return S(r.initDrag(t))}),f(2,Yi,2,2,"span",17)(3,$i,2,1,"span",17)(4,Zi,1,0,"ng-container",10),l(5,"div",18),f(6,la,5,8,"button",19)(7,ga,3,8,"button",20),o()()}if(i&2){let e=g(4);n(2),s("ngIf",!e.headerFacet&&!e.headerTemplate),n(),s("ngIf",e.headerFacet),n(),s("ngTemplateOutlet",e.headerTemplate),n(2),s("ngIf",e.maximizable),n(),s("ngIf",e.closable)}}function ha(i,c){i&1&&He(0)}function ba(i,c){i&1&&He(0)}function Ca(i,c){if(i&1&&(l(0,"div",31,4),et(2,2),f(3,ba,1,0,"ng-container",10),o()),i&2){let e=g(4);n(3),s("ngTemplateOutlet",e.footerTemplate)}}function va(i,c){if(i&1&&(f(0,Qi,1,0,"div",11)(1,_a,8,5,"div",12),l(2,"div",13,2),et(4),f(5,ha,1,0,"ng-container",10),o(),f(6,Ca,4,1,"div",14)),i&2){let e=g(3);s("ngIf",e.resizable),n(),s("ngIf",e.showHeader),n(),Je(e.contentStyleClass),s("ngClass","p-dialog-content")("ngStyle",e.contentStyle),n(3),s("ngTemplateOutlet",e.contentTemplate),n(),s("ngIf",e.footerFacet||e.footerTemplate)}}function Ea(i,c){if(i&1){let e=N();l(0,"div",8,0),_("@animation.start",function(t){T(e);let r=g(2);return S(r.onAnimationStart(t))})("@animation.done",function(t){T(e);let r=g(2);return S(r.onAnimationEnd(t))}),f(2,Wi,2,1,"ng-container",9)(3,va,7,8,"ng-template",null,1,Ht),o()}if(i&2){let e=Ut(4),a=g(2);Je(a.styleClass),s("ngClass",Ot(10,zi,a.rtl,a.draggable,a.resizable,a.maximized))("ngStyle",a.style)("pFocusTrapDisabled",a.focusTrap===!1)("@animation",F(18,Oi,Gt(15,Gi,a.transformOptions,a.transitionOptions))),Ke("aria-labelledby",a.ariaLabelledBy)("aria-modal",!0),n(2),s("ngIf",a.headlessTemplate)("ngIfElse",e)}}function Ia(i,c){if(i&1&&(l(0,"div",6),f(1,Ea,5,20,"div",7),o()),i&2){let e=g();Je(e.maskStyleClass),s("ngStyle",e.maskStyle)("ngClass",jt(5,Ui,[e.modal,e.modal||e.blockScroll,e.position==="left",e.position==="right",e.position==="top",e.position==="topleft"||e.position==="top-left",e.position==="topright"||e.position==="top-right",e.position==="bottom",e.position==="bottomleft"||e.position==="bottom-left",e.position==="bottomright"||e.position==="bottom-right"])),n(),s("ngIf",e.visible)}}var ya=bt([_t({transform:"{{transform}}",opacity:0}),gt("{{transition}}")]),Ta=bt([gt("{{transition}}",_t({transform:"{{transform}}",opacity:0}))]),ue=(()=>{class i{document;platformId;el;renderer;zone;cd;config;header;draggable=!0;resizable=!0;get positionLeft(){return 0}set positionLeft(e){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(e){console.log("positionTop property is deprecated.")}contentStyle;contentStyleClass;modal=!1;closeOnEscape=!0;dismissableMask=!1;rtl=!1;closable=!0;get responsive(){return!1}set responsive(e){console.log("Responsive property is deprecated.")}appendTo;breakpoints;styleClass;maskStyleClass;maskStyle;showHeader=!0;get breakpoint(){return 649}set breakpoint(e){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}blockScroll=!1;autoZIndex=!0;baseZIndex=0;minX=0;minY=0;focusOnShow=!0;maximizable=!1;keepInViewport=!0;focusTrap=!0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";closeIcon;closeAriaLabel;closeTabindex="0";minimizeIcon;maximizeIcon;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(e){e&&(this._style=x({},e),this.originalStyle=e)}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)";break}}onShow=new k;onHide=new k;visibleChange=new k;onResizeInit=new k;onResizeEnd=new k;onDragEnd=new k;onMaximize=new k;headerFacet;footerFacet;templates;headerViewChild;contentViewChild;footerViewChild;headerTemplate;contentTemplate;footerTemplate;maximizeIconTemplate;closeIconTemplate;minimizeIconTemplate;headlessTemplate;_visible=!1;maskVisible;container;wrapper;dragging;ariaLabelledBy=this.getAriaLabelledBy();documentDragListener;documentDragEndListener;resizing;documentResizeListener;documentResizeEndListener;documentEscapeListener;maskClickListener;lastPageX;lastPageY;preventVisibleChangePropagation;maximized;preMaximizeContentHeight;preMaximizeContainerWidth;preMaximizeContainerHeight;preMaximizePageX;preMaximizePageY;id=vt();_style={};_position="center";originalStyle;transformOptions="scale(0.7)";styleElement;window;get maximizeLabel(){return this.config.getTranslation(ni.ARIA).maximizeLabel}constructor(e,a,t,r,d,b,R){this.document=e,this.platformId=a,this.el=t,this.renderer=r,this.zone=d,this.cd=b,this.config=R,this.window=this.document.defaultView}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"closeicon":this.closeIconTemplate=e.template;break;case"maximizeicon":this.maximizeIconTemplate=e.template;break;case"minimizeicon":this.minimizeIconTemplate=e.template;break;case"headless":this.headlessTemplate=e.template;break;default:this.contentTemplate=e.template;break}})}ngOnInit(){this.breakpoints&&this.createStyle()}getAriaLabelledBy(){return this.header!==null?vt()+"_header":null}parseDurationToMilliseconds(e){let a=/([\d\.]+)(ms|s)\b/g,t=0,r;for(;(r=a.exec(e))!==null;){let d=parseFloat(r[1]),b=r[2];b==="ms"?t+=d:b==="s"&&(t+=d*1e3)}if(t!==0)return t}focus(e=this.contentViewChild?.nativeElement){let a=this.parseDurationToMilliseconds(this.transitionOptions),t=B.getFocusableElement(e,"[autofocus]");if(t){this.zone.runOutsideAngular(()=>{setTimeout(()=>t.focus(),a||5)});return}let r=B.getFocusableElement(e);r?this.zone.runOutsideAngular(()=>{setTimeout(()=>r.focus(),a||5)}):this.footerViewChild&&e!==this.footerViewChild.nativeElement&&this.focus(this.footerViewChild.nativeElement)}close(e){this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)})),this.modal&&B.blockBodyScroll()}disableModality(){if(this.wrapper){this.dismissableMask&&this.unbindMaskClickListener();let e=document.querySelectorAll(".p-dialog-mask-scrollblocker");this.modal&&e&&e.length==1&&B.unblockBodyScroll(),this.cd.destroyed||this.cd.detectChanges()}}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?B.blockBodyScroll():B.unblockBodyScroll()),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(Et.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(Zt(this.platformId)&&!this.styleElement){this.styleElement=this.renderer.createElement("style"),this.styleElement.type="text/css",B.setAttribute(this.styleElement,"nonce",this.config?.csp()?.nonce),this.renderer.appendChild(this.document.head,this.styleElement);let e="";for(let a in this.breakpoints)e+=`
                        @media screen and (max-width: ${a}) {
                            .p-dialog[${this.id}]:not(.p-dialog-maximized) {
                                width: ${this.breakpoints[a]} !important;
                            }
                        }
                    `;this.renderer.setProperty(this.styleElement,"innerHTML",e)}}initDrag(e){B.hasClass(e.target,"p-dialog-header-icon")||B.hasClass(e.target,"p-dialog-header-close-icon")||B.hasClass(e.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",B.addClass(this.document.body,"p-unselectable-text"))}onDrag(e){if(this.dragging){let a=B.getOuterWidth(this.container),t=B.getOuterHeight(this.container),r=e.pageX-this.lastPageX,d=e.pageY-this.lastPageY,b=this.container.getBoundingClientRect(),R=getComputedStyle(this.container),U=parseFloat(R.marginLeft),Ye=parseFloat(R.marginTop),Te=b.left+r-U,Se=b.top+d-Ye,je=B.getViewport();this.container.style.position="fixed",this.keepInViewport?(Te>=this.minX&&Te+a<je.width&&(this._style.left=`${Te}px`,this.lastPageX=e.pageX,this.container.style.left=`${Te}px`),Se>=this.minY&&Se+t<je.height&&(this._style.top=`${Se}px`,this.lastPageY=e.pageY,this.container.style.top=`${Se}px`)):(this.lastPageX=e.pageX,this.container.style.left=`${Te}px`,this.lastPageY=e.pageY,this.container.style.top=`${Se}px`)}}endDrag(e){this.dragging&&(this.dragging=!1,B.removeClass(this.document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(e))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(e){this.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,B.addClass(this.document.body,"p-unselectable-text"),this.onResizeInit.emit(e))}onResize(e){if(this.resizing){let a=e.pageX-this.lastPageX,t=e.pageY-this.lastPageY,r=B.getOuterWidth(this.container),d=B.getOuterHeight(this.container),b=B.getOuterHeight(this.contentViewChild?.nativeElement),R=r+a,U=d+t,Ye=this.container.style.minWidth,Te=this.container.style.minHeight,Se=this.container.getBoundingClientRect(),je=B.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(R+=a,U+=t),(!Ye||R>parseInt(Ye))&&Se.left+R<je.width&&(this._style.width=R+"px",this.container.style.width=this._style.width),(!Te||U>parseInt(Te))&&Se.top+U<je.height&&(this.contentViewChild.nativeElement.style.height=b+U-d+"px",this._style.height&&(this._style.height=U+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,B.removeClass(this.document.body,"p-unselectable-text"),this.onResizeEnd.emit(e))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.documentDragListener||this.zone.runOutsideAngular(()=>{this.documentDragListener=this.renderer.listen(this.window,"mousemove",this.onDrag.bind(this))})}unbindDocumentDragListener(){this.documentDragListener&&(this.documentDragListener(),this.documentDragListener=null)}bindDocumentDragEndListener(){this.documentDragEndListener||this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.renderer.listen(this.window,"mouseup",this.endDrag.bind(this))})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(this.documentDragEndListener(),this.documentDragEndListener=null)}bindDocumentResizeListeners(){!this.documentResizeListener&&!this.documentResizeEndListener&&this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.renderer.listen(this.window,"mousemove",this.onResize.bind(this)),this.documentResizeEndListener=this.renderer.listen(this.window,"mouseup",this.resizeEnd.bind(this))})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(this.documentResizeListener(),this.documentResizeEndListener(),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentEscapeListener=this.renderer.listen(e,"keydown",a=>{a.key=="Escape"&&this.close(a)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.wrapper):B.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.renderer.appendChild(this.el.nativeElement,this.wrapper)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container?.parentElement,this.moveOnTop(),this.appendContainer(),this.bindGlobalListeners(),this.container?.setAttribute(this.id,""),this.modal&&this.enableModality(),!this.modal&&this.blockScroll&&B.addClass(this.document.body,"p-overflow-hidden"),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&B.addClass(this.wrapper,"p-component-overlay-leave");break}}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy(),this.onHide.emit({}),this.cd.markForCheck();break;case"visible":this.onShow.emit({});break}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(B.removeClass(this.document.body,"p-overflow-hidden"),this.document.body.style.removeProperty("--scrollbar-width"),this.maximized=!1),this.modal&&this.disableModality(),this.blockScroll&&B.removeClass(this.document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&Et.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?x({},this.originalStyle):{}}destroyStyle(){this.styleElement&&(this.renderer.removeChild(this.document.head,this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle()}static \u0275fac=function(a){return new(a||i)(h(Xt),h(Bt),h(Lt),h(kt),h(Vt),h(qt),h(ei))};static \u0275cmp=V({type:i,selectors:[["p-dialog"]],contentQueries:function(a,t,r){if(a&1&&(tt(r,ti,5),tt(r,ii,5),tt(r,G,4)),a&2){let d;Fe(d=Ve())&&(t.headerFacet=d.first),Fe(d=Ve())&&(t.footerFacet=d.first),Fe(d=Ve())&&(t.templates=d)}},viewQuery:function(a,t){if(a&1&&(it(Bi,5),it(Mi,5),it(ki,5)),a&2){let r;Fe(r=Ve())&&(t.headerViewChild=r.first),Fe(r=Ve())&&(t.contentViewChild=r.first),Fe(r=Ve())&&(t.footerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",draggable:[2,"draggable","draggable",X],resizable:[2,"resizable","resizable",X],positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:[2,"modal","modal",X],closeOnEscape:[2,"closeOnEscape","closeOnEscape",X],dismissableMask:[2,"dismissableMask","dismissableMask",X],rtl:[2,"rtl","rtl",X],closable:[2,"closable","closable",X],responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",maskStyle:"maskStyle",showHeader:[2,"showHeader","showHeader",X],breakpoint:"breakpoint",blockScroll:[2,"blockScroll","blockScroll",X],autoZIndex:[2,"autoZIndex","autoZIndex",X],baseZIndex:[2,"baseZIndex","baseZIndex",at],minX:[2,"minX","minX",at],minY:[2,"minY","minY",at],focusOnShow:[2,"focusOnShow","focusOnShow",X],maximizable:[2,"maximizable","maximizable",X],keepInViewport:[2,"keepInViewport","keepInViewport",X],focusTrap:[2,"focusTrap","focusTrap",X],transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",visible:"visible",style:"style",position:"position"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},features:[Rt],ngContentSelectors:Pi,decls:1,vars:1,consts:[["container",""],["notHeadless",""],["content",""],["titlebar",""],["footer",""],[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","pFocusTrapDisabled"],[4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["class","p-resizable-handle",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[3,"ngClass","ngStyle"],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["class","p-dialog-title",3,"id",4,"ngIf"],[1,"p-dialog-header-icons"],["role","button","type","button","pRipple","","pButton","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","pRipple","","pButton","",3,"ngClass","ngStyle","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title",3,"id"],["role","button","type","button","pRipple","","pButton","",3,"click","keydown.enter","ngClass"],["class","p-dialog-header-maximize-icon",3,"ngClass",4,"ngIf"],[4,"ngIf"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],[3,"styleClass",4,"ngIf"],[3,"styleClass"],["type","button","pRipple","","pButton","",3,"click","keydown.enter","ngClass","ngStyle"],["class","p-dialog-header-close-icon",3,"ngClass",4,"ngIf"],[1,"p-dialog-header-close-icon",3,"ngClass"],[1,"p-dialog-footer"]],template:function(a,t){a&1&&(Pt(Ri),f(0,Ia,2,16,"div",5)),a&2&&s("ngIf",t.maskVisible)},dependencies:()=>[Wt,q,Yt,Qt,pi,si,oi,It,yt,Tt],styles:[`@layer primeng{.p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translateZ(0)}.p-dialog-maximized{-webkit-transition:none;transition:none;transform:none;width:100vw!important;height:100vh!important;top:0!important;left:0!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}}
`],encapsulation:2,data:{animation:[Kt("animation",[ht("void => visible",[Ct(ya)]),ht("visible => void",[Ct(Ta)])])]},changeDetection:0})}return i})(),fe=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=Ft({type:i});static \u0275inj=wt({imports:[L,ci,O,ri,It,yt,Tt,ai]})}return i})();var St=i=>({fieldName:i}),_i=()=>({maxLength:50});function Sa(i,c){i&1&&(l(0,"div",13),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,St,u(2,1,"FIELDS.CLASSIFICATIONS")))," "))}function Da(i,c){i&1&&(l(0,"div",13),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,St,u(2,1,"FIELDS.ENGLISH_NAME")))," "))}function Aa(i,c){i&1&&(l(0,"div",13),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,_i))," "))}function xa(i,c){i&1&&(l(0,"div",13),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,St,u(2,1,"FIELDS.ARABIC_NAME")))," "))}function Na(i,c){i&1&&(l(0,"div",13),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,_i))," "))}var hi=(()=>{class i{_fb;_product;ClassificationsData;classificationsForm;save=new k;constructor(e,a){this._fb=e,this._product=a}ngOnInit(){this.classificationsForm=this.initForm(),this.ClassificationsData&&this.classificationsForm.patchValue(this.ClassificationsData)}initForm(){return this.classificationsForm=this._fb.group({id:[],arabicName:["",[I.required]],englishName:["",[I.required]],serviceType:[0,[I.required]],iconUrl:this._fb.group({externalStorageId:"",mimeType:"",sizeInBytes:0,blobUrI:""})})}onClassificationChange(e){}onSave(){this.classificationsForm.valid?this.save.emit(this.classificationsForm.value):this.classificationsForm.markAllAsTouched()}onUpload(e){let a=e.files;if(a.length>0){let t=a[0];this.classificationsForm.get("iconUrl").patchValue({externalStorageId:t.name,mimeType:t.type,sizeInBytes:t.size,blobUrl:URL.createObjectURL(t)})}}static \u0275fac=function(a){return new(a||i)(h(ee),h(oe))};static \u0275cmp=V({type:i,selectors:[["admin-add-edit-classification"]],inputs:{ClassificationsData:"ClassificationsData"},outputs:{save:"save"},standalone:!0,features:[M],decls:31,vars:30,consts:[["autocomplete","off",3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12"],["for","classificationIds"],["class","error-message",4,"ngIf"],[1,"field","col-12","md:col-6"],["for","englishName"],["pInputText","","type","text","pInputText","","formControlName","englishName",1,"w-full",3,"placeholder"],["for","arabicName"],["type","text","pInputText","","formControlName","arabicName",1,"w-full",3,"placeholder"],["for","iconUrl"],["name","iconUrl","id","iconUrl","accept","image/*",3,"onUpload","showUploadButton","showCancelButton","multiple","maxFileSize"],[1,"p-element","btn-tasheel","btn-primary","w-full",3,"onClick","label"],[1,"error-message"]],template:function(a,t){if(a&1&&(l(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),m(4),p(5,"translate"),o(),f(6,Sa,4,8,"div",4),o(),l(7,"div",5)(8,"label",6),m(9),p(10,"translate"),o(),C(11,"input",7),p(12,"translate"),f(13,Da,4,8,"div",4)(14,Aa,3,5,"div",4),o(),l(15,"div",5)(16,"label",8),m(17),p(18,"translate"),o(),C(19,"input",9),p(20,"translate"),f(21,xa,4,8,"div",4)(22,Na,3,5,"div",4),o(),l(23,"div",2)(24,"label",10),m(25,"icon"),o(),l(26,"p-fileUpload",11),_("onUpload",function(d){return t.onUpload(d)}),o()(),l(27,"div",5)(28,"p-button",12),p(29,"translate"),p(30,"translate"),_("onClick",function(){return t.onSave()}),o()()()()),a&2){let r,d,b,R,U;s("formGroup",t.classificationsForm),n(4),A(u(5,16,"FIELDS.CLASSIFICATIONS")),n(2),s("ngIf",((r=t.classificationsForm.get("classificationIds"))==null?null:r.touched)&&((r=t.classificationsForm.get("classificationIds"))==null||r.errors==null?null:r.errors.required)),n(3),A(u(10,18,"FIELDS.ENGLISH_NAME")),n(2),s("placeholder",u(12,20,"FIELDS.ENGLISH_NAME")),n(2),s("ngIf",((d=t.classificationsForm.get("englishName"))==null?null:d.touched)&&((d=t.classificationsForm.get("englishName"))==null||d.errors==null?null:d.errors.required)),n(),s("ngIf",((b=t.classificationsForm.get("englishName"))==null?null:b.touched)&&((b=t.classificationsForm.get("englishName"))==null||b.errors==null?null:b.errors.maxlength)),n(3),A(u(18,22,"FIELDS.ARABIC_NAME")),n(2),s("placeholder",u(20,24,"FIELDS.ARABIC_NAME")),n(2),s("ngIf",((R=t.classificationsForm.get("arabicName"))==null?null:R.touched)&&((R=t.classificationsForm.get("arabicName"))==null||R.errors==null?null:R.errors.required)),n(),s("ngIf",((U=t.classificationsForm.get("arabicName"))==null?null:U.touched)&&((U=t.classificationsForm.get("arabicName"))==null||U.errors==null?null:U.errors.maxlength)),n(4),s("showUploadButton",!1)("showCancelButton",!1)("multiple",!0)("maxFileSize",1e6),n(2),s("label",t.ClassificationsData?u(29,26,"GENERAL.UPDATE"):u(30,28,"GENERAL.SAVE"))}},dependencies:[L,q,te,Me,Y,$,Z,K,J,j,H,ae,ne,O,ie,P,z,Re,ke]})}return i})();var bi={columns:[{field:"name",header:"UNIT_NAME",type:"label",exported:!1},{field:"shortName",header:"SHORT_NAME",type:"label",exported:!1},{field:"classification",header:"CLASSIFICATION",type:"label",exported:!1},{field:"actions",header:"ACTIONS",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",locale:"FIELDS.",actions:["CREATE"],rowsActions:["EDIT","DELETE"],dataLoading:"server",paginator:!0};var wa=()=>({width:"600px",height:"100vh",top:"0",margin:"0",padding:"0"});function Fa(i,c){if(i&1){let e=N();l(0,"div",5)(1,"div",6),m(2),p(3,"translate"),o(),l(4,"button",7),_("click",function(){T(e);let t=g();return S(t.displayDialog=!1)}),C(5,"img",8),o()()}i&2&&(n(2),A(u(3,1,"UNITS.ADD_NEW_UNIT")))}function Va(i,c){if(i&1){let e=N();l(0,"admin-add-edit-classification",9),_("save",function(t){T(e);let r=g();return S(r.handleSave(t))}),o()}if(i&2){let e=g();s("ClassificationsData",e.selectedClassification)}}var Wo=(()=>{class i{_classifications;_unsubscribeAll=new pe;displayDialog=!1;filters={number:1,size:10};constructor(e){this._classifications=e}ngOnInit(){this.getAllClassifications(this.filters)}getAllClassifications(e){this._classifications.getAllClassifications(e).pipe(D(this._unsubscribeAll)).subscribe(a=>{this.tableConfig=w(x({},bi),{rows:a.data.classifications,totalRecords:a.data.rowCount})||[]})}tableConfig;onActionClicked(e){switch(e.action){case"CREATE":break;case"EDIT":this.getClassificationById(e.data);break;default:break}}selectedClassification=null;getClassificationById(e){let a=typeof e.id=="string"?Number(e.id):e.id;a&&this._classifications.getClassificationById(a).subscribe(t=>{t.data&&(this.displayDialog=!0,this.selectedClassification=t.data)})}handleSave(e){}openCreateDialog(){this.displayDialog=!0}onDialogClose(){this.displayDialog=!1}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(a){return new(a||i)(h(fi))};static \u0275cmp=V({type:i,selectors:[["admin-classifications"]],standalone:!0,features:[M],decls:5,vars:12,consts:[[1,"dialog-side"],[3,"actionClicked","config"],[3,"visibleChange","visible","modal","dismissableMask","position","baseZIndex","draggable","blockScroll","closable"],["pTemplate","header"],["pTemplate","content"],[1,"dialog-header"],[1,"dialog-header__title"],[1,"dialog-header__close-button",3,"click"],["src","assets/layout/images/close-icon.svg","alt","Close",1,"dialog-header__close-icon"],[3,"save","ClassificationsData"]],template:function(a,t){a&1&&(l(0,"section",0)(1,"shared-ui-table",1),_("actionClicked",function(d){return t.onActionClicked(d)}),o(),l(2,"p-dialog",2),de("visibleChange",function(d){return le(t.displayDialog,d)||(t.displayDialog=d),d}),f(3,Fa,6,3,"ng-template",3)(4,Va,1,1,"ng-template",4),o()()),a&2&&(n(),s("config",t.tableConfig),n(),re(y(11,wa)),se("visible",t.displayDialog),s("modal",!0)("dismissableMask",!0)("position","right")("baseZIndex",1e4)("draggable",!1)("blockScroll",!0)("closable",!1))},dependencies:[L,me,fe,ue,G,hi,P,z],encapsulation:2})}return i})();var lt=i=>({fieldName:i}),At=()=>({maxLength:50});function La(i,c){i&1&&(l(0,"div",12),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,lt,u(2,1,"FIELDS.CLASSIFICATION")))," "))}function Ba(i,c){i&1&&(l(0,"div",12),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,lt,u(2,1,"FIELDS.BAR_CODE_NO")))," "))}function Ma(i,c){i&1&&(l(0,"div",12),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,At))," "))}function ka(i,c){i&1&&(l(0,"div",12),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,lt,u(2,1,"FIELDS.SHORT_ARABIC_NAME")))," "))}function Ra(i,c){i&1&&(l(0,"div",12),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,At))," "))}function Pa(i,c){i&1&&(l(0,"div",12),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,lt,u(2,1,"FIELDS.ENGLISH_NAME")))," "))}function Ua(i,c){i&1&&(l(0,"div",12),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,At))," "))}function za(i,c){if(i&1){let e=N();Ie(0),l(1,"p-fileUpload",13),p(2,"translate"),_("onSelect",function(t){T(e);let r=g();return S(r.onFileSelect(t))}),o(),ye()}i&2&&(n(),s("chooseLabel",u(2,1,"GENERAL.CHOOSE")))}function Ga(i,c){if(i&1){let e=N();Ie(0),l(1,"div",14),C(2,"img",15),l(3,"img",16),_("click",function(){T(e);let t=g();return S(t.removeImage())}),o()(),ye()}if(i&2){let e=g();n(2),s("src",e.data==null||e.data.icon==null?null:e.data.icon.blobUrI,Mt)("alt",e.data==null||e.data.icon==null?null:e.data.icon.id)}}var Ci=(()=>{class i{_fb;_product;classifications=[];data;dialogForm;save=new k;constructor(e,a){this._fb=e,this._product=a}ngOnInit(){this.prepareForm(),this.data&&(this.dialogForm.patchValue(this.data),this.setPreSelectedValues())}prepareForm(){this.dialogForm=this._fb.group({arabicName:[null,[I.required,I.maxLength(50)]],englishName:[null,[I.required,I.maxLength(50)]],classificationsIds:[null],classifications:[null,I.required],barcodeNumber:[null,I.required],icon:this._fb.group({externalStorageId:"",mimeType:"",sizeInBytes:0,blobUrI:""})})}get control(){return this.dialogForm.controls}onClassificationChange(e){let a=e.value.map(t=>t.id);this.dialogForm.get("classificationsIds")?.setValue(a),this.dialogForm.get("classifications")?.setValue(e.value)}setPreSelectedValues(){let e=this.data?.classifications.map(t=>this.classifications.find(r=>r.id===t.id)),a=e?.map(t=>t?.id);this.dialogForm.get("classificationsIds")?.setValue(a),this.dialogForm.patchValue({classifications:e})}onSave(){this.dialogForm.valid?this.save.emit(this.dialogForm.value):this.dialogForm.markAllAsTouched()}removeImage(){this.data&&this.data.icon&&(this.data.icon.blobUrI=void 0)}onFileSelect(e){if(e.files&&e.files[0]){let a=e.files[0];this.uploadImage(a).subscribe(t=>{this.updateFormWithResponse(t.data)},t=>{console.error("Error during image upload:",t)})}}uploadImage(e){let a=new FormData;return a.append("file",e),this._product.uploadGalaryImage(a)}updateFormWithResponse(e){this.dialogForm.get("icon")?.setValue({externalStorageId:e.externalStorageId,mimeType:e.mimeType,sizeInBytes:e.sizeInBytes,blobUrI:e.blobUrI})}static \u0275fac=function(a){return new(a||i)(h(ee),h(oe))};static \u0275cmp=V({type:i,selectors:[["admin-add-edit-category"]],inputs:{classifications:"classifications",data:"data"},outputs:{save:"save"},standalone:!0,features:[zt([Jt]),M],decls:28,vars:29,consts:[[1,"form-content",3,"formGroup"],[1,"row"],[1,"col-6"],["formControlName","classifications","optionLabel","name",3,"onChange","options","placeholder"],["class","error-message",4,"ngIf"],["mode","decimal","inputId","withoutgrouping","formControlName","barcodeNumber",1,"w-full",3,"useGrouping","placeholder"],["type","text","pInputText","","formControlName","arabicName",1,"w-full",3,"placeholder"],["type","text","pInputText","","formControlName","englishName",1,"w-full",3,"placeholder"],[1,"col-12"],[4,"ngIf"],[1,"col-3"],[1,"p-element","btn-tasheel","btn-primary","w-full",3,"onClick","label"],[1,"error-message"],["mode","basic","chooseIcon","pi pi-upload","name","demo[]","accept","image/*","maxFileSize","1000000",3,"onSelect","chooseLabel"],[1,"container-img"],[3,"src","alt"],["src","assets/layout/images/close-icon.svg","alt","close-icon",1,"close",3,"click"]],template:function(a,t){a&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-multiSelect",3),p(4,"translate"),_("onChange",function(d){return t.onClassificationChange(d)}),o(),f(5,La,4,8,"div",4),o(),l(6,"div",2),C(7,"p-inputNumber",5),p(8,"translate"),f(9,Ba,4,8,"div",4)(10,Ma,3,5,"div",4),o(),l(11,"div",2),C(12,"input",6),p(13,"translate"),f(14,ka,4,8,"div",4)(15,Ra,3,5,"div",4),o(),l(16,"div",2),C(17,"input",7),p(18,"translate"),f(19,Pa,4,8,"div",4)(20,Ua,3,5,"div",4),o(),l(21,"div",8),f(22,za,3,3,"ng-container",9)(23,Ga,4,2,"ng-container",9),o(),l(24,"div",10)(25,"p-button",11),p(26,"translate"),p(27,"translate"),_("onClick",function(){return t.onSave()}),o()()()()),a&2&&(s("formGroup",t.dialogForm),n(3),s("options",t.classifications)("placeholder",u(4,17,"FIELDS.CLASSIFICATION")),n(2),s("ngIf",t.control.classifications.touched&&(t.control.classifications.errors==null?null:t.control.classifications.errors.required)),n(2),s("useGrouping",!1)("placeholder",u(8,19,"FIELDS.BAR_CODE_NO")),n(2),s("ngIf",t.control.barcodeNumber.touched&&(t.control.barcodeNumber.errors==null?null:t.control.barcodeNumber.errors.required)),n(),s("ngIf",t.control.barcodeNumber.touched&&(t.control.barcodeNumber.errors==null?null:t.control.barcodeNumber.errors.maxlength)),n(2),s("placeholder",u(13,21,"FIELDS.SHORT_ARABIC_NAME")),n(2),s("ngIf",t.control.arabicName.touched&&(t.control.arabicName.errors==null?null:t.control.arabicName.errors.required)),n(),s("ngIf",t.control.arabicName.touched&&(t.control.arabicName.errors==null?null:t.control.arabicName.errors.maxlength)),n(2),s("placeholder",u(18,23,"FIELDS.ENGLISH_NAME")),n(2),s("ngIf",t.control.englishName.touched&&(t.control.englishName.errors==null?null:t.control.englishName.errors.required)),n(),s("ngIf",t.control.englishName.touched&&(t.control.englishName.errors==null?null:t.control.englishName.errors.maxlength)),n(2),s("ngIf",!(!(t.data==null||t.data.icon==null)&&t.data.icon.blobUrI)),n(),s("ngIf",t.data==null||t.data.icon==null?null:t.data.icon.blobUrI),n(2),s("label",t.data?u(26,25,"GENERAL.UPDATE"):u(27,27,"GENERAL.SAVE")))},dependencies:[L,q,Ae,Y,$,Z,Re,ke,ie,ne,xe,P,z,Pe,di,li,te,K,J,H,ae,O],styles:[".container-img[_ngcontent-%COMP%]{width:160px;height:124px;border:2px solid #ff7f3e;border-radius:8px;overflow:hidden;position:relative}.container-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.container-img[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:4px;inset-inline-end:4px;cursor:pointer;height:20px;width:20px;background:#ff7f3e;padding:5px;border-radius:50%}"]})}return i})();var dt={columns:[{field:"name",header:"CATEGORY_NAME",type:"label",exported:!1},{field:"subCategories",header:"SUB_CATAGORY",type:"label",exported:!0},{field:"classification",header:"CLASSIFICATION",type:"label",exported:!0},{field:"actions",header:"ACTIONS",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",actions:["CREATE"],rowsActions:["EDIT","DELETE"],paginator:!0,locale:"FIELDS.",dataLoading:"server"};var Oa=()=>({width:"600px",height:"100vh",top:"0",margin:"0",padding:"0"});function ja(i,c){if(i&1&&(l(0,"div",10)(1,"div"),m(2),o()()),i&2){let e=c.$implicit;n(2),A(e.name)}}function Ha(i,c){if(i&1){let e=N();l(0,"div",11)(1,"div",12),m(2),p(3,"translate"),o(),l(4,"button",13),_("click",function(){T(e);let t=g();return S(t.displayDialog=!1)}),C(5,"img",14),o()()}i&2&&(n(2),A(u(3,1,"CATEGORY.ADD_NEW_CATEGORY")))}function qa(i,c){if(i&1){let e=N();l(0,"admin-add-edit-category",15),_("save",function(t){T(e);let r=g();return S(r.handleSave(t))}),o()}if(i&2){let e=g();s("classifications",e.classifications)("data",e.selectedData)}}var wr=(()=>{class i{_confirm;_product;_toastr;_translate;_unsubscribeAll=new pe;classifications=[];tableConfig;displayDialog=!1;selectedClassification=null;pageSize=10;pageNumber=1;totalRecords=0;first=0;keyword="";searchControl=new Ce;constructor(e,a,t,r){this._confirm=e,this._product=a,this._toastr=t,this._translate=r}ngOnInit(){this.getClassifications(),this.getAllCategories(),this.onSearch(),this.tableConfig=dt}getClassifications(){this._product.getClassifications().pipe(D(this._unsubscribeAll)).subscribe(e=>this.classifications=e)}onActionClicked(e){switch(e.action){case"CREATE":this.selectedData=null,this.openCreateDialog();break;case"EDIT":this.getCategoryById(e.data);break;case"DELETE":this.onActionDelete(e.data);break;default:break}}onActionDelete(e){console.log("data",e),this._confirm.confirm("delete").subscribe(a=>{a&&this._product.deleteCategory(e.id).pipe(D(this._unsubscribeAll)).subscribe(t=>{t.data&&this.getAllCategories()})})}onClassificationChange(e){this.selectedClassification=e.value,this.filterCategories()}getAllCategories(){this._product.getAllCategories(this.pageSize,this.pageNumber,this.keyword).pipe(D(this._unsubscribeAll)).subscribe(e=>{this.tableConfig=w(x({},dt),{rows:e.data.result.map(a=>w(x({},a),{classification:a?.classification.map(t=>t.name).join(", "),subCategories:a?.subCategories.map(t=>t.name).join(", ")}))||[],totalRecords:e.data.rowCount,rowsActions:["EDIT","DELETE"]})})}filterCategories(){this.selectedClassification?this._product.getAllCategories(this.pageSize,this.pageNumber,this.keyword).pipe(D(this._unsubscribeAll)).subscribe(e=>{let a=e.data.result.filter(t=>Array.isArray(t.classification)?t.classification.some(r=>r.id===this.selectedClassification?.id):t.classification?.id===this.selectedClassification?.id);this.tableConfig.rows=a.map(t=>w(x({},t),{classification:Array.isArray(t.classification)?t.classification.map(r=>r.name).join(", "):t.classification?.name,subCategories:t.subCategories.map(r=>r.name).join(", ")}))}):this.getAllCategories()}onPageChange(e){this.first=e.first||0,this.pageSize=e.rows||10,this.pageNumber=e.page||1,this.getAllCategories()}openCreateDialog(){this.displayDialog=!0}onDialogClose(){this.displayDialog=!1}onSearch(){this.searchControl.valueChanges.pipe(ge(e=>e.trim().length>=0),_e(400),he(e=>this._product.getAllCategories(this.pageSize,this.pageNumber,e.trim()))).subscribe(e=>{e&&e.data&&(this.tableConfig=w(x({},dt),{rows:e.data.result.map(a=>w(x({},a),{classification:a.classification.map(t=>t.name).join(", "),subCategories:a.subCategories.map(t=>t.name).join(", ")}))||[],totalRecords:e.data.rowCount,rowsActions:["EDIT","DELETE"]}))})}selectedData=null;getCategoryById(e){let a=typeof e.id=="string"?Number(e.id):e.id;a&&this._product.getCategoryById(a).subscribe(t=>{t.data&&(this.displayDialog=!0,console.log("SELECTED",t.data),this.selectedData=t.data)})}handleSave(e){this.selectedData?this._product.editCategory(w(x({},e),{id:this.selectedData.id})).pipe(D(this._unsubscribeAll)).subscribe(a=>{a.data&&(this._toastr.success(this._translate.instant("GENERAL.UPDATED_SUCCESSFULLY",{name:"CATEGORY.NAME"})),this.getAllCategories(),this.displayDialog=!1)}):this._product.addCategory(e).pipe(D(this._unsubscribeAll)).subscribe(()=>{this.getAllCategories(),this.displayDialog=!1,this._toastr.success(this._translate.instant("GENERAL.ADDED_SUCCESSFULLY",{name:"CATEGORY.NAME"}))})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(a){return new(a||i)(h(ve),h(oe),h(be),h(De))};static \u0275cmp=V({type:i,selectors:[["admin-categories"]],standalone:!0,features:[M],decls:11,vars:15,consts:[[1,"dialog-side"],[3,"actionClicked","onPage","onSearch","config"],["filters-area","",1,"filters","row"],[1,"filters-item","col-2","p-0"],[1,"filters-actions","col-4","p-0"],["formControlName","classification","optionLabel","name","filterBy","name","placeholder","Select a classifications",1,"w-full",3,"onChange","options","filter","showClear"],["pTemplate","selectedItem"],[3,"visibleChange","visible","modal","dismissableMask","position","baseZIndex","draggable","blockScroll","closable"],["pTemplate","header"],["pTemplate","content"],[1,"flex","align-items-center","gap-2"],[1,"dialog-header"],[1,"dialog-header__title"],[1,"dialog-header__close-button",3,"click"],["src","assets/layout/images/close-icon.svg","alt","Close",1,"dialog-header__close-icon"],[3,"save","classifications","data"]],template:function(a,t){a&1&&(l(0,"section",0)(1,"shared-ui-table",1),_("actionClicked",function(d){return t.onActionClicked(d)})("onPage",function(d){return t.onPageChange(d)})("onSearch",function(d){return t.searchControl.patchValue(d)}),l(2,"div",2)(3,"div",3),m(4,"Filters"),o(),l(5,"div",4)(6,"p-dropdown",5),_("onChange",function(d){return t.onClassificationChange(d)}),f(7,ja,3,1,"ng-template",6),o()()()(),l(8,"p-dialog",7),de("visibleChange",function(d){return le(t.displayDialog,d)||(t.displayDialog=d),d}),f(9,Ha,6,3,"ng-template",8)(10,qa,1,2,"ng-template",9),o()()),a&2&&(n(),s("config",t.tableConfig),n(5),s("options",t.classifications)("filter",!0)("showClear",!0),n(2),re(y(14,Oa)),se("visible",t.displayDialog),s("modal",!0)("dismissableMask",!0)("position","right")("baseZIndex",1e4)("draggable",!1)("blockScroll",!0)("closable",!1))},dependencies:[L,me,j,ce,G,fe,ue,Ci,P,z],encapsulation:2})}return i})();var Xe=i=>({fieldName:i}),mt=()=>({maxLength:50});function Xa(i,c){if(i&1&&m(0),i&2){let e=c.$implicit;v(" ",e.name," ")}}function Wa(i,c){i&1&&(l(0,"div",18),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Xe,u(2,1,"FIELDS.CLASSIFICATION")))," "))}function Qa(i,c){i&1&&(l(0,"div",18),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Xe,u(2,1,"FIELDS.ARABIC_NAME")))," "))}function Ya(i,c){i&1&&(l(0,"div",18),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,mt))," "))}function $a(i,c){i&1&&(l(0,"div",18),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Xe,u(2,1,"FIELDS.ENGLISH_NAME")))," "))}function Za(i,c){i&1&&(l(0,"div",18),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,mt))," "))}function Ka(i,c){i&1&&(l(0,"div",18),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Xe,u(2,1,"FIELDS.ARABIC_NAME")))," "))}function Ja(i,c){i&1&&(l(0,"div",18),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,mt))," "))}function en(i,c){i&1&&(l(0,"div",18),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Xe,u(2,1,"FIELDS.ENGLISH_NAME")))," "))}function tn(i,c){i&1&&(l(0,"div",18),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,mt))," "))}function an(i,c){if(i&1){let e=N();l(0,"div",19)(1,"div",6)(2,"div",20)(3,"div",21)(4,"div",8)(5,"label",9),m(6),p(7,"translate"),o(),C(8,"input",22),p(9,"translate"),f(10,Ka,4,8,"div",5)(11,Ja,3,5,"div",5),o()(),l(12,"div",23)(13,"div",8)(14,"label",9),m(15),p(16,"translate"),o(),C(17,"input",24),p(18,"translate"),f(19,en,4,8,"div",5)(20,tn,3,5,"div",5),o()(),l(21,"div",25)(22,"div",15)(23,"p-button",26),_("click",function(){T(e);let t=g();return S(t.addNewVariants())}),o(),l(24,"p-button",27),_("click",function(){let t=T(e).index,r=g();return S(r.removeVariants(t))}),o()()()()()()}if(i&2){let e,a,t,r,d=c.index,b=g();s("formGroupName",d),n(6),A(u(7,13,"FIELDS.ARABIC_NAME")),n(2),Be("id","arabicName",d,""),s("placeholder",u(9,15,"FIELDS.ARABIC_NAME")),n(2),s("ngIf",((e=b.variantValues.at(d).get("arabicName"))==null?null:e.touched)&&((e=b.variantValues.at(d).get("arabicName"))==null?null:e.hasError("required"))),n(),s("ngIf",((a=b.variantValues.at(d).get("arabicName"))==null?null:a.touched)&&((a=b.variantValues.at(d).get("arabicName"))==null?null:a.hasError("maxlength"))),n(4),A(u(16,17,"FIELDS.ENGLISH_NAME")),n(2),Be("id","englishName",d,""),s("placeholder",u(18,19,"FIELDS.ENGLISH_NAME")),n(2),s("ngIf",((t=b.variantValues.at(d).get("englishName"))==null?null:t.touched)&&((t=b.variantValues.at(d).get("englishName"))==null?null:t.hasError("required"))),n(),s("ngIf",((r=b.variantValues.at(d).get("englishName"))==null?null:r.touched)&&((r=b.variantValues.at(d).get("englishName"))==null?null:r.hasError("maxlength")))}}var vi=(()=>{class i{fb;save=new k;closeVariantValue=new k;addVariantForm;classifications=[];breadcrumb;variantsData;constructor(e){this.fb=e}ngOnInit(){this.initForm(),this.setdataInform()}initForm(){this.addVariantForm=this.fb.group({id:[0],arabicName:["",[I.required,I.maxLength(50)]],englishName:["",[I.required,I.maxLength(50)]],classificationIds:[[],I.required],variantValues:this.fb.array([this.createVariantGroup()])})}setdataInform(){if(this.variantsData){this.addVariantForm.patchValue(this.variantsData);let e=this.getSelectedOptions(this.variantsData.classificationIds);this.addVariantForm.patchValue({classificationIds:e}),this.variantValues.clear();for(let a=0;a<this.variantsData.variantValues.length;a++)this.variantValues.push(this.fb.group({id:this.variantsData.variantValues[a].id,englishName:this.variantsData.variantValues[a].englishName,arabicName:this.variantsData.variantValues[a].arabicName}))}}getSelectedOptions(e){return this.classifications.filter(a=>e.includes(a.id))}get variantValues(){return this.addVariantForm.get("variantValues")}get control(){return this.addVariantForm.controls}createVariantGroup(){return this.fb.group({id:[0],arabicName:["",[I.required,I.maxLength(50)]],englishName:["",[I.required,I.maxLength(50)]]})}addNewVariants(){this.variantValues.push(this.createVariantGroup())}removeVariants(e){this.variantValues.removeAt(e)}onSave(){this.addVariantForm.valid?this.save.emit(this.addVariantForm.value):this.addVariantForm.markAllAsTouched()}onClose(){this.closeVariantValue.emit()}static \u0275fac=function(a){return new(a||i)(h(ee))};static \u0275cmp=V({type:i,selectors:[["admin-add-edit-variants"]],inputs:{classifications:"classifications",variantsData:"variantsData"},outputs:{save:"save",closeVariantValue:"closeVariantValue"},standalone:!0,features:[M],decls:34,vars:33,consts:[[1,"p-fluid","formgrid",3,"formGroup"],[1,"p-grid","mb-1"],[1,"p-col-6"],["optionLabel","name","formControlName","classificationIds",3,"options","filter","placeholder"],["pTemplate","item"],["class","error-message",4,"ngIf"],[1,"grid"],[1,"field","col-6"],[1,"flex","flex-column","gap-2"],["for","arabicName"],["pInputText","","formControlName","arabicName","id","arabicName","aria-describedby","arabicName-help",3,"placeholder"],["for","englishName"],["pInputText","","formControlName","englishName","id","englishName","aria-describedby","englishName-help",3,"placeholder"],["formArrayName","variantValues"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","gap-2","align-items-center","justify-content-end"],["severity","danger",3,"onClick","label"],["severity","primary",3,"onClick","disabled","label"],[1,"error-message"],[3,"formGroupName"],[1,"flex","align-items-center"],[1,"field","col-5"],["pInputText","","formControlName","arabicName","aria-describedby","arabicName-help",3,"placeholder","id"],[1,"field","md:col-5"],["pInputText","","formControlName","englishName","aria-describedby","englishName-help",3,"placeholder","id"],[1,"field","col-2"],["severity","primary","icon","pi pi-plus",3,"click"],["severity","danger","icon","pi pi-minus",3,"click"]],template:function(a,t){a&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-multiSelect",3),p(4,"translate"),f(5,Xa,1,1,"ng-template",4),o(),f(6,Wa,4,8,"div",5),o()(),l(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),m(11),p(12,"translate"),o(),C(13,"input",10),p(14,"translate"),f(15,Qa,4,8,"div",5)(16,Ya,3,5,"div",5),o()(),l(17,"div",7)(18,"div",8)(19,"label",11),m(20),p(21,"translate"),o(),C(22,"input",12),p(23,"translate"),f(24,$a,4,8,"div",5)(25,Za,3,5,"div",5),o()()(),l(26,"div",13),f(27,an,25,21,"div",14),o(),l(28,"div",15)(29,"p-button",16),p(30,"translate"),_("onClick",function(){return t.onClose()}),o(),l(31,"p-button",17),p(32,"translate"),p(33,"translate"),_("onClick",function(){return t.onSave()}),o()()()),a&2&&(s("formGroup",t.addVariantForm),n(3),s("options",t.classifications)("filter",!0)("placeholder",u(4,17,"FIELDS.CLASSIFICATION")),n(3),s("ngIf",t.control.classificationIds.touched&&(t.control.classificationIds.errors==null?null:t.control.classificationIds.errors.required)),n(5),A(u(12,19,"FIELDS.ARABIC_NAME")),n(2),s("placeholder",u(14,21,"FIELDS.ARABIC_NAME")),n(2),s("ngIf",t.control.arabicName.touched&&(t.control.arabicName.errors==null?null:t.control.arabicName.errors.required)),n(),s("ngIf",t.control.arabicName.touched&&(t.control.arabicName.errors==null?null:t.control.arabicName.errors.maxlength)),n(4),A(u(21,23,"FIELDS.ENGLISH_NAME")),n(2),s("placeholder",u(23,25,"FIELDS.ENGLISH_NAME")),n(2),s("ngIf",t.control.englishName.touched&&(t.control.englishName.errors==null?null:t.control.englishName.errors.required)),n(),s("ngIf",t.control.englishName.touched&&(t.control.englishName.errors==null?null:t.control.englishName.errors.maxlength)),n(2),s("ngForOf",t.variantValues.controls),n(2),s("label",u(30,27,"GENERAL.CANCEL")),n(2),s("disabled",t.addVariantForm.invalid)("label",t.variantsData?u(32,29,"GENERAL.UPDATE"):u(33,31,"GENERAL.SAVE")))},dependencies:[L,nt,q,Ae,Y,$,Z,te,K,J,rt,st,H,ae,O,ie,G,P,z,ne,xe,Pe]})}return i})();var Ei=i=>({fieldName:i}),Ii=()=>({maxLength:50});function nn(i,c){i&1&&(l(0,"div",20),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Ei,u(2,1,"FIELDS.ARABIC_NAME")))," "))}function on(i,c){i&1&&(l(0,"div",20),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,Ii))," "))}function rn(i,c){i&1&&(l(0,"div",20),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Ei,u(2,1,"FIELDS.ENGLISH_NAME")))," "))}function sn(i,c){i&1&&(l(0,"div",20),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,Ii))," "))}function ln(i,c){if(i&1){let e=N();l(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"label",11),m(6),p(7,"translate"),o(),C(8,"input",12),p(9,"translate"),f(10,nn,4,8,"div",13)(11,on,3,5,"div",13),o()(),l(12,"div",14)(13,"div",10)(14,"label",11),m(15),p(16,"translate"),o(),C(17,"input",15),p(18,"translate"),f(19,rn,4,8,"div",13)(20,sn,3,5,"div",13),o()(),l(21,"div",16)(22,"div",17)(23,"p-button",18),_("click",function(){T(e);let t=g();return S(t.addNewVariants())}),o(),l(24,"p-button",19),_("click",function(){let t=T(e).index,r=g();return S(r.removeVariants(t))}),o()()()()()()}if(i&2){let e,a,t,r,d=c.index,b=g();s("formGroupName",d),n(6),A(u(7,13,"FIELDS.ARABIC_NAME")),n(2),Be("id","arabicName",d,""),s("placeholder",u(9,15,"FIELDS.ARABIC_NAME")),n(2),s("ngIf",((e=b.variantValues.at(d).get("arabicName"))==null?null:e.touched)&&((e=b.variantValues.at(d).get("arabicName"))==null?null:e.hasError("required"))),n(),s("ngIf",((a=b.variantValues.at(d).get("arabicName"))==null?null:a.touched)&&((a=b.variantValues.at(d).get("arabicName"))==null?null:a.hasError("maxlength"))),n(4),A(u(16,17,"FIELDS.ENGLISH_NAME")),n(2),Be("id","englishName",d,""),s("placeholder",u(18,19,"FIELDS.ENGLISH_NAME")),n(2),s("ngIf",((t=b.variantValues.at(d).get("englishName"))==null?null:t.touched)&&((t=b.variantValues.at(d).get("englishName"))==null?null:t.hasError("required"))),n(),s("ngIf",((r=b.variantValues.at(d).get("englishName"))==null?null:r.touched)&&((r=b.variantValues.at(d).get("englishName"))==null?null:r.hasError("maxlength")))}}var yi=(()=>{class i{fb;addVariantValueForm;save=new k;closeVariantValue=new k;classifications=[];breadcrumb;variantsData;constructor(e){this.fb=e}ngOnInit(){this.initForm()}initForm(){this.addVariantValueForm=this.fb.group({id:[0],variantValues:this.fb.array([this.createVariantGroup()])})}addNewVariants(){this.variantValues.push(this.createVariantGroup())}removeVariants(e){this.variantValues.removeAt(e)}get variantValues(){return this.addVariantValueForm.get("variantValues")}createVariantGroup(){return this.fb.group({id:[0],arabicName:["",[I.required,I.maxLength(50)]],englishName:["",[I.required,I.maxLength(50)]]})}get control(){return this.addVariantValueForm.controls}onSave(){this.addVariantValueForm.valid&&(this.variantsData&&this.addVariantValueForm.get("id")?.setValue(this.variantsData.id),this.save.emit(this.addVariantValueForm.value))}onClose(){this.closeVariantValue.emit()}static \u0275fac=function(a){return new(a||i)(h(ee))};static \u0275cmp=V({type:i,selectors:[["admin-add-variants-value"]],inputs:{classifications:"classifications",variantsData:"variantsData"},outputs:{save:"save",closeVariantValue:"closeVariantValue"},standalone:!0,features:[M],decls:8,vars:9,consts:[[1,"p-fluid","formgrid",3,"formGroup"],["formArrayName","variantValues"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","gap-2","align-items-center","justify-content-end"],["severity","danger",3,"onClick","label"],["severity","primary",3,"onClick","disabled","label"],[3,"formGroupName"],[1,"grid"],[1,"flex","align-items-center"],[1,"field","col-5"],[1,"flex","flex-column","gap-2"],["for","arabicName"],["pInputText","","formControlName","arabicName","aria-describedby","arabicName-help",3,"placeholder","id"],["class","error-message",4,"ngIf"],[1,"field","md:col-5"],["pInputText","","type","text","formControlName","englishName",3,"id","placeholder"],[1,"field","col-2"],[1,"flex","gap-2","mt-1","align-items-center","justify-content-end"],["severity","primary","icon","pi pi-plus",3,"click"],["severity","danger","icon","pi pi-minus",3,"click"],[1,"error-message"]],template:function(a,t){a&1&&(l(0,"div",0)(1,"div",1),f(2,ln,25,21,"div",2),o(),l(3,"div",3)(4,"p-button",4),p(5,"translate"),_("onClick",function(){return t.onClose()}),o(),l(6,"p-button",5),p(7,"translate"),_("onClick",function(){return t.onSave()}),o()()()),a&2&&(s("formGroup",t.addVariantValueForm),n(2),s("ngForOf",t.variantValues.controls),n(2),s("label",u(5,5,"GENERAL.CANCEL")),n(2),s("disabled",t.addVariantValueForm.invalid)("label",u(7,7,"GENERAL.SAVE")))},dependencies:[L,nt,q,Ae,Y,$,Z,te,K,J,rt,st,O,ie,P,z,H,ae]})}return i})();var Ti={columns:[{field:"arabicName",header:"VARIANTNAME",type:"label",exported:!1},{field:"variantsValueProp",header:"VARIANTVALUE",type:"label",exported:!1},{field:"classification",header:"CLASSIFICATION",type:"label",exported:!1},{field:"actions",header:"ACTIONS",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",actions:["CREATE"],rowsActions:["EDIT","DELETE"],paginator:!0};var xt=()=>[],Si=()=>({width:"600px",height:"100vh",top:"0",margin:"0",padding:"0"});function dn(i,c){if(i&1&&(l(0,"div",10)(1,"div"),m(2),o()()),i&2){let e=c.$implicit;n(2),A(e.name)}}function pn(i,c){if(i&1){let e=N();l(0,"div",11)(1,"div",12),m(2),p(3,"translate"),o(),l(4,"button",13),_("click",function(){T(e);let t=g();return S(t.displayDialog=!1)}),C(5,"img",14),o()()}i&2&&(n(2),A(u(3,1,"VARIANTS.ADD_NEW_VARIANT")))}function cn(i,c){if(i&1){let e=N();l(0,"admin-add-edit-variants",15),p(1,"async"),_("closeVariantValue",function(){T(e);let t=g();return S(t.onDialogClose("ADD_FULL"))})("save",function(t){T(e);let r=g();return S(r.handleSave(t))}),o()}if(i&2){let e=g();s("classifications",u(1,2,e.classifications$)||y(4,xt))("variantsData",e.selectedVariant)}}function mn(i,c){if(i&1){let e=N();l(0,"div",11)(1,"div",12),m(2),p(3,"translate"),o(),l(4,"button",13),_("click",function(){T(e);let t=g();return S(t.displayVariantValueDialog=!1)}),C(5,"img",14),o()()}i&2&&(n(2),A(u(3,1,"VARIANTS.ADD_NEW_VARIANT")))}function un(i,c){if(i&1){let e=N();l(0,"admin-add-variants-value",15),p(1,"async"),_("closeVariantValue",function(){T(e);let t=g();return S(t.onDialogClose("ADD_VARIANT_VALUE"))})("save",function(t){T(e);let r=g();return S(r.handleVariantValueSave(t))}),o()}if(i&2){let e=g();s("classifications",u(1,2,e.classifications$)||y(4,xt))("variantsData",e.selectedVariant)}}var Es=(()=>{class i{_confirm;_product;_toastr;_translate;_unsubscribeAll=new pe;classifications$;selectedClassification=null;searchControl=new Ce;breadcrumb;filters={number:1,size:10};selectedVariant=null;tableConfig;displayDialog=!1;displayVariantValueDialog=!1;constructor(e,a,t,r){this._confirm=e,this._product=a,this._toastr=t,this._translate=r}ngOnInit(){this.classifications$=this._product.getClassifications(),this.getAllVariants(this.filters),this.onSearchData()}onSearchData(){this.searchControl.valueChanges.pipe(ge(e=>e.trim()?.length>0),_e(400),he(e=>this._product.searchVariants(e))).subscribe(e=>this.tableConfig.rows=e.data.result.map(a=>w(x({},a),{classification:a.classificationIds.map(t=>t.name).join(", "),variantsValueProp:a.variantValues.map(t=>t.name).join(", ")}))||[])}filterVariants(e){this.selectedClassification?this._product.getAllVariants(e).pipe(D(this._unsubscribeAll)).subscribe(a=>{let t=a.data.result.filter(r=>r.classificationIds.find(d=>d.name==this.selectedClassification?.name));this.tableConfig.rows=t.map(r=>w(x({},r),{classification:r.classificationIds.map(d=>d.name).join(", "),variantsValueProp:r.variantValues.map(d=>d.name).join(", ")}))}):this.getAllVariants(this.filters)}onPageChange(e){this.filters={size:e.rows||10,number:e.page||1},this.getAllVariants(this.filters)}getAllVariants(e){this._product.getAllVariants(e).pipe(D(this._unsubscribeAll)).subscribe(a=>{this.tableConfig=w(x({},Ti),{rows:a.data.result,totalRecords:a.data.rowCount}),this.tableConfig.rows=a.data.result.map(t=>w(x({},t),{classification:t.classificationIds.map(r=>r.name).join(", "),variantsValueProp:t.variantValues.map(r=>r.name).join(", ")}))||[]})}onActionClicked(e){switch(e.action){case"CREATE":this.selectedVariant=null,this.openCreateDialog("ADD_FULL");break;case"ADD_VARIANT_VALUE":this.selectedVariant=e.data,this.openCreateDialog("ADD_VARIANT_VALUE");break;case"DELETE":this.ondeleteVariant(e.data);break;case"EDIT":this.getVariantById(+e.data.id);break;default:break}}getVariantById(e){this._product.getVariantById(e).pipe(D(this._unsubscribeAll)).subscribe(a=>{this.selectedVariant=a.data||[],this.openCreateDialog("ADD_FULL")})}openCreateDialog(e){e==="ADD_FULL"?this.displayDialog=!0:e==="ADD_VARIANT_VALUE"&&(this.displayVariantValueDialog=!0)}onDialogClose(e){e==="ADD_FULL"?this.displayDialog=!1:e==="ADD_VARIANT_VALUE"&&(this.displayVariantValueDialog=!1)}onClassificationChange(e){this.selectedClassification=e.value,this.filterVariants(this.filters)}handleSave(e){e.classificationIds&&(e.classificationIds=e.classificationIds.map(a=>a.id?a.id:a)),this.selectedVariant?this._product.editVariant(w(x({},e),{id:this.selectedVariant.id})).pipe(D(this._unsubscribeAll)).subscribe(a=>{if(a.data){let r=this._translate.currentLang==="ar"?this.selectedVariant?.arabicName:this.selectedVariant?.englishName;this._translate.get("GENERAL.UPDATED_SUCCESSFULLY",{name:r}).subscribe(d=>{this._toastr.success(d)}),this.getAllVariants(this.filters),this.displayDialog=!1}}):this._product.addVariant(e).pipe(D(this._unsubscribeAll)).subscribe(()=>{this.getAllVariants(this.filters),this.displayDialog=!1;let t=this._translate.currentLang==="ar"?"\u0645\u062A\u063A\u064A\u0631":"Variant";this._translate.get("GENERAL.ADDED_SUCCESSFULLY",{nameToUse:t}).subscribe(r=>{this._toastr.success(r)})})}ondeleteVariant(e){this._confirm.confirm("delete").subscribe(a=>{a&&e.id&&this._product.deleteVariant(e.id).pipe(D(this._unsubscribeAll)).subscribe(t=>{t.data&&(this._toastr.success("Variant Deleted Successfully"),this.getAllVariants(this.filters))})})}handleVariantValueSave(e){this._product.addVariantValue(e).pipe(D(this._unsubscribeAll)).subscribe(()=>{this.getAllVariants(this.filters),this.displayVariantValueDialog=!1,this._translate.get("GENERAL.ADDED_SUCCESSFULLY").subscribe(a=>{this._toastr.success(a)})})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(a){return new(a||i)(h(ve),h(oe),h(be),h(De))};static \u0275cmp=V({type:i,selectors:[["admin-variants"]],standalone:!0,features:[M],decls:16,vars:32,consts:[[1,"dialog-side"],[3,"actionClicked","onPage","onSearch","config"],["filters-area","",1,"filters","p-grid"],[1,"filters-item","col-2","p-0"],[1,"filters-actions","col-4","p-0"],["formControlName","classification","optionLabel","name","filterBy","name","placeholder","Select a classifications",1,"w-full",3,"onChange","options","filter","showClear"],["pTemplate","selectedItem"],[3,"visibleChange","visible","modal","dismissableMask","position","baseZIndex","draggable","blockScroll","closable"],["pTemplate","header"],["pTemplate","content"],[1,"flex","align-items-center","gap-2"],[1,"dialog-header"],[1,"dialog-header__title"],[1,"dialog-header__close-button",3,"click"],["src","assets/layout/images/close-icon.svg","alt","Close",1,"dialog-header__close-icon"],[3,"closeVariantValue","save","classifications","variantsData"]],template:function(a,t){a&1&&(l(0,"section",0)(1,"shared-ui-table",1),_("actionClicked",function(d){return t.onActionClicked(d)})("onPage",function(d){return t.onPageChange(d)})("onSearch",function(d){return t.searchControl.patchValue(d)}),l(2,"div",2)(3,"div",3),m(4),p(5,"translate"),o(),l(6,"div",4)(7,"p-dropdown",5),p(8,"async"),_("onChange",function(d){return t.onClassificationChange(d)}),f(9,dn,3,1,"ng-template",6),o()()()(),l(10,"p-dialog",7),de("visibleChange",function(d){return le(t.displayDialog,d)||(t.displayDialog=d),d}),f(11,pn,6,3,"ng-template",8)(12,cn,2,5,"ng-template",9),o(),l(13,"p-dialog",7),de("visibleChange",function(d){return le(t.displayVariantValueDialog,d)||(t.displayVariantValueDialog=d),d}),f(14,mn,6,3,"ng-template",8)(15,un,2,5,"ng-template",9),o()()),a&2&&(n(),s("config",t.tableConfig),n(3),A(u(5,25,"GENERAL.FILTERS")),n(3),s("options",u(8,27,t.classifications$)||y(29,xt))("filter",!0)("showClear",!0),n(3),re(y(30,Si)),se("visible",t.displayDialog),s("modal",!0)("dismissableMask",!0)("position","right")("baseZIndex",1e4)("draggable",!1)("blockScroll",!0)("closable",!1),n(3),re(y(31,Si)),se("visible",t.displayVariantValueDialog),s("modal",!0)("dismissableMask",!0)("position","right")("baseZIndex",1e4)("draggable",!1)("blockScroll",!0)("closable",!1))},dependencies:[L,$t,me,O,G,vi,j,ce,fe,ue,P,z,yi],encapsulation:2})}return i})();var Ts={columns:[{field:"name",header:"Name",type:"link",exported:!1,sortable:!0},{field:"sKU",header:"SKU",type:"label",exported:!0,sortable:!0},{field:"unit",header:"Unit",type:"label",exported:!0,sortable:!0},{field:"barcode",header:"Barcode",type:"label",exported:!0,sortable:!0},{field:"cost",header:"Cost",type:"label",exported:!0,sortable:!0},{field:"price",header:"Price",type:"label",exported:!0,sortable:!0},{field:"actions",header:"Actions",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",actions:["EXPORT","IMPORT","CREATE"],rowsActions:["EDIT","DELETE"],paginator:!0,dataLoading:"server"};var We={columns:[{field:"tagName",header:"Tag Name",type:"label",exported:!1},{field:"classifications",header:"Classification",type:"label",exported:!1},{field:"actions",header:"Actions",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",actions:["CREATE"],rowsActions:["EDIT","DELETE"],dataLoading:"server",paginator:!0},Ss={columns:[{field:"classificationName",header:"Classification Name ",type:"label",exported:!1},{field:"freeProdouctCount",header:"Product No",type:"label",exported:!1},{field:"price",header:"Product Price",type:"label",exported:!1},{field:"freeProdouctCount",header:"Free Product No",type:"label",exported:!1},{field:"paidProduct",header:"Paid Product",type:"label",exported:!1},{field:"actions",header:"Actions",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",actions:["CREATE"],rowsActions:["EDIT","DELETE"],dataLoading:"server",paginator:!0};var Nt=i=>({fieldName:i}),Di=()=>({maxLength:50});function fn(i,c){i&1&&(l(0,"div",14),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Nt,u(2,1,"FIELDS.CLASSIFICATIONS")))," "))}function gn(i,c){i&1&&(l(0,"div",14),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Nt,u(2,1,"FIELDS.ENGLISH_NAME")))," "))}function _n(i,c){i&1&&(l(0,"div",14),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,Di))," "))}function hn(i,c){i&1&&(l(0,"div",14),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Nt,u(2,1,"FIELDS.ARABIC_NAME")))," "))}function bn(i,c){i&1&&(l(0,"div",14),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,Di))," "))}var Ai=(()=>{class i{_fb;_product;classifications=[];brandData;selectedBrand=null;brandForm;save=new k;constructor(e,a){this._fb=e,this._product=a}ngOnInit(){this.brandForm=this.initForm(),this.brandData&&this.brandForm.patchValue(this.brandData)}initForm(){return this.brandForm=this._fb.group({arabicName:["",[I.required]],englishName:["",[I.required]],classificationIds:[[],[I.required]],countryIds:[null],iconUrl:this._fb.group({externalStorageId:"",mimeType:"",sizeInBytes:0,blobUrI:""})})}onClassificationChange(e){this.brandForm.get("classificationId")?.setValue(e.value.id),this.brandForm.get("classification")?.setValue(e.value)}onSave(){this.brandForm.valid?this.save.emit(this.brandForm.value):this.brandForm.markAllAsTouched()}uploadedFiles=[];onUpload(e){for(let a of e.files)this.uploadedFiles.push(a)}static \u0275fac=function(a){return new(a||i)(h(ee),h(oe))};static \u0275cmp=V({type:i,selectors:[["admin-brands-form"]],inputs:{classifications:"classifications",brandData:"brandData"},outputs:{save:"save"},standalone:!0,features:[M],decls:33,vars:36,consts:[["autocomplete","off",3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12"],["for","classificationIds"],["formControlName","classificationIds","optionLabel","name","optionValue","id","filterBy","name",3,"onChange","options","filter","showClear","placeholder"],["class","error-message",4,"ngIf"],[1,"field","col-12","md:col-6"],["for","englishName"],["pInputText","","type","text","pInputText","","formControlName","englishName",1,"w-full",3,"placeholder"],["for","arabicName"],["type","text","pInputText","","formControlName","arabicName",1,"w-full",3,"placeholder"],["for","iconUrl"],["name","iconUrl","id","iconUrl","accept","image/*",3,"onUpload","showUploadButton","showCancelButton","multiple","maxFileSize"],[1,"p-element","btn-tasheel","btn-primary","w-full",3,"onClick","label"],[1,"error-message"]],template:function(a,t){if(a&1&&(l(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),m(4),p(5,"translate"),o(),l(6,"p-multiSelect",4),p(7,"translate"),_("onChange",function(d){return t.onClassificationChange(d)}),o(),f(8,fn,4,8,"div",5),o(),l(9,"div",6)(10,"label",7),m(11),p(12,"translate"),o(),C(13,"input",8),p(14,"translate"),f(15,gn,4,8,"div",5)(16,_n,3,5,"div",5),o(),l(17,"div",6)(18,"label",9),m(19),p(20,"translate"),o(),C(21,"input",10),p(22,"translate"),f(23,hn,4,8,"div",5)(24,bn,3,5,"div",5),o(),l(25,"div",2)(26,"label",11),m(27,"icon"),o(),l(28,"p-fileUpload",12),_("onUpload",function(d){return t.onUpload(d)}),o()(),l(29,"div",6)(30,"p-button",13),p(31,"translate"),p(32,"translate"),_("onClick",function(){return t.onSave()}),o()()()()),a&2){let r,d,b,R,U;s("formGroup",t.brandForm),n(4),A(u(5,20,"FIELDS.CLASSIFICATIONS")),n(2),s("options",t.classifications)("filter",!0)("showClear",!0)("placeholder",u(7,22,"FIELDS.CLASSIFICATIONS")),n(2),s("ngIf",((r=t.brandForm.get("classificationIds"))==null?null:r.touched)&&((r=t.brandForm.get("classificationIds"))==null||r.errors==null?null:r.errors.required)),n(3),A(u(12,24,"FIELDS.ENGLISH_NAME")),n(2),s("placeholder",u(14,26,"FIELDS.ENGLISH_NAME")),n(2),s("ngIf",((d=t.brandForm.get("englishName"))==null?null:d.touched)&&((d=t.brandForm.get("englishName"))==null||d.errors==null?null:d.errors.required)),n(),s("ngIf",((b=t.brandForm.get("englishName"))==null?null:b.touched)&&((b=t.brandForm.get("englishName"))==null||b.errors==null?null:b.errors.maxlength)),n(3),A(u(20,28,"FIELDS.ARABIC_NAME")),n(2),s("placeholder",u(22,30,"FIELDS.ARABIC_NAME")),n(2),s("ngIf",((R=t.brandForm.get("arabicName"))==null?null:R.touched)&&((R=t.brandForm.get("arabicName"))==null||R.errors==null?null:R.errors.required)),n(),s("ngIf",((U=t.brandForm.get("arabicName"))==null?null:U.touched)&&((U=t.brandForm.get("arabicName"))==null||U.errors==null?null:U.errors.maxlength)),n(4),s("showUploadButton",!1)("showCancelButton",!1)("multiple",!0)("maxFileSize",1e6),n(2),s("label",t.brandData?u(31,32,"GENERAL.UPDATE"):u(32,34,"GENERAL.SAVE"))}},dependencies:[L,q,te,Me,Y,$,Z,K,J,j,H,ae,ne,xe,O,ie,P,z,Re,ke]})}return i})();var xi={columns:[{field:"name",header:"Brand name",type:"label",exported:!1},{field:"classifications",header:"CLASSIFICATION",type:"label",exported:!0},{field:"actions",header:"Actions",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",actions:["CREATE"],rowsActions:["EDIT","DELETE"],paginator:!0,dataLoading:"server",locale:"FIELDS."};var Ni=(()=>{class i{_http;constructor(e){this._http=e}getClassifications(){return this._http.get(`${Q.URL_API}Classifications`)}getBrands(e){return this._http.get(`${Q.URL_API}Brands?PageSize=${e.pageSize}&PageNumber=${e.pageNumber}`)}addBrand(e){return this._http.post(`${Q.URL_API}Brands`,e)}deleteBrand(e){return this._http.delete(`${Q.URL_API}Brands/${e}`)}editBrand(e){return this._http.put(`${Q.URL_API}Brands`,e)}getBrandById(e){return this._http.get(`/api/Brands/${e}`)}static \u0275fac=function(a){return new(a||i)(Ze(ot))};static \u0275prov=$e({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var vn=()=>({width:"600px",height:"100vh",top:"0",margin:"0",padding:"0"});function En(i,c){if(i&1&&(l(0,"div",9)(1,"div"),m(2),o()()),i&2){let e=c.$implicit;n(2),A(e.name)}}function In(i,c){if(i&1){let e=N();l(0,"div",10)(1,"div",11),m(2,"Add New Brand"),o(),l(3,"button",12),_("click",function(){T(e);let t=g();return S(t.displayDialog=!1)}),C(4,"img",13),o()()}}function yn(i,c){if(i&1){let e=N();l(0,"admin-brands-form",14),_("save",function(t){T(e);let r=g();return S(r.handleSave(t))}),o()}if(i&2){let e=g();s("classifications",e.classifications)("brandData",e.selectedBrands)}}var pl=(()=>{class i{_toastr;_confirm;_brands;translate;_unsubscribeAll=new pe;displayDialog=!1;breadcrumb=[{icon:"pi pi-home",route:"/"},{label:"Product Management"},{label:"Tags",route:"/tags"}];currentPage=1;totalRecords=0;first=0;pageSize=10;rows=10;tableConfig;classifications=[];selectedClassification=null;searchControl=new Ce;selectedBrands;constructor(e,a,t,r){this._toastr=e,this._confirm=a,this._brands=t,this.translate=r}ngOnInit(){this.tableConfig=xi,this.getClassifications(),this.getBrands({pageSize:this.rows,pageNumber:this.currentPage}),this.onSearch()}getClassifications(){this._brands.getClassifications().pipe(D(this._unsubscribeAll)).subscribe({next:e=>{this.classifications=e.data.classifications}})}getBrands(e){this._brands.getBrands(e).pipe(D(this._unsubscribeAll)).subscribe({next:a=>{this.tableConfig.actions=["CREATE"],this.tableConfig.rows=a.data.result.map(t=>w(x({},t),{classifications:Array.isArray(t.classifications)?t.classifications.map(r=>r.name).join(", "):""}))||[],this.tableConfig.totalRecords=a.data.rowCount}})}openCreateDialog(){this.selectedBrands=null,this.displayDialog=!0}onDialogClose(){this.displayDialog=!1}handleSave(e){(this.selectedBrands?this._brands.editBrand(w(x({},e),{id:this.selectedBrands.id})):this._brands.addBrand(e)).pipe(D(this._unsubscribeAll)).subscribe({next:()=>{this.getBrands({pageSize:this.rows,pageNumber:this.currentPage}),this.displayDialog=!1,this._toastr.success(this.selectedBrands?"Brand Updated successfully":"Brand Added successfully")}})}getBrandsById(e){this._brands.getBrandById(e).pipe(D(this._unsubscribeAll)).subscribe({next:a=>{a.data&&(this.displayDialog=!0,this.selectedBrands=a.data,this.selectedBrands.classificationIds=(this.selectedBrands.classificationModels||[]).map(t=>t.id||0))}})}filterBrands(){this.selectedClassification?this._brands.getBrands({pageSize:this.rows,pageNumber:this.currentPage}).pipe(D(this._unsubscribeAll)).subscribe({next:e=>{let a=e.data.result.filter(t=>t.classifications.some(r=>r.id===this.selectedClassification?.id));this.tableConfig.rows=a.map(t=>w(x({},t),{classifications:Array.isArray(t.classifications)?t.classifications.map(r=>r.name).join(", "):""}))||[]}}):this.getBrands({pageSize:this.rows,pageNumber:this.currentPage})}onClassificationChange(e){this.selectedClassification=e.value,this.filterBrands()}onSearch(){this.searchControl.valueChanges.pipe(ge(e=>e.trim().length>0),_e(400),he(e=>this._brands.getBrands({pageSize:this.rows,pageNumber:this.currentPage,Keyword:e.trim()}))).subscribe({next:e=>{e&&e.data&&(this.tableConfig=w(x({},We),{rows:e.data.result,totalRecords:e.data.rowCount,rowsActions:["EDIT","DELETE"]}),this.totalRecords=e.data.rowCount||0)}})}onActionDelete(e){e.id&&this._confirm.confirm("delete").subscribe(a=>{a&&this._brands.deleteBrand(e.id).pipe(D(this._unsubscribeAll)).subscribe({next:()=>{let t=this.translate.instant("GENERAL.BRAND_DELETED_SUCCESS");this._toastr.success(t),this.getBrands({pageSize:this.rows,pageNumber:this.currentPage})},error:()=>{let t=this.translate.instant("GENERAL.BRAND_DELETE_FAILED");this._toastr.show(t)}})})}onActionClicked(e){switch(e.action){case"CREATE":this.openCreateDialog();break;case"EDIT":e.data&&this.getBrandsById(e.data.id);break;case"DELETE":e.data&&e.data.id&&this.onActionDelete(e.data);break;default:break}}onPageChange(e){this.first=e.first||0,this.rows=e.rows||10,this.currentPage=e.page||1,this.getBrands({pageSize:this.rows,pageNumber:this.currentPage})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(a){return new(a||i)(h(be),h(ve),h(Ni),h(De))};static \u0275cmp=V({type:i,selectors:[["admin-brands"]],standalone:!0,features:[M],decls:11,vars:15,consts:[[3,"actionClicked","onSearch","onPage","config"],["filters-area","",1,"filters","row"],[1,"filters-item","col-2","p-0"],[1,"filters-actions","col-4","p-0"],["formControlName","classification","optionLabel","name","filterBy","name","placeholder","Select a classifications",1,"w-full",3,"onChange","options","filter","showClear"],["pTemplate","selectedItem"],[3,"visibleChange","visible","modal","dismissableMask","position","baseZIndex","draggable","blockScroll","closable"],["pTemplate","header"],["pTemplate","content"],[1,"flex","align-items-center","gap-2"],[1,"dialog-header"],[1,"dialog-header__title"],[1,"dialog-header__close-button",3,"click"],["src","assets/layout/images/close-icon.svg","alt","Close",1,"dialog-header__close-icon"],[3,"save","classifications","brandData"]],template:function(a,t){a&1&&(l(0,"section")(1,"shared-ui-table",0),_("actionClicked",function(d){return t.onActionClicked(d)})("onSearch",function(d){return t.searchControl.patchValue(d)})("onPage",function(d){return t.onPageChange(d)}),l(2,"div",1)(3,"div",2),m(4,"Filters"),o(),l(5,"div",3)(6,"p-dropdown",4),_("onChange",function(d){return t.onClassificationChange(d)}),f(7,En,3,1,"ng-template",5),o()()()(),l(8,"p-dialog",6),de("visibleChange",function(d){return le(t.displayDialog,d)||(t.displayDialog=d),d}),f(9,In,5,0,"ng-template",7)(10,yn,1,2,"ng-template",8),o()()),a&2&&(n(),s("config",t.tableConfig),n(5),s("options",t.classifications)("filter",!0)("showClear",!0),n(2),re(y(14,vn)),se("visible",t.displayDialog),s("modal",!0)("dismissableMask",!0)("position","right")("baseZIndex",1e4)("draggable",!1)("blockScroll",!0)("closable",!1))},dependencies:[L,me,H,j,ce,G,ne,Ai,fe,ue,P],encapsulation:2})}return i})();var Qe=i=>({fieldName:i}),ut=()=>({maxLength:50});function Tn(i,c){if(i&1&&(l(0,"div",11)(1,"div"),m(2),o()()),i&2){let e=c.$implicit;n(2),A(e.name)}}function Sn(i,c){i&1&&(l(0,"div",16),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Qe,u(2,1,"FIELDS.CLASSIFICATION")))," "))}function Dn(i,c){i&1&&(l(0,"div",16),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Qe,u(2,1,"FIELDS.SHORT_ARABIC_NAME")))," "))}function An(i,c){i&1&&(l(0,"div",16),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,ut))," "))}function xn(i,c){i&1&&(l(0,"div",16),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Qe,u(2,1,"FIELDS.ENGLISH_NAME")))," "))}function Nn(i,c){i&1&&(l(0,"div",16),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,ut))," "))}function wn(i,c){i&1&&(l(0,"div",16),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Qe,u(2,1,"FIELDS.SHORT_ARABIC_NAME")))," "))}function Fn(i,c){i&1&&(l(0,"div",16),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,ut))," "))}function Vn(i,c){i&1&&(l(0,"div",16),m(1),p(2,"translate"),p(3,"translate"),o()),i&2&&(n(),v(" ",E(3,3,"GENERAL.FIELD_REQUIRED",F(6,Qe,u(2,1,"FIELDS.SHORT_ENGLISH_NAME")))," "))}function Ln(i,c){i&1&&(l(0,"div",16),m(1),p(2,"translate"),o()),i&2&&(n(),v(" ",E(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",y(4,ut))," "))}var wi=(()=>{class i{_fb;classifications=[];unitData;addUnitForm;save=new k;constructor(e){this._fb=e}ngOnInit(){if(this.prepareForm(),this.unitData&&(this.addUnitForm.patchValue(this.unitData),this.unitData.classificationId)){let e=Number(this.unitData.classificationId),a=this.classifications.find(t=>t.id===e);a&&this.addUnitForm.get("classification")?.setValue(a)}}prepareForm(){this.addUnitForm=this._fb.group({childId:[],arabicName:[null,[I.required,I.maxLength(50)]],englishName:[null,[I.required,I.maxLength(50)]],classificationId:[null,I.required],classification:[null,I.required],shortArabicName:[null,[I.required,I.maxLength(50)]],shortEnglishName:[null,[I.required,I.maxLength(50)]],isDecimal:[!0]})}get control(){return this.addUnitForm.controls}onClassificationChange(e){this.addUnitForm.get("classificationId")?.setValue(e.value.id),this.addUnitForm.get("classification")?.setValue(e.value)}onSave(){this.addUnitForm.valid?this.save.emit(this.addUnitForm.value):this.addUnitForm.markAllAsTouched()}static \u0275fac=function(a){return new(a||i)(h(ee))};static \u0275cmp=V({type:i,selectors:[["admin-add-edit-units"]],inputs:{classifications:"classifications",unitData:"unitData"},outputs:{save:"save"},standalone:!0,features:[M],decls:37,vars:37,consts:[[1,"form-content",3,"formGroup"],[1,"row"],[1,"col-12"],["formControlName","classification","optionLabel","name","filterBy","name",3,"onChange","options","filter","showClear","placeholder"],["pTemplate","selectedItem"],["class","error-message",4,"ngIf"],[1,"col-6"],["type","text","pInputText","","formControlName","arabicName",1,"w-full",3,"placeholder"],["type","text","pInputText","","formControlName","englishName",1,"w-full",3,"placeholder"],["type","text","pInputText","","formControlName","shortArabicName",1,"w-full",3,"placeholder"],["type","text","pInputText","","formControlName","shortEnglishName",1,"w-full",3,"placeholder"],[1,"flex","align-items-center","gap-2"],["formControlName","isDecimal","inputId","binary",3,"binary"],["for","ny"],[1,"col-3"],[1,"p-element","btn-tasheel","btn-primary","w-full",3,"onClick","label"],[1,"error-message"]],template:function(a,t){a&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-dropdown",3),p(4,"translate"),_("onChange",function(d){return t.onClassificationChange(d)}),f(5,Tn,3,1,"ng-template",4),o(),f(6,Sn,4,8,"div",5),o(),l(7,"div",6),C(8,"input",7),p(9,"translate"),f(10,Dn,4,8,"div",5)(11,An,3,5,"div",5),o(),l(12,"div",6),C(13,"input",8),p(14,"translate"),f(15,xn,4,8,"div",5)(16,Nn,3,5,"div",5),o(),l(17,"div",6),C(18,"input",9),p(19,"translate"),f(20,wn,4,8,"div",5)(21,Fn,3,5,"div",5),o(),l(22,"div",6),C(23,"input",10),p(24,"translate"),f(25,Vn,4,8,"div",5)(26,Ln,3,5,"div",5),o(),l(27,"div",2)(28,"div",11),C(29,"p-checkbox",12),l(30,"label",13),m(31),p(32,"translate"),o()()(),l(33,"div",14)(34,"p-button",15),p(35,"translate"),p(36,"translate"),_("onClick",function(){return t.onSave()}),o()()()()),a&2&&(s("formGroup",t.addUnitForm),n(3),s("options",t.classifications)("filter",!0)("showClear",!0)("placeholder",u(4,21,"FIELDS.CLASSIFICATION")),n(3),s("ngIf",t.control.classification.touched&&(t.control.classification.errors==null?null:t.control.classification.errors.required)),n(2),s("placeholder",u(9,23,"FIELDS.SHORT_ARABIC_NAME")),n(2),s("ngIf",t.control.arabicName.touched&&(t.control.arabicName.errors==null?null:t.control.arabicName.errors.required)),n(),s("ngIf",t.control.arabicName.touched&&(t.control.arabicName.errors==null?null:t.control.arabicName.errors.maxlength)),n(2),s("placeholder",u(14,25,"FIELDS.ENGLISH_NAME")),n(2),s("ngIf",t.control.englishName.touched&&(t.control.englishName.errors==null?null:t.control.englishName.errors.required)),n(),s("ngIf",t.control.englishName.touched&&(t.control.englishName.errors==null?null:t.control.englishName.errors.maxlength)),n(2),s("placeholder",u(19,27,"FIELDS.SHORT_ARABIC_NAME")),n(2),s("ngIf",t.control.shortArabicName.touched&&(t.control.shortArabicName.errors==null?null:t.control.shortArabicName.errors.required)),n(),s("ngIf",t.control.shortArabicName.touched&&(t.control.shortArabicName.errors==null?null:t.control.shortArabicName.errors.maxlength)),n(2),s("placeholder",u(24,29,"FIELDS.SHORT_ENGLISH_NAME")),n(2),s("ngIf",t.control.shortEnglishName.touched&&(t.control.shortEnglishName.errors==null?null:t.control.shortEnglishName.errors.required)),n(),s("ngIf",t.control.shortEnglishName.touched&&(t.control.shortEnglishName.errors==null?null:t.control.shortEnglishName.errors.maxlength)),n(3),s("binary",!0),n(2),A(u(32,31,"FIELDS.ALLOW_DECIMAL")),n(3),s("label",t.unitData?u(35,33,"GENERAL.UPDATE"):u(36,35,"GENERAL.SAVE")))},dependencies:[L,q,Ae,Y,$,Z,j,ce,G,P,z,Pe,ui,te,K,J,H,ae,O,ie]})}return i})();var ft={columns:[{field:"name",header:"UNIT_NAME",type:"label",exported:!1},{field:"shortName",header:"SHORT_NAME",type:"label",exported:!1},{field:"classification",header:"CLASSIFICATION",type:"label",exported:!1},{field:"actions",header:"ACTIONS",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",locale:"FIELDS.",actions:["CREATE"],rowsActions:["EDIT","DELETE"],dataLoading:"server",paginator:!0};var Bn=()=>({width:"600px",height:"100vh",top:"0",margin:"0",padding:"0"});function Mn(i,c){if(i&1&&(l(0,"div",11)(1,"div"),m(2),o()()),i&2){let e=c.$implicit;n(2),A(e.name)}}function kn(i,c){if(i&1){let e=N();l(0,"div",12)(1,"div",13),m(2),p(3,"translate"),o(),l(4,"button",14),_("click",function(){T(e);let t=g();return S(t.displayDialog=!1)}),C(5,"img",15),o()()}i&2&&(n(2),A(u(3,1,"UNITS.ADD_NEW_UNIT")))}function Rn(i,c){if(i&1){let e=N();l(0,"admin-add-edit-units",16),_("save",function(t){T(e);let r=g();return S(r.handleSave(t))}),o()}if(i&2){let e=g();s("classifications",e.classifications)("unitData",e.selectedUnit)}}var jl=(()=>{class i{_toastr;_confirm;_translate;_product;_unsubscribeAll=new pe;displayDialog=!1;pageSize=10;pageNumber=1;totalRecords=0;first=0;keyword="";searchControl=new Ce;breadcrumb;tableConfig;classifications=[];selectedClassification=null;constructor(e,a,t,r){this._toastr=e,this._confirm=a,this._translate=t,this._product=r}ngOnInit(){this.tableConfig=ft,this.setBreadcrumb(),this.getClassifications(),this.getAllUnits(),this.onSearch(),this._translate.onLangChange.pipe(D(this._unsubscribeAll)).subscribe(e=>{this.setBreadcrumb()})}setBreadcrumb(){this.breadcrumb=[{icon:"pi pi-home",route:"/"},{label:this._translate.instant("UNITS.PRODUCT_MANAGEMENT")},{label:this._translate.instant("UNITS.NAME"),route:"/units"}]}getClassifications(){this._product.getClassifications().pipe(D(this._unsubscribeAll)).subscribe(e=>{this.classifications=e.data.classifications})}getAllUnits(){this._product.getAllUnits(this.pageSize,this.pageNumber,this.keyword).pipe(D(this._unsubscribeAll)).subscribe(e=>{this.tableConfig=w(x({},ft),{rows:e.data.result.map(a=>w(x({},a),{classification:a.classification?.name}))||[],totalRecords:e.data.rowCount,rowsActions:["EDIT","DELETE"]})})}onPageChange(e){this.first=e.first||0,this.pageSize=e.rows||10,this.pageNumber=e.page||1,this.getAllUnits()}onActionClicked(e){switch(e.action){case"CREATE":this.selectedUnit=null,this.openCreateDialog();break;case"EDIT":this.getUnitById(e.data);break;case"DELETE":this.onActionDelete(e.data);break;default:break}}openCreateDialog(){this.displayDialog=!0}onDialogClose(){this.displayDialog=!1}onActionDelete(e){this._confirm.confirm("delete").subscribe(a=>{a&&this._product.deleteUnit(e.id).pipe(D(this._unsubscribeAll)).subscribe(t=>{t.data&&this.getAllUnits()})})}handleSave(e){this.selectedUnit?this._product.editUnit(w(x({},e),{id:this.selectedUnit.id})).pipe(D(this._unsubscribeAll)).subscribe(a=>{a.data&&(this._toastr.success(this._translate.instant("GENERAL.UPDATED_SUCCESSFULLY",{name:"UNITS.NAME"})),this.getAllUnits(),this.displayDialog=!1)}):this._product.addUnit(e).pipe(D(this._unsubscribeAll)).subscribe(()=>{this.getAllUnits(),this.displayDialog=!1,this._toastr.success(this._translate.instant("GENERAL.ADDED_SUCCESSFULLY",{name:"UNITS.NAME"}))})}selectedUnit=null;getUnitById(e){let a=typeof e.id=="string"?Number(e.id):e.id;a&&this._product.getUnitById(a).subscribe(t=>{t.data&&(this.displayDialog=!0,this.selectedUnit=t.data)})}onClassificationChange(e){this.selectedClassification=e.value,this.filterUnits()}filterUnits(){this.selectedClassification?this._product.getAllUnits(this.pageSize,this.pageNumber,this.keyword).pipe(D(this._unsubscribeAll)).subscribe(e=>{let a=e.data.result.filter(t=>t.classification?.id===this.selectedClassification?.id);this.tableConfig.rows=a.map(t=>w(x({},t),{classification:t.classification?.name}))}):this.getAllUnits()}onSearch(){this.searchControl.valueChanges.pipe(ge(e=>e.trim().length>=0),_e(400),he(e=>this._product.getAllUnits(this.pageSize,this.pageNumber,e.trim()))).subscribe(e=>{e&&e.data&&(this.tableConfig=w(x({},ft),{rows:e.data.result.map(a=>w(x({},a),{classification:a.classification?.name}))||[],totalRecords:e.data.rowCount,rowsActions:["EDIT","DELETE"]}))})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(a){return new(a||i)(h(be),h(ve),h(De),h(oe))};static \u0275cmp=V({type:i,selectors:[["admin-units"]],standalone:!0,features:[M],decls:13,vars:19,consts:[[1,"dialog-side"],[3,"items"],[3,"onPage","onSearch","actionClicked","config"],["filters-area","",1,"filters","row"],[1,"filters-item","col-2","p-0"],[1,"filters-actions","col-4","p-0"],["formControlName","classification","optionLabel","name","filterBy","name","placeholder","Select a classifications",1,"w-full",3,"onChange","options","filter","showClear"],["pTemplate","selectedItem"],[3,"visibleChange","visible","modal","dismissableMask","position","baseZIndex","draggable","blockScroll","closable"],["pTemplate","header"],["pTemplate","content"],[1,"flex","align-items-center","gap-2"],[1,"dialog-header"],[1,"dialog-header__title"],[1,"dialog-header__close-button",3,"click"],["src","assets/layout/images/close-icon.svg","alt","Close",1,"dialog-header__close-icon"],[3,"save","classifications","unitData"]],template:function(a,t){a&1&&(l(0,"section",0),C(1,"pos-ui-breadcrumb",1),l(2,"shared-ui-table",2),_("onPage",function(d){return t.onPageChange(d)})("onSearch",function(d){return t.searchControl.patchValue(d)})("actionClicked",function(d){return t.onActionClicked(d)}),l(3,"div",3)(4,"div",4),m(5),p(6,"translate"),o(),l(7,"div",5)(8,"p-dropdown",6),_("onChange",function(d){return t.onClassificationChange(d)}),f(9,Mn,3,1,"ng-template",7),o()()()(),l(10,"p-dialog",8),de("visibleChange",function(d){return le(t.displayDialog,d)||(t.displayDialog=d),d}),f(11,kn,6,3,"ng-template",9)(12,Rn,1,2,"ng-template",10),o()()),a&2&&(n(),s("items",t.breadcrumb),n(),s("config",t.tableConfig),n(3),A(u(6,16,"GENERAL.FILTERS")),n(3),s("options",t.classifications)("filter",!0)("showClear",!0),n(2),re(y(18,Bn)),se("visible",t.displayDialog),s("modal",!0)("dismissableMask",!0)("position","right")("baseZIndex",1e4)("draggable",!1)("blockScroll",!0)("closable",!1))},dependencies:[L,me,j,ce,G,wi,P,z,mi,fe,ue],encapsulation:2})}return i})();function Pn(i,c){i&1&&(l(0,"small",11),m(1," Please select a classification "),o())}function Un(i,c){i&1&&(l(0,"small",11),m(1," Please enter the name in English "),o())}function zn(i,c){i&1&&(l(0,"small",11),m(1," Please enter the name in Arabic "),o())}var Fi=(()=>{class i{_fb;formError;classifications=[];tagData;selectedTags=null;TagFormData;save=new k;constructor(e){this._fb=e}ngOnInit(){if(this.TagFormData=this.initForm(),this.tagData&&(console.log("tagData",this.tagData),this.TagFormData.patchValue(this.tagData),this.tagData.classificationIds)){let e=Number(this.tagData.classificationIds),a=this.classifications.find(t=>t.id===e);a&&this.TagFormData.get("classifications")?.setValue(a)}}initForm(){return this.TagFormData=this._fb.group({arabicName:["",[I.required]],englishName:["",[I.required]],classificationIds:[[],[I.required]],tagTypeId:[2]})}onClassificationChange(e){this.TagFormData.get("classificationId")?.setValue(e.value.id),this.TagFormData.get("classification")?.setValue(e.value)}onSave(){this.TagFormData.valid?this.save.emit(this.TagFormData.value):this.TagFormData.markAllAsTouched()}static \u0275fac=function(a){return new(a||i)(h(ee))};static \u0275cmp=V({type:i,selectors:[["admin-tags-form"]],inputs:{classifications:"classifications",tagData:"tagData"},outputs:{save:"save"},standalone:!0,features:[M],decls:17,vars:8,consts:[["autocomplete","off",3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12"],["formControlName","classificationIds","optionLabel","name","optionValue","id","filterBy","name","placeholder","Select a classifications",3,"onChange","options","filter","showClear"],["class","text-error",4,"ngIf"],[1,"field","col-12","md:col-6"],["for","englishName"],["pInputText","","formControlName","englishName","id","englishName","type","text"],["for","arabicName"],["pInputText","","formControlName","arabicName","id","arabicName","type","text"],[1,"p-element","btn-tasheel","btn-primary","w-full",3,"onClick","label"],[1,"text-error"]],template:function(a,t){if(a&1&&(l(0,"form",0)(1,"div",1)(2,"div",2)(3,"p-multiSelect",3),_("onChange",function(d){return t.onClassificationChange(d)}),o(),f(4,Pn,2,0,"small",4),o(),l(5,"div",5)(6,"label",6),m(7,"English Name"),o(),C(8,"input",7),f(9,Un,2,0,"small",4),o(),l(10,"div",5)(11,"label",8),m(12,"Arabic Name"),o(),C(13,"input",9),f(14,zn,2,0,"small",4),o(),l(15,"div",5)(16,"p-button",10),_("onClick",function(){return t.onSave()}),o()()()()),a&2){let r,d,b;s("formGroup",t.TagFormData),n(3),s("options",t.classifications)("filter",!0)("showClear",!0),n(),s("ngIf",((r=t.TagFormData.get("classifications"))==null?null:r.hasError("required"))&&(((r=t.TagFormData.get("classifications"))==null?null:r.touched)||((r=t.TagFormData.get("classifications"))==null?null:r.dirty))),n(5),s("ngIf",((d=t.TagFormData.get("englishName"))==null?null:d.hasError("required"))&&(((d=t.TagFormData.get("englishName"))==null?null:d.touched)||((d=t.TagFormData.get("englishName"))==null?null:d.dirty))),n(5),s("ngIf",((b=t.TagFormData.get("arabicName"))==null?null:b.hasError("required"))&&(((b=t.TagFormData.get("arabicName"))==null?null:b.touched)||((b=t.TagFormData.get("arabicName"))==null?null:b.dirty))),n(2),s("label",t.tagData?"Update":"Save")}},dependencies:[L,q,te,Me,Y,$,Z,K,J,j,H,ae,ne,xe,O,ie],encapsulation:2})}return i})();var Gn=()=>({width:"600px",height:"100vh",top:"0",margin:"0",padding:"0"});function On(i,c){if(i&1&&(l(0,"div",9)(1,"div"),m(2),o()()),i&2){let e=c.$implicit;n(2),A(e.name)}}function jn(i,c){if(i&1){let e=N();l(0,"div",10)(1,"div",11),m(2,"Add New Tags"),o(),l(3,"button",12),_("click",function(){T(e);let t=g();return S(t.displayDialog=!1)}),C(4,"img",13),o()()}}function Hn(i,c){if(i&1){let e=N();l(0,"admin-tags-form",14),_("save",function(t){T(e);let r=g();return S(r.handleSave(t))}),o()}if(i&2){let e=g();s("classifications",e.classifications)("tagData",e.selectedTags)}}var bd=(()=>{class i{_toastr;_confirm;_product;_unsubscribeAll=new pe;items=[{label:"Stores"},{label:"Pending"}];activeItem;displayDialog=!1;breadcrumb=[{icon:"pi pi-home",route:"/"},{label:"Product Management"},{label:"Tags",route:"/tags"}];currentPage=1;totalRecords=0;first=0;rows=10;tableConfig;classifications=[];selectedClassification=null;searchControl=new Ce;constructor(e,a,t){this._toastr=e,this._confirm=a,this._product=t}ngOnInit(){this.tableConfig=We,this.getClassifications(),this.getTags({pageSize:this.rows,pageNumber:this.currentPage}),this.onSearch()}getClassifications(){this._product.getClassifications().pipe(D(this._unsubscribeAll)).subscribe(e=>{this.classifications=e})}getTags(e){this._product.getAllTags(e).pipe(D(this._unsubscribeAll)).subscribe(a=>{this.tableConfig.actions=["CREATE"],this.tableConfig.rows=a.data.result.map(t=>w(x({},t),{classifications:Array.isArray(t.classifications)?t.classifications.map(r=>r.name).join(", "):""}))||[],this.tableConfig.totalRecords=a.data.rowCount})}openCreateDialog(){this.displayDialog=!0}onDialogClose(){this.displayDialog=!1}handleSave(e){this.selectedTags?this._product.editTags(w(x({},e),{id:this.selectedTags.id})).pipe(D(this._unsubscribeAll)).subscribe(a=>{a.data&&(this._toastr.success("Unit Updated successfully"),this.getTags({pageSize:this.rows,pageNumber:this.currentPage}),this.displayDialog=!1)}):this._product.addTags(e).pipe(D(this._unsubscribeAll)).subscribe(()=>{this.getTags({pageSize:this.rows,pageNumber:this.currentPage}),this.displayDialog=!1,this._toastr.success("Unit Added successfully")})}selectedTags;getTagsById(e){let a=typeof e.tagId=="string"?Number(e.tagId):e.tagId;a&&!isNaN(a)&&this._product.getTagsById(a).subscribe(t=>{console.log("Response:",t.data),t.data?(this.displayDialog=!0,this.selectedTags=t.data,this.selectedTags.classificationIds=this.selectedTags.classificationIds.map(r=>r.id),console.log("Selected Tags:",this.selectedTags)):console.error("No data received from API")})}filterTags(){this.selectedClassification?this._product.getAllTags({pageSize:this.rows,pageNumber:this.currentPage}).pipe(D(this._unsubscribeAll)).subscribe(e=>{let a=e.data.result.filter(t=>t.classifications.some(r=>r.id===this.selectedClassification?.id));this.tableConfig.rows=a.map(t=>w(x({},t),{classifications:Array.isArray(t.classifications)?t.classifications.map(r=>r.name).join(", "):""}))||[]}):this.getTags({pageSize:this.rows,pageNumber:this.currentPage})}onClassificationChange(e){this.selectedClassification=e.value,this.filterTags()}onSearch(){this.searchControl.valueChanges.pipe(ge(e=>e.trim().length>=0),_e(400),he(e=>this._product.getAllTags({pageSize:this.rows,pageNumber:this.currentPage,Keyword:e.trim()}))).subscribe(e=>{e&&e.data&&(this.tableConfig=w(x({},We),{rows:e.data.result,totalRecords:e.data.rowCount,rowsActions:["EDIT","DELETE"]}),this.totalRecords=e.data.rowCount)})}onActionDelete(e){e.tagId&&this._confirm.confirm("delete").subscribe(a=>{a&&this._product.deleteTags(e.tagId).pipe(D(this._unsubscribeAll)).subscribe(t=>{t.data&&this.getTags({pageSize:this.rows,pageNumber:this.currentPage})})})}onActionClicked(e){switch(e.action){case"CREATE":this.selectedTags=null,this.openCreateDialog();break;case"EDIT":e.data?(console.log("Data received for EDIT action:",e.data),this.getTagsById(e.data)):console.error("No data received for EDIT action");break;case"DELETE":e.data&&e.data.tagId&&this.onActionDelete(e.data);break;default:break}}onPageChange(e){this.first=e.first||0,this.rows=e.rows||10,this.currentPage=e.page||1,this.getTags({pageSize:this.rows,pageNumber:this.currentPage})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(a){return new(a||i)(h(be),h(ve),h(oe))};static \u0275cmp=V({type:i,selectors:[["admin-tags"]],standalone:!0,features:[M],decls:11,vars:15,consts:[[3,"actionClicked","onSearch","onPage","config"],["filters-area","",1,"filters","row"],[1,"filters-item","col-2","p-0"],[1,"filters-actions","col-4","p-0"],["formControlName","classification","optionLabel","name","filterBy","name","placeholder","Select a classifications",1,"w-full",3,"onChange","options","filter","showClear"],["pTemplate","selectedItem"],[3,"visibleChange","visible","modal","dismissableMask","position","baseZIndex","draggable","blockScroll","closable"],["pTemplate","header"],["pTemplate","content"],[1,"flex","align-items-center","gap-2"],[1,"dialog-header"],[1,"dialog-header__title"],[1,"dialog-header__close-button",3,"click"],["src","assets/layout/images/close-icon.svg","alt","Close",1,"dialog-header__close-icon"],[3,"save","classifications","tagData"]],template:function(a,t){a&1&&(l(0,"section")(1,"shared-ui-table",0),_("actionClicked",function(d){return t.onActionClicked(d)})("onSearch",function(d){return t.searchControl.patchValue(d)})("onPage",function(d){return t.onPageChange(d)}),l(2,"div",1)(3,"div",2),m(4,"Filters"),o(),l(5,"div",3)(6,"p-dropdown",4),_("onChange",function(d){return t.onClassificationChange(d)}),f(7,On,3,1,"ng-template",5),o()()()(),l(8,"p-dialog",6),de("visibleChange",function(d){return le(t.displayDialog,d)||(t.displayDialog=d),d}),f(9,jn,5,0,"ng-template",7)(10,Hn,1,2,"ng-template",8),o()()),a&2&&(n(),s("config",t.tableConfig),n(5),s("options",t.classifications)("filter",!0)("showClear",!0),n(2),re(y(14,Gn)),se("visible",t.displayDialog),s("modal",!0)("dismissableMask",!0)("position","right")("baseZIndex",1e4)("draggable",!1)("blockScroll",!0)("closable",!1))},dependencies:[L,me,H,j,ce,G,ne,Fi,fe,ue],encapsulation:2})}return i})();export{fe as a,Ts as b,Ss as c,Wo as d,wr as e,Es as f,pl as g,jl as h,bd as i};
