import{a as St,b as It,c as Et,d as xt,e as wt,f as Mt}from"./chunk-E6QBB557.js";import{b as B}from"./chunk-W42J3D5O.js";import{a as $e,b as de}from"./chunk-TJQN6HPD.js";import{a as He,b as yt}from"./chunk-STHWX254.js";import{b as We}from"./chunk-JOMO22QM.js";import{a as ze}from"./chunk-2K6EM6QD.js";import{b as Oe,c as O,e as se,f as je,g as Ve,i as Ge,m as Ue}from"./chunk-2XAT2JOF.js";import"./chunk-G3A2VQVD.js";import{d as we,f as Me}from"./chunk-FFRWIXDO.js";import{B as Be,m as ke,n as ae,q as De,r as Ne,t as ce,u as Re,z as Le}from"./chunk-ZIFIHYY2.js";import{c as he,e as N,f as Z,g as R,h as Te,i as Ae,k as ee,n as te,r as ie,s as oe,t as re,w as Fe,x as le}from"./chunk-HPGERUHF.js";import{f as ne,g as L}from"./chunk-VNHB2M7P.js";import{a as Ee}from"./chunk-QEQCDFPQ.js";import{c as J,d as Q}from"./chunk-TI22M3TN.js";import"./chunk-NJC4F6AZ.js";import{n as xe,o as Y}from"./chunk-CVH3MUVM.js";import{j as w,l as D}from"./chunk-CFQPMR5X.js";import{$a as ue,Ac as X,Db as K,Eb as d,Fb as h,Gb as ge,Gc as Ie,Ib as V,J as k,Jb as G,K as y,Kb as U,Lc as C,Ma as l,Mb as S,Na as u,Nb as q,O as ve,P as z,T as ye,Xb as p,Y as b,Yb as m,Z as W,bb as c,f as I,ga as E,ha as x,lb as r,mb as n,na as Se,nb as g,rb as F,t as Pe,tb as f,ub as j,v as T,vb as $,wb as H,xb as fe,y as A}from"./chunk-FUWWX4DR.js";import{a as _,b as P}from"./chunk-4CLCTAJ7.js";var pe={columns:[{field:"classificationName",header:"CLASSIFICATION",type:"label",exported:!1},{field:"freeProdouctCount",header:"PRODUCT_NO",type:"label",exported:!1},{field:"price",header:"PRODUCT_PRICE",type:"label",exported:!1},{field:"freeProdouctCount",header:"FREE_PRODUCT_NO",type:"label",exported:!1},{field:"paidProduct",header:"PAID_PRODUCT",type:"label",exported:!1},{field:"actions",header:"ACTIONS",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",rowsActions:["EDIT","DELETE"],dataLoading:"server",locale:"FIELDS.",paginator:!0},Ke={columns:[{field:"catalog",header:"catalog",type:"checkbox",exported:!1},{field:"productName",header:"PRODUCTNAME",type:"label",exported:!1},{field:"categoryName",header:"CATEGORY_NAME",type:"label",exported:!1},{field:"brandName",header:"BRAND_NAME",type:"label",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",rowsActions:[],dataLoading:"server",locale:"FIELDS.",paginator:!0},me={columns:[{field:"catalog",header:"catalog",type:"checkbox",exported:!1},{field:"productName",header:"PRODUCTNAME",type:"label",exported:!1},{field:"categoryName",header:"CATEGORY_NAME",type:"label",exported:!1},{field:"brandName",header:"BRAND_NAME",type:"label",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",rowsActions:[],dataLoading:"server",locale:"FIELDS.",paginator:!0};var Gt=(()=>{class i{_router;_route;_product;breadcrumb=[{icon:"pi pi-home",route:"/"},{label:"Products"},{label:"Products Catalog",route:"/products/products-catalog"}];_unsubscribeAll=new I;tableConfig;selectedClassification=null;pageSize=10;pageNumber=1;totalRecords=0;first=0;keyword="";searchControl=new R;constructor(e,t,o){this._router=e,this._route=t,this._product=o}ngOnInit(){this.getAllProductCatalog(),this.onSearch(),this.tableConfig=pe}onActionClicked(e){switch(e.action){case"EDIT":this._router.navigate([`/products/add-product-catalog/${e.data.classificationId}`],{relativeTo:this._route});break;default:break}}getAllProductCatalog(){this._product.getAllProductCatalog(this.pageSize,this.pageNumber,this.keyword).pipe(y(this._unsubscribeAll)).subscribe(e=>{this.tableConfig=P(_({},pe),{rows:e.data.map(t=>P(_({},t),{paidProduct:t.numberOfPrdoucts+" Product  "+t.price+" EGP"}))||[],totalRecords:e.data.rowCount,rowsActions:["EDIT"]})})}onPageChange(e){this.first=e.first||0,this.pageSize=e.rows||10,this.pageNumber=e.page||1,this.getAllProductCatalog()}handleSave(e){}onSearch(){this.searchControl.valueChanges.pipe(T(e=>e.trim().length>=0),A(400),k(e=>this._product.getAllProductCatalog(this.pageSize,this.pageNumber,e.trim()))).subscribe(e=>{e&&e.data&&(this.tableConfig=P(_({},pe),{rows:e.data.map(t=>P(_({},t),{paidProduct:t.numberOfPrdoucts+" Product  "+t.price+" EGP"}))||[],totalRecords:e.data.rowCount,rowsActions:["EDIT"]}))})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(t){return new(t||i)(u(D),u(w),u(B))};static \u0275cmp=b({type:i,selectors:[["admin-products-catalog"]],standalone:!0,features:[S],decls:4,vars:2,consts:[[3,"items"],[3,"actionClicked","onPage","onSearch","config"]],template:function(t,o){t&1&&(g(0,"pos-ui-breadcrumb",0)(1,"br"),r(2,"section")(3,"shared-ui-table",1),f("actionClicked",function(s){return o.onActionClicked(s)})("onPage",function(s){return o.onPageChange(s)})("onSearch",function(s){return o.searchControl.patchValue(s)}),n()()),t&2&&(c("items",o.breadcrumb),l(3),c("config",o.tableConfig))},dependencies:[C,se,O,ae,Ue],encapsulation:2})}return i})();var Xe=(()=>{class i{_http;constructor(e){this._http=e}getAllPaidProduct(e,t,o){return this._http.get(`${Ee.URL_API}Products/paid-product/classification/${e}?PageSize=${o}&PageNumber=${t}`)}static \u0275fac=function(t){return new(t||i)(ye(Me))};static \u0275prov=ve({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ui=(()=>{class i{_fb;_catalog;_route;_unsubscribeAll=new I;pageSize=10;pageNumber=1;classId;items=[{label:"All products"},{label:"Selected"}];activeItem;tableConfig;catalogFormGroup;constructor(e,t,o){this._fb=e,this._catalog=t,this._route=o}ngOnInit(){this.classId=Number(this._route.snapshot.paramMap.get("id")),this.prepareCatalogForm(),this.activateTab(this.items[0])}selectedProducts=[];activateTab(e){this.activeItem=e,e.label=="All products"?(this.tableConfig=Ke,this.getAllPaidProduct()):e.label=="Selected"&&(this.tableConfig=me,this.tableConfig=P(_({},me),{rows:[...this.selectedProducts]}))}onActionClicked(e){let t=e.data;this.selectedProducts.some(a=>a.id===t.id)||this.selectedProducts.push(t),this.activeItem&&this.activeItem.label==="Selected"&&(this.tableConfig=P(_({},me),{rows:[...this.selectedProducts]})),console.log(this.selectedProducts)}prepareCatalogForm(){this.catalogFormGroup=this._fb.group({id:[null],catalogProductCount:[null,he.required],catalogProductCountPrice:[null,he.required]})}getAllPaidProduct(){this._catalog.getAllPaidProduct(this.classId,this.pageNumber,this.pageSize).pipe(y(this._unsubscribeAll)).subscribe(e=>{console.log("response.data.result",e.data.result),this.tableConfig.rows=e.data.result.map(t=>P(_({},t),{brandName:t.brand?.name,categoryName:t.category?.name}))||[],this.tableConfig.totalRecords=e.data.rowCount})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(t){return new(t||i)(u(ie),u(Xe),u(w))};static \u0275cmp=b({type:i,selectors:[["admin-add-edit-product-catalog"]],standalone:!0,features:[S],decls:28,vars:15,consts:[[1,"row"],[1,"col-12"],[1,"flex-box"],[1,"back-action","flex","items-center","gap-2","cursor-pointer"],["src","assets/system/icons/back-arrow.png","alt","back-arrow"],[1,"submit-action","flex-box"],[1,"btn","btn-light"],[1,"btn","btn-primary"],[1,"w-full","card-details","flex-box"],[1,"title"],[1,"flex-box",3,"formGroup"],["mode","decimal","inputId","withoutgrouping","formControlName","catalogProductCountPrice",1,"w-full",3,"useGrouping","placeholder"],["mode","decimal","inputId","withoutgrouping","formControlName","catalogProductCount",1,"w-full",3,"useGrouping","placeholder"],[1,"w-full"],[3,"activeItemChange","model","activeItem"],[3,"actionClicked","config"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g(4,"img",4),r(5,"span"),d(6,"Back"),n()(),r(7,"div",5)(8,"button",6),d(9,"Cancel"),n(),r(10,"button",7),d(11,"Save"),n()()()(),r(12,"div",1)(13,"div",8)(14,"div",9),d(15),p(16,"translate"),n(),r(17,"div",10)(18,"div"),g(19,"p-inputNumber",11),p(20,"translate"),n(),r(21,"div"),g(22,"p-inputNumber",12),p(23,"translate"),n()()()(),r(24,"div",1)(25,"div",13)(26,"p-tabMenu",14),U("activeItemChange",function(s){return G(o.activeItem,s)||(o.activeItem=s),s}),f("activeItemChange",function(s){return o.activateTab(s)}),n(),r(27,"shared-ui-table",15),f("actionClicked",function(s){return o.onActionClicked(s)}),n()()()()),t&2&&(l(15),h(m(16,9,"FIELDS.PAID_PRODUCTS")),l(2),c("formGroup",o.catalogFormGroup),l(2),c("useGrouping",!1)("placeholder",m(20,11,"FIELDS.PRICE")),l(3),c("useGrouping",!1)("placeholder",m(23,13,"FIELDS.NO_PRODUCTS")),l(4),c("model",o.items),V("activeItem",o.activeItem),l(),c("config",o.tableConfig))},dependencies:[C,Ve,je,O,ze,Q,J,oe,N,Z,Oe,We,de,Ne,De,re,ee,te,le,L],styles:[".flex-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px}.back-action[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:20px;color:#999}.submit-action[_ngcontent-%COMP%]{gap:16px}.submit-action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 32px;border-radius:4px;font-weight:500;font-size:16px;line-height:20px;color:#222;border:none;cursor:pointer}.submit-action[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{background:#ececec;color:#222}.submit-action[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#8fc9e9;color:#fff}.card-details[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:8px}.card-details[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:19px;line-height:23px;color:#222}"]})}return i})();var Qe=(()=>{class i{_fb;_product;onFilter=new Se;filterForm;filterData$;constructor(e,t){this._fb=e,this._product=t}ngOnInit(){this.filterForm=this.initializeForm(),this.filterData$=this.getData()}initializeForm(){return this._fb.group({ClassificationId:[""],BrandId:[""],Unit:[""],CategoryId:[""]})}getData(){return Pe({classifications:this._product.getClassifications(),categories:this._product.getCategories(),brands:this._product.getAllBrands(1e5,1)})}onSubmit(){this.onFilter.emit(this.filterForm.value)}onReset(){this.filterForm.reset(),this.onFilter.emit(this.filterForm.value)}static \u0275fac=function(t){return new(t||i)(u(ie),u(B))};static \u0275cmp=b({type:i,selectors:[["admin-product-filter"]],outputs:{onFilter:"onFilter"},standalone:!0,features:[S],decls:13,vars:15,consts:[[1,"p-fluid","p-formgrid","grid",3,"ngSubmit","formGroup"],[1,"col-12","md:col-3"],["optionLabel","name","optionValue","id","placeholder","Select a Classification","formControlName","ClassificationId","filterBy","name",3,"options","filter"],["optionLabel","name","optionValue","id","placeholder","Select a Brand","formControlName","BrandId","filterBy","name",3,"options","filter"],["optionLabel","name","optionValue","id","placeholder","Select a Category","formControlName","CategoryId","filterBy","name",3,"options","filter"],[1,"col-12","md:col-3","flex","justify-content-end","align-items-center"],["type","submit","label","Filter","severity","success",1,"mr-2",3,"outlined"],["label","Reset","severity","warning",3,"click","outlined"]],template:function(t,o){if(t&1&&(r(0,"form",0),f("ngSubmit",function(){return o.onSubmit()}),r(1,"div",1),g(2,"p-dropdown",2),p(3,"async"),n(),r(4,"div",1),g(5,"p-dropdown",3),p(6,"async"),n(),r(7,"div",1),g(8,"p-dropdown",4),p(9,"async"),n(),r(10,"div",5),g(11,"p-button",6),r(12,"p-button",7),f("click",function(){return o.onReset()}),n()()()),t&2){let a,s,_e;c("formGroup",o.filterForm),l(2),c("options",(a=m(3,9,o.filterData$))==null?null:a.classifications)("filter",!0),l(3),c("options",(s=m(6,11,o.filterData$))==null?null:s.brands)("filter",!0),l(3),c("options",(_e=m(9,13,o.filterData$))==null?null:_e.categories)("filter",!0),l(3),c("outlined",!0),l(),c("outlined",!0)}},dependencies:[C,Ie,ae,ke,re,Ae,N,Z,ee,te,L,ne],encapsulation:2,changeDetection:0})}return i})();var Ce={columns:[{field:"name",header:"NAME",type:"link",exported:!1,sortable:!0},{field:"sKU",header:"SKU",type:"label",exported:!0,sortable:!0},{field:"unit",header:"Unit",type:"label",exported:!0,sortable:!0},{field:"barcode",header:"Barcode",type:"label",exported:!0,sortable:!0},{field:"cost",header:"Cost",type:"label",exported:!0,sortable:!0},{field:"price",header:"Price",type:"label",exported:!0,sortable:!0},{field:"actions",header:"Actions",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",actions:["EXPORT","IMPORT","CREATE"],rowsActions:["EDIT","DELETE"],paginator:!0,dataLoading:"server",locale:"FIELDS."};function Ze(i,v){let e=new FileReader;e.onload=t=>{let o=t.target.result;console.log("CSV Data:",o);let a=document.createElement("a"),s=URL.createObjectURL(i);a.href=s,a.download=v,a.click(),URL.revokeObjectURL(s)},e.readAsText(i)}var Hi=(()=>{class i{_router;_route;_confirm;productService;_unsubscribeAll=new I;tableConfig;items;currentPage=1;totalRecords=0;first=0;rows=10;breadcrumb=[{icon:"pi pi-home",route:"/"},{label:"Products Management"},{label:"Product",route:"/product"}];searchControl=new R;constructor(e,t,o,a){this._router=e,this._route=t,this._confirm=o,this.productService=a}ngOnInit(){this.getProducts({pageSize:this.rows,pageNumber:this.currentPage}),this.onSearch()}getProducts(e){this.productService.getProducts(e).pipe(y(this._unsubscribeAll)).subscribe(t=>{if(t&&t.data){let o=t.data.result.map(a=>P(_({},a),{unit:a.unit?a.unit.name:"-",classification:a.classification?a.classification.name:"No Classification"}));this.tableConfig=P(_({},Ce),{rows:o,totalRecords:t.data.rowCount,rowsActions:["EDIT","DELETE"]}),this.totalRecords=t.data.rowCount}})}deleteProduct(e){this.productService.deleteProduct(e).subscribe({next:()=>{this.getProducts({pageSize:this.rows,pageNumber:this.currentPage})}})}onPageChange(e){this.first=e.first||0,this.rows=e.rows||10,this.currentPage=e.page||1,this.getProducts({pageSize:this.rows,pageNumber:this.currentPage})}exportProducts(){this.productService.downloadProdctsAsCsv().subscribe({next:e=>{Ze(e,"products.csv")}})}onActionClicked(e){switch(e.action){case"CREATE":this._router.navigate(["product/id"],{relativeTo:this._route});break;case"DELETE":this._confirm.confirm("delete").subscribe(t=>{t&&e.data?.id&&this.deleteProduct(e.data.id)});break;case"EXPORT":this.exportProducts();break;case"NAVIGATE":this._router.navigate(["products/product-details",e.data?.id]);break;default:break}}onFilter(e){console.log(e),this.getProducts({pageSize:this.rows,pageNumber:this.currentPage,ClassificationId:e.ClassificationId,BrandId:e.BrandId,CategoryId:e.CategoryId})}onSearch(){this.searchControl.valueChanges.pipe(T(e=>e.trim().length>=0),A(400),k(e=>this.productService.getProducts({pageSize:this.rows,pageNumber:this.currentPage,Keyword:e.trim()}))).subscribe(e=>{e&&e.data&&(this.tableConfig=P(_({},Ce),{rows:e.data.result,totalRecords:e.data.rowCount,rowsActions:["EDIT","DELETE"]}),this.totalRecords=e.data.rowCount)})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(t){return new(t||i)(u(D),u(w),u(Ge),u(B))};static \u0275cmp=b({type:i,selectors:[["admin-product"]],standalone:!0,features:[S],decls:10,vars:2,consts:[[3,"items"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mb-4"],[3,"actionClicked","onSearch","onPage","config"],["filters-area","",1,"mt-4"],[3,"onFilter"]],template:function(t,o){t&1&&(g(0,"pos-ui-breadcrumb",0)(1,"br"),r(2,"div",1)(3,"div",2)(4,"div",3)(5,"h4",4),d(6,"Product Management"),n(),r(7,"shared-ui-table",5),f("actionClicked",function(s){return o.onActionClicked(s)})("onSearch",function(s){return o.searchControl.patchValue(s)})("onPage",function(s){return o.onPageChange(s)}),r(8,"div",6)(9,"admin-product-filter",7),f("onFilter",function(s){return o.onFilter(s)}),n()()()()()()),t&2&&(c("items",o.breadcrumb),l(7),c("config",o.tableConfig))},dependencies:[C,O,se,Be,Qe,ce],encapsulation:2})}return i})();var lt=["*"],et=(()=>{class i{iconPosition="left";get containerClass(){return{"p-icon-field-left":this.iconPosition==="left","p-icon-field-right":this.iconPosition==="right"}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["p-iconField"]],inputs:{iconPosition:"iconPosition"},ngContentSelectors:lt,decls:2,vars:1,consts:[[1,"p-icon-field",3,"ngClass"]],template:function(t,o){t&1&&($(),r(0,"span",0),H(1),n()),t&2&&c("ngClass",o.containerClass)},dependencies:[X],styles:[`@layer primeng{.p-icon-field{position:relative}}
`],encapsulation:2,changeDetection:0})}return i})(),tt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=W({type:i});static \u0275inj=z({imports:[C,Y]})}return i})();var st=["*"],it=(()=>{class i{styleClass;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["p-inputIcon"]],inputs:{styleClass:"styleClass"},ngContentSelectors:st,decls:2,vars:1,consts:[[1,"p-input-icon",3,"ngClass"]],template:function(t,o){t&1&&($(),r(0,"span",0),H(1),n()),t&2&&c("ngClass",o.styleClass)},dependencies:[X],styles:[`@layer primeng{.p-fluid .p-icon-field-left,.p-fluid .p-icon-field-right{width:100%}}
`],encapsulation:2,changeDetection:0})}return i})(),ot=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=W({type:i});static \u0275inj=z({imports:[C,Y]})}return i})();var pt=()=>["name"],mt=()=>({"min-width":"30rem"}),ut=()=>[5,10,20];function ft(i,v){if(i&1){let e=F();r(0,"div",18)(1,"p-iconField",19)(2,"p-inputIcon"),g(3,"i",20),n(),r(4,"input",21,2),p(6,"translate"),f("input",function(){E(e);let o=K(5);j();let a=K(7);return x(a.filterGlobal(o.value,"contains"))}),n()()()}i&2&&(l(4),fe("placeholder",m(6,1,"FIELDS.SEARCH")))}function gt(i,v){i&1&&(r(0,"tr")(1,"th"),d(2),p(3,"translate"),n(),r(4,"th"),d(5),p(6,"translate"),n(),r(7,"th"),d(8),p(9,"translate"),n(),r(10,"th"),d(11),p(12,"translate"),n()()),i&2&&(l(2),h(m(3,4,"FIELDS.PRODUCTNAME")),l(3),h(m(6,6,"FIELDS.BARCODE")),l(3),h(m(9,8,"FIELDS.COST")),l(3),h(m(12,10,"FIELDS.PRICE")))}function ht(i,v){if(i&1){let e=F();r(0,"tr")(1,"td",22)(2,"p-checkbox",23),U("ngModelChange",function(o){let a=E(e).$implicit;return G(a.checked,o)||(a.checked=o),x(o)}),n(),r(3,"span"),d(4),n()(),r(5,"td"),d(6),n(),r(7,"td"),d(8),n(),r(9,"td"),d(10),n()()}if(i&2){let e=v.$implicit,t=j();l(2),V("ngModel",e.checked),c("disabled",t.disabledProducts),l(2),ge(" ",e.name," "),l(2),h(e.barCode),l(2),h(e.cost),l(2),h(e.price)}}function bt(i,v){i&1&&(r(0,"tr")(1,"td",24),d(2),p(3,"translate"),n()()),i&2&&(l(2),h(m(3,1,"GENERAL.NODATA")))}function Ct(i,v){if(i&1){let e=F();r(0,"div",18)(1,"p-iconField",19)(2,"p-inputIcon"),g(3,"i",20),n(),r(4,"input",21,3),p(6,"translate"),f("input",function(){E(e);let o=K(5),a=j();return x(a.searchControl.patchValue(o.value))}),n()()()}i&2&&(l(4),fe("placeholder",m(6,1,"FIELDS.SEARCH")))}function _t(i,v){i&1&&(r(0,"tr")(1,"th"),d(2),p(3,"translate"),n(),r(4,"th"),d(5),p(6,"translate"),n()()),i&2&&(l(2),h(m(3,2,"FIELDS.PRODUCTNAME")),l(3),h(m(6,4,"FIELDS.BARCODE")))}function Pt(i,v){if(i&1){let e=F();r(0,"tr")(1,"td",25)(2,"p-checkbox",23),U("ngModelChange",function(o){let a=E(e).$implicit;return G(a.checked,o)||(a.checked=o),x(o)}),n(),r(3,"span"),d(4),n()(),r(5,"td"),d(6),n()()}if(i&2){let e=v.$implicit,t=j();l(2),V("ngModel",e.checked),c("disabled",t.disabledProducts),l(2),ge(" ",e.name," "),l(2),h(e.barCode)}}function vt(i,v){i&1&&(r(0,"tr")(1,"td",26),d(2),p(3,"translate"),n()()),i&2&&(l(2),h(m(3,1,"GENERAL.NODATA")))}var _o=(()=>{class i{_router;toaster;activatedRoute;_merchantProducts;_unsubscribeAll=new I;searchControl=new R;merchantProducts=[];products=[];constructor(e,t,o,a){this._router=e,this.toaster=t,this.activatedRoute=o,this._merchantProducts=a}ngOnInit(){let e=+this.activatedRoute.snapshot.params.id;this.getMerchantProductbyId(e),this.onProductsSearch()}getMerchantProductbyId(e){this._merchantProducts.getMerchantProductById(e).pipe(y(this._unsubscribeAll)).subscribe(t=>this.merchantProducts=t.data||[])}onProductsSearch(){this.searchControl.valueChanges.pipe(T(e=>e.trim().length>0),A(400),k(e=>this._merchantProducts.searchForMerchantProduct(e.trim())),y(this._unsubscribeAll)).subscribe(e=>{this.products=e.data||[]})}save(){let e=[{productId:this.products.find(t=>t.checked).id,merchantProductId:this.merchantProducts.find(t=>t.checked).id}];this._merchantProducts.linkProducts({productsToCatalogs:e}).pipe(y(this._unsubscribeAll)).subscribe(()=>{this.toaster.success("Products linked successfully"),this._back()})}get disabledProducts(){return this.merchantProducts.some(e=>e.checked)&&this.products.some(e=>e.checked)}clear(){this.merchantProducts.forEach(e=>e.checked=!1),this.products.forEach(e=>e.checked=!1)}_back=()=>this._router.navigate(["/products/merchant"]);ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(t){return new(t||i)(u(D),u(we),u(w),u(He))};static \u0275cmp=b({type:i,selectors:[["admin-link-products"]],standalone:!0,features:[S],decls:24,vars:22,consts:[["dt1",""],["dt2",""],["mprodsearch",""],["prodsearch",""],[1,"card",2,"border-radius","0"],[1,"grid"],["icon","pi pi-angle-left",1,"p-button-link",3,"onClick","label","text"],[1,"grid","mt-2"],[1,"col-6"],["styleClass","p-datatable-gridlines",3,"value","globalFilterFields"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["styleClass","p-datatable-gridlines",3,"value","paginator","rows","tableStyle","rowsPerPageOptions"],[1,"flex","gap-2","align-items-center","justify-content-end"],["severity","danger",3,"onClick","label","disabled"],["severity","primary",3,"onClick","label","disabled"],[1,"flex"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text",3,"input","placeholder"],[1,"flex","align-items-center","gap-2"],["binary","true",3,"ngModelChange","ngModel","disabled"],["colspan","4"],[1,"flex","gap-2","align-items-center"],["colspan","2"]],template:function(t,o){if(t&1){let a=F();r(0,"div",4)(1,"div",5)(2,"p-button",6),p(3,"translate"),f("onClick",function(){return E(a),x(o._back())}),n()(),r(4,"div",7)(5,"div",8)(6,"p-table",9,0),ue(8,ft,7,3,"ng-template",10)(9,gt,13,12,"ng-template",11)(10,ht,11,6,"ng-template",12)(11,bt,4,3,"ng-template",13),n()(),r(12,"div",8)(13,"p-table",14,1),ue(15,Ct,7,3,"ng-template",10)(16,_t,7,6,"ng-template",11)(17,Pt,7,4,"ng-template",12)(18,vt,4,3,"ng-template",13),n()()(),r(19,"div",15)(20,"p-button",16),p(21,"translate"),f("onClick",function(){return E(a),x(o.clear())}),n(),r(22,"p-button",17),p(23,"translate"),f("onClick",function(){return E(a),x(o.save())}),n()()()}t&2&&(l(2),c("label",m(3,13,"GENERAL.BACK"))("text",!0),l(4),c("value",o.merchantProducts)("globalFilterFields",q(19,pt)),l(7),c("value",o.products)("paginator",!0)("rows",5)("tableStyle",q(20,mt))("rowsPerPageOptions",q(21,ut)),l(7),c("label",m(21,15,"GENERAL.CLEAR"))("disabled",!o.disabledProducts),l(2),c("label",m(23,17,"GENERAL.SAVE"))("disabled",!o.disabledProducts))},dependencies:[C,oe,N,Te,Le,Re,xe,L,ne,de,$e,ce,tt,et,ot,it,Q,J,le,Fe],encapsulation:2})}return i})();export{ui as AddEditProductCatalogComponent,xt as BrandsComponent,It as CategoriesComponent,St as ClassificationsComponent,_o as LinkProductsComponent,yt as MerchantproductsComponent,Hi as ProductComponent,Gt as ProductsCatalogComponent,Mt as TagsComponent,wt as UnitsComponent,Et as VariantsComponent};
