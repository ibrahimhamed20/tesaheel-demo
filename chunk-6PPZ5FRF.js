import{a as Bi,b as we}from"./chunk-TJQN6HPD.js";import{a as xi,b as de}from"./chunk-AFZ7PIN7.js";import{a as Ie,b as oe}from"./chunk-5PJ2XD53.js";import{a as Ve,b as Re,e as ae,g as yi,k as ne,m as U,n as Li,o as re}from"./chunk-QRYLWIJ3.js";import{c as Be,d as M,f as be}from"./chunk-6K6MKTVO.js";import{m as ie,n as j,q as Fi,r as Di}from"./chunk-2BHT76TF.js";import{b as Y,c as C,e as q,f as W,g as pe,h as Ti,i as xe,k as Z,l as qe,m as ze,n as J,r as K,s as ce,t as z,w as te,x as $}from"./chunk-HPGERUHF.js";import{f as ee,g as X}from"./chunk-VNHB2M7P.js";import{a as F}from"./chunk-QEQCDFPQ.js";import{b as R,c as w,d as B}from"./chunk-TI22M3TN.js";import{i as Ni,n as le}from"./chunk-CVH3MUVM.js";import{$a as E,Ac as Le,Cc as He,Dc as Ee,Eb as m,Fb as b,Gb as _,Gc as ve,Ia as De,Ib as Oe,J as Fe,Jb as je,K as v,Kb as $e,Lb as Ai,Lc as L,Ma as n,Mb as y,Na as u,Nb as A,O as ge,Ob as I,T as Ce,Xb as r,Y as D,Yb as c,Zb as g,bb as p,eb as Si,f as x,ga as k,ha as O,hb as G,j as _e,lb as s,mb as o,n as he,na as Ii,nb as S,ob as ai,pb as ni,rb as H,tb as h,ub as V,v as Ne,y as Te,yb as ye}from"./chunk-FUWWX4DR.js";import{a as N,b as T}from"./chunk-4CLCTAJ7.js";var Xe=(()=>{class t{_http;constructor(e){this._http=e}deleteClassification(e){return this._http.delete(`${F.URL_API}Classifications/${e}`)}addClassification(e){return this._http.post(`${F.URL_API}Classifications`,e)}editClassification(e){return this._http.put(`${F.URL_API}Classifications`,e)}getAllClassifications(e){return this._http.get(`${F.URL_API}Classifications?PageSize=${e.size}&PageNumber=${e.number}`)}getClassificationById(e){return this._http.get(`${F.URL_API}Classifications/${e}`)}uploadGalaryImage(e){let a=new FormData;return a.append("file",e),this._http.post(`${F.URL_API}BlobsStore/file`,a)}getAllMerchantClassification(){return this._http.get(`${F.URL_API}Merchants/Classifications`)}static \u0275fac=function(a){return new(a||t)(Ce(be))};static \u0275prov=ge({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ri={columns:[{field:"id",header:"ID",type:"label",exported:!1},{field:"name",header:"CLASSIFICATION",type:"label",exported:!1},{field:"actions",header:"ACTIONS",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",locale:"FIELDS.",actions:["CREATE"],rowsActions:["EDIT","DELETE"],dataLoading:"client",paginator:!0,globalFilterFields:["name"]};var oi=function(t){return t[t.NoService=0]="NoService",t[t.Maintenance=1]="Maintenance",t[t.Pets=2]="Pets",t}(oi||{});var si=t=>({"ng-dirty ng-invalid":t}),li=t=>({fieldName:t}),pi=()=>({maxLength:50});function Qi(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,li,c(2,1,"FIELDS.SERVICE_TYPE")))," "))}function Yi(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,li,c(2,1,"FIELDS.ENGLISH_NAME")))," "))}function Wi(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,pi))," "))}function Zi(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,li,c(2,1,"FIELDS.ARABIC_NAME")))," "))}function Ji(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,pi))," "))}function Ki(t,f){if(t&1){let e=H();s(0,"div",11),S(1,"img",15),s(2,"img",16),h("click",function(){k(e);let i=V();return O(i.removeFile())}),o()()}if(t&2){let e=V();n(),p("src",e.classification.icon==null?null:e.classification.icon.blobUrI,De)("alt",e.classification.icon==null?null:e.classification.icon.id)}}function et(t,f){if(t&1){let e=H();s(0,"label",17),m(1,"Classification Icon"),o(),s(2,"p-fileUpload",18),h("onSelect",function(i){k(e);let l=V();return O(l.uploadFile(i))}),o()}t&2&&(n(2),p("showUploadButton",!1)("showCancelButton",!1)("maxFileSize",1e6))}function it(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.FIELD_REQUIRED",A(4,pi))," "))}var ci=(()=>{class t{_classifications;_popup;_translate;_toastr;_fb;destroy$=new x;formError;classificationsForm;classification;serviceTypes;constructor(e,a,i,l,d){this._classifications=e,this._popup=a,this._translate=i,this._toastr=l,this._fb=d}ngOnInit(){this.classification=this._popup.getData(),this.serviceTypes=xi.getEnumOptions(oi),this.classificationsForm=this.initForm(),this.formError=new Be.ErrorManagement(this.classificationsForm),this.classification.id&&this.getClassificationDetails()}getClassificationDetails(){this._classifications.getClassificationById(this.classification.id).pipe(v(this.destroy$)).subscribe(e=>{this.classification=e.data,this.classification.id&&this.patchFormData()})}initForm(){return this._fb.group({id:[0],arabicName:["",[C.required,C.maxLength(50)]],englishName:["",[C.required,C.maxLength(50)]],serviceType:[null,[C.required]],icon:this._fb.group({id:0,externalStorageId:"",mimeType:"",has360View:!1,sizeInBytes:0,blobUrI:""})})}patchFormData(){this.classificationsForm.patchValue({id:this.classification.id,arabicName:this.classification.arabicName,englishName:this.classification.englishName,serviceType:this.classification.serviceType,icon:this.classification.icon});let e=this.classificationsForm.get("icon");this.classification.icon&&e.patchValue({id:this.classification.icon.id,externalStorageId:this.classification.icon.externalStorageId,mimeType:this.classification.icon.mimeType,has360View:this.classification.icon.has360View,sizeInBytes:this.classification.icon.sizeInBytes,blobUrI:this.classification.icon.blobUrI})}uploadFile(e){let a=e.files;if(a.length>0){let i=a[0];this.classificationsForm.get("icon").patchValue({id:0,externalStorageId:i.name,mimeType:i.type,sizeInBytes:i.size,has360View:!0,blobUrl:URL.createObjectURL(i)})}}removeFile(){this.classificationsForm.get("icon")?.get("blobUrI")?.setValue(""),this.classification.icon&&(this.classification.icon.blobUrI=void 0)}save(){let e=this.classificationsForm.getRawValue();(e.id?this._classifications.editClassification(e):this._classifications.addClassification(e)).pipe(v(this.destroy$)).subscribe(()=>this.afterSavingDone(e.id?"edit":"add",e))}afterSavingDone(e,a){let i=this._translate.currentLang==="ar"?a?.arabicName:a?.englishName;this._translate.get(e?"GENERAL.ADDED_SUCCESSFULLY":"UPDATED_SUCCESSFULLY",{name:i}).subscribe(l=>this._toastr.success(l)),this._popup.close(!0)}close=()=>this._popup.close();static \u0275fac=function(a){return new(a||t)(u(Xe),u(U),u(R),u(M),u(K))};static \u0275cmp=D({type:t,selectors:[["admin-classification-form"]],standalone:!0,features:[y],decls:35,vars:47,consts:[["autocomplete","off",3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12"],["for","serviceType"],["formControlName","serviceType","optionLabel","label","optionValue","value","filterBy","label",1,"w-full",3,"options","ngClass","filter","showClear","placeholder"],["id","serviceType-error",1,"text-error"],[1,"field","col-12","md:col-6"],["for","englishName"],["pInputText","","type","text","pInputText","","formControlName","englishName",1,"w-full",3,"ngClass","placeholder"],["for","arabicName"],["type","text","pInputText","","formControlName","arabicName",1,"w-full",3,"ngClass","placeholder"],[1,"container-img"],[1,"flex","gap-2","align-items-center","justify-content-end"],["severity","danger",3,"onClick","label"],["severity","primary",3,"onClick","disabled","label"],[3,"src","alt"],["src","assets/layout/images/close-icon.svg","alt","close-icon",1,"close",3,"click"],["for","icon"],["name","icon","id","icon","invalidFileTypeMessageSummary","Invalid Type","invalidFileLimitMessageDetail","Invalid Type","accept","image/*",3,"onSelect","showUploadButton","showCancelButton","maxFileSize"]],template:function(a,i){a&1&&(s(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),m(4),r(5,"translate"),o(),S(6,"p-dropdown",4),r(7,"translate"),E(8,Qi,4,8,"small",5),o(),s(9,"div",6)(10,"label",7),m(11),r(12,"translate"),o(),S(13,"input",8),r(14,"translate"),E(15,Yi,4,8,"small",5)(16,Wi,3,5,"small",5),o(),s(17,"div",6)(18,"label",9),m(19),r(20,"translate"),o(),S(21,"input",10),r(22,"translate"),E(23,Zi,4,8,"small",5)(24,Ji,3,5,"small",5),o(),s(25,"div",2),E(26,Ki,3,2,"div",11)(27,et,3,3)(28,it,3,5,"small",5),o()()(),s(29,"div",12)(30,"p-button",13),r(31,"translate"),h("onClick",function(){return i.close()}),o(),s(32,"p-button",14),r(33,"translate"),r(34,"translate"),h("onClick",function(){return i.save()}),o()()),a&2&&(p("formGroup",i.classificationsForm),n(4),b(c(5,23,"FIELDS.SERVICE_TYPE")),n(2),p("options",i.serviceTypes)("ngClass",I(41,si,i.formError.hasError("serviceType")))("filter",!0)("showClear",!0)("placeholder",c(7,25,"FIELDS.SERVICE_TYPE")),n(2),G(i.formError.hasSpecificError("serviceType","required")?8:-1),n(3),b(c(12,27,"FIELDS.ENGLISH_NAME")),n(2),p("ngClass",I(43,si,i.formError.hasError("englishName")))("placeholder",c(14,29,"FIELDS.ENGLISH_NAME")),n(2),G(i.formError.hasSpecificError("englishName","required")?15:-1),n(),G(i.formError.hasSpecificError("englishName","maxlength")?16:-1),n(3),b(c(20,31,"FIELDS.ARABIC_NAME")),n(2),p("ngClass",I(45,si,i.formError.hasError("arabicName")))("placeholder",c(22,33,"FIELDS.ARABIC_NAME")),n(2),G(i.formError.hasSpecificError("arabicName","required")?23:-1),n(),G(i.formError.hasSpecificError("arabicName","maxlength")?24:-1),n(2),G(i.classification.icon!=null&&i.classification.icon.blobUrI?26:27),n(2),G(i.formError.hasSpecificError("icon","required")?28:-1),n(2),p("label",c(31,35,"GENERAL.CANCEL")),n(2),p("disabled",i.classificationsForm.invalid)("label",i.classification.id?c(33,37,"GENERAL.UPDATE"):c(34,39,"GENERAL.SAVE")))},dependencies:[L,Le,z,xe,Y,q,W,Z,J,j,ie,$,te,Re,Ve,ee,X,B,w],styles:[".container-img[_ngcontent-%COMP%]{width:160px;height:124px;border:2px solid #ff7f3e;border-radius:8px;overflow:hidden;position:relative}.container-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.container-img[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:4px;inset-inline-end:4px;cursor:pointer;height:20px;width:20px;background:#ff7f3e;padding:5px;border-radius:50%}"]})}return t})();var Oa=(()=>{class t{_classifications;_confirm;_translate;_popup;_toast;destroy$=new x;tableConfig$;filters={number:1,size:10};constructor(e,a,i,l,d){this._classifications=e,this._confirm=a,this._translate=i,this._popup=l,this._toast=d}ngOnInit(){this.getAllClassifications(this.filters)}onActionClicked(e){switch(e.action){case"CREATE":this.createClassification();break;case"EDIT":this.editClassification(e.data);break;case"DELETE":this.deleteClassification(e.data);break}}getAllClassifications(e){this.tableConfig$=this._classifications.getAllClassifications(e).pipe(he(a=>T(N({},Ri),{rows:a.data?.classifications,totalRecords:a.data.rowCount})))}createClassification(){this._popup.open(ci,{title:this._translate.instant("CLASSIFICATIONS.ADD_NEW_CLASSIFICATION"),position:this._translate.currentLang==="ar"?"left":"right"}).afterClosed.subscribe(e=>e&&this.getAllClassifications(this.filters))}editClassification(e){this._popup.open(ci,{title:this._translate.instant("CLASSIFICATIONS.EDIT_CLASSIFICATION"),position:this._translate.currentLang==="ar"?"left":"right",data:e}).afterClosed.subscribe(a=>a&&this.getAllClassifications(this.filters))}deleteClassification(e){e.id&&this._confirm.confirm("delete").subscribe(a=>{a&&this._classifications.deleteClassification(e.id).pipe(v(this.destroy$)).subscribe(()=>{this._toast.success(this._translate.instant("CLASSIFICATIONS.DELETE_CLASSIFICATION_SUCCESS")),this.getAllClassifications(this.filters)})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(a){return new(a||t)(u(Xe),u(ne),u(R),u(U),u(M))};static \u0275cmp=D({type:t,selectors:[["admin-classifications"]],standalone:!0,features:[y],decls:2,vars:3,consts:[[3,"actionClicked","config"]],template:function(a,i){a&1&&(s(0,"shared-ui-table",0),r(1,"async"),h("actionClicked",function(d){return i.onActionClicked(d)}),o()),a&2&&p("config",c(1,1,i.tableConfig$))},dependencies:[L,ve,ae,re,B],encapsulation:2})}return t})();var Ye=t=>({fieldName:t}),ui=()=>({maxLength:50});function tt(t,f){t&1&&(s(0,"div",17),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Ye,c(2,1,"FIELDS.CLASSIFICATION")))," "))}function at(t,f){t&1&&(s(0,"div",17),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Ye,c(2,1,"FIELDS.BAR_CODE_NO")))," "))}function nt(t,f){t&1&&(s(0,"div",17),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,ui))," "))}function rt(t,f){t&1&&(s(0,"div",17),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Ye,c(2,1,"FIELDS.SHORT_ARABIC_NAME")))," "))}function ot(t,f){t&1&&(s(0,"div",17),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,ui))," "))}function st(t,f){t&1&&(s(0,"div",17),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Ye,c(2,1,"FIELDS.ENGLISH_NAME")))," "))}function lt(t,f){t&1&&(s(0,"div",17),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,ui))," "))}function pt(t,f){if(t&1){let e=H();ai(0),s(1,"p-fileUpload",18),r(2,"translate"),h("onSelect",function(i){k(e);let l=V();return O(l.onFileSelect(i))}),o(),ni()}t&2&&(n(),p("chooseLabel",c(2,1,"GENERAL.CHOOSE")))}function ct(t,f){if(t&1){let e=H();ai(0),s(1,"div",19),S(2,"img",20),s(3,"img",21),h("click",function(){k(e);let i=V();return O(i.removeImage())}),o()(),ni()}if(t&2){let e=V();n(2),p("src",e.data==null||e.data.response==null||e.data.response.icon==null?null:e.data.response.icon.blobUrI,De)("alt",e.data==null||e.data.response==null||e.data.response.icon==null?null:e.data.response.icon.id)}}var fi=(()=>{class t{_fb;_popup;_translate;_toastr;_product;destroy$=new x;classifications=[];data;dialogForm;constructor(e,a,i,l,d){this._fb=e,this._popup=a,this._translate=i,this._toastr=l,this._product=d}ngOnInit(){this.prepareForm(),this.data=this._popup.getData(),this.classifications=this.data?.classifications,console.log("data?.response",this.data?.response),this.data?.response&&(this.dialogForm.patchValue(this.data?.response),this.setPreSelectedValues())}prepareForm(){this.dialogForm=this._fb.group({arabicName:[null,[C.required,C.maxLength(50)]],englishName:[null,[C.required,C.maxLength(50)]],classificationsIds:[null],classifications:[null,C.required],barcodeNumber:[null,C.required],icon:this._fb.group({externalStorageId:"",mimeType:"",sizeInBytes:0,blobUrI:""})})}get control(){return this.dialogForm.controls}onClassificationChange(e){let a=e.value.map(i=>i.id);this.dialogForm.get("classificationsIds")?.setValue(a),this.dialogForm.get("classifications")?.setValue(e.value)}setPreSelectedValues(){let e=this.data?.classifications.map(i=>this.classifications.find(l=>l.id===i.id)),a=e?.map(i=>i?.id);this.dialogForm.get("classificationsIds")?.setValue(a),this.dialogForm.patchValue({classifications:e})}save(){let e=this.dialogForm.getRawValue();(this.data?.response?this._product.editCategory(e):this._product.addCategory(e)).pipe(v(this.destroy$)).subscribe(()=>this.afterSavingDone(this.data?.response?"edit":"add",e))}afterSavingDone(e,a){let i=this._translate.currentLang==="ar"?a?.arabicName:a?.englishName;this._translate.get(e=="add"?"GENERAL.ADDED_SUCCESSFULLY":"GENERAL.UPDATED_SUCCESSFULLY",{name:i}).subscribe(l=>this._toastr.success(l)),this._popup.close(!0)}removeImage(){this.data&&this.data.icon&&(this.data.icon.blobUrI=void 0)}onFileSelect(e){if(e.files&&e.files[0]){let a=e.files[0];this.uploadImage(a).subscribe(i=>{this.updateFormWithResponse(i.data)},i=>{console.error("Error during image upload:",i)})}}uploadImage(e){let a=new FormData;return a.append("file",e),this._product.uploadGalaryImage(a)}updateFormWithResponse(e){this.dialogForm.get("icon")?.setValue({externalStorageId:e.externalStorageId,mimeType:e.mimeType,sizeInBytes:e.sizeInBytes,blobUrI:e.blobUrI})}close=()=>this._popup.close();static \u0275fac=function(a){return new(a||t)(u(K),u(U),u(R),u(M),u(de))};static \u0275cmp=D({type:t,selectors:[["admin-add-edit-category"]],standalone:!0,features:[Ai([Ni]),y],decls:43,vars:45,consts:[[1,"form-content",3,"formGroup"],[1,"row"],[1,"col-6"],["for","classification",1,"mb-2","block"],["formControlName","classifications","optionLabel","name",3,"onChange","options","placeholder"],["class","error-message",4,"ngIf"],["for","barcodeNumber",1,"mb-2","block"],["mode","decimal","inputId","withoutgrouping","formControlName","barcodeNumber",1,"w-full",3,"useGrouping","placeholder"],["for","arabicName",1,"mb-2","block"],["type","text","pInputText","","formControlName","arabicName",1,"w-full",3,"placeholder"],["for","englishName",1,"mb-2","block"],["type","text","pInputText","","formControlName","englishName",1,"w-full",3,"placeholder"],[1,"col-12"],[4,"ngIf"],[1,"flex","gap-2","align-items-center","justify-content-end"],["severity","danger",3,"onClick","label"],["severity","primary",3,"onClick","label","disabled"],[1,"error-message"],["mode","basic","chooseIcon","pi pi-upload","name","demo[]","accept","image/*","maxFileSize","1000000",3,"onSelect","chooseLabel"],[1,"container-img"],[3,"src","alt"],["src","assets/layout/images/close-icon.svg","alt","close-icon",1,"close",3,"click"]],template:function(a,i){a&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),m(4),r(5,"translate"),o(),s(6,"p-multiSelect",4),r(7,"translate"),h("onChange",function(d){return i.onClassificationChange(d)}),o(),E(8,tt,4,8,"div",5),o(),s(9,"div",2)(10,"label",6),m(11),r(12,"translate"),o(),S(13,"p-inputNumber",7),r(14,"translate"),E(15,at,4,8,"div",5)(16,nt,3,5,"div",5),o(),s(17,"div",2)(18,"label",8),m(19),r(20,"translate"),o(),S(21,"input",9),r(22,"translate"),E(23,rt,4,8,"div",5)(24,ot,3,5,"div",5),o(),s(25,"div",2)(26,"label",10),m(27),r(28,"translate"),o(),S(29,"input",11),r(30,"translate"),E(31,st,4,8,"div",5)(32,lt,3,5,"div",5),o(),s(33,"div",12),E(34,pt,3,3,"ng-container",13)(35,ct,4,2,"ng-container",13),o(),s(36,"div",12)(37,"div",14)(38,"p-button",15),r(39,"translate"),h("onClick",function(){return i.close()}),o(),s(40,"p-button",16),r(41,"translate"),r(42,"translate"),h("onClick",function(){return i.save()}),o()()()()()),a&2&&(p("formGroup",i.dialogForm),n(4),b(c(5,23,"FIELDS.CLASSIFICATION")),n(2),p("options",i.classifications)("placeholder",c(7,25,"FIELDS.CLASSIFICATION")),n(2),p("ngIf",i.control.classifications.touched&&(i.control.classifications.errors==null?null:i.control.classifications.errors.required)),n(3),b(c(12,27,"FIELDS.BAR_CODE_NO")),n(2),p("useGrouping",!1)("placeholder",c(14,29,"FIELDS.BAR_CODE_NO")),n(2),p("ngIf",i.control.barcodeNumber.touched&&(i.control.barcodeNumber.errors==null?null:i.control.barcodeNumber.errors.required)),n(),p("ngIf",i.control.barcodeNumber.touched&&(i.control.barcodeNumber.errors==null?null:i.control.barcodeNumber.errors.maxlength)),n(3),b(c(20,31,"FIELDS.SHORT_ARABIC_NAME")),n(2),p("placeholder",c(22,33,"FIELDS.SHORT_ARABIC_NAME")),n(2),p("ngIf",i.control.arabicName.touched&&(i.control.arabicName.errors==null?null:i.control.arabicName.errors.required)),n(),p("ngIf",i.control.arabicName.touched&&(i.control.arabicName.errors==null?null:i.control.arabicName.errors.maxlength)),n(3),b(c(28,35,"FIELDS.ENGLISH_NAME")),n(2),p("placeholder",c(30,37,"FIELDS.ENGLISH_NAME")),n(2),p("ngIf",i.control.englishName.touched&&(i.control.englishName.errors==null?null:i.control.englishName.errors.required)),n(),p("ngIf",i.control.englishName.touched&&(i.control.englishName.errors==null?null:i.control.englishName.errors.maxlength)),n(2),p("ngIf",!(!(i.data==null||i.data.response==null||i.data.response.icon==null)&&i.data.response.icon.blobUrI)),n(),p("ngIf",i.data==null||i.data.response==null||i.data.response.icon==null?null:i.data.response.icon.blobUrI),n(3),p("label",c(39,39,"GENERAL.CANCEL")),n(2),p("label",i.data!=null&&i.data.response?c(41,41,"GENERAL.UPDATE"):c(42,43,"GENERAL.SAVE"))("disabled",i.dialogForm.invalid))},dependencies:[L,Ee,ce,Y,q,W,Re,Ve,ee,oe,Ie,B,w,we,Di,Fi,z,Z,J,$,te,X],styles:[".container-img[_ngcontent-%COMP%]{width:160px;height:124px;border:2px solid #ff7f3e;border-radius:8px;overflow:hidden;position:relative}.container-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.container-img[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:4px;inset-inline-end:4px;cursor:pointer;height:20px;width:20px;background:#ff7f3e;padding:5px;border-radius:50%}"]})}return t})();var We={columns:[{field:"name",header:"CATEGORY_NAME",type:"label",exported:!1},{field:"subCategories",header:"SUB_CATAGORY",type:"label",exported:!0},{field:"classification",header:"CLASSIFICATION",type:"label",exported:!0},{field:"actions",header:"ACTIONS",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",actions:["CREATE"],rowsActions:["EDIT","DELETE"],paginator:!0,locale:"FIELDS.",dataLoading:"server"};function dt(t,f){if(t&1&&(s(0,"div",7)(1,"div"),m(2),o()()),t&2){let e=f.$implicit;n(2),b(e.name)}}var Tn=(()=>{class t{_confirm;_product;_popup;_translate;_unsubscribeAll=new x;classifications=[];tableConfig;displayDialog=!1;selectedClassification=null;pageSize=10;pageNumber=1;totalRecords=0;first=0;keyword="";searchControl=new pe;constructor(e,a,i,l){this._confirm=e,this._product=a,this._popup=i,this._translate=l}ngOnInit(){this.tableConfig=We,this.getAllCategories(),this.getClassifications(),this.onSearch()}getClassifications(){this._product.getClassifications().pipe(v(this._unsubscribeAll)).subscribe(e=>{this.classifications=e?.data?.classifications})}onActionClicked(e){switch(e.action){case"CREATE":this.openCreateDialog();break;case"EDIT":this.getCategoryById(e.data);break;case"DELETE":this.onActionDelete(e.data);break}}onActionDelete(e){this._confirm.confirm("delete").subscribe(a=>{a&&this._product.deleteCategory(e.id).pipe(v(this._unsubscribeAll)).subscribe(i=>{i.data&&this.getAllCategories()})})}onClassificationChange(e){this.selectedClassification=e.value,this.filterCategories()}getAllCategories(){this._product.getAllCategories(this.pageSize,this.pageNumber,this.keyword).pipe(v(this._unsubscribeAll)).subscribe(e=>{this.tableConfig=T(N({},We),{rows:e.data.result.map(a=>T(N({},a),{classification:a?.classification.map(i=>i.name).join(", "),subCategories:a?.subCategories.map(i=>i.name).join(", ")}))||[],totalRecords:e.data.rowCount,rowsActions:["EDIT","DELETE"]})})}filterCategories(){this.selectedClassification?this._product.getAllCategories(this.pageSize,this.pageNumber,this.keyword).pipe(v(this._unsubscribeAll)).subscribe(e=>{let a=e.data.result.filter(i=>Array.isArray(i.classification)?i.classification.some(l=>l.id===this.selectedClassification?.id):i.classification?.id===this.selectedClassification?.id);this.tableConfig.rows=a.map(i=>T(N({},i),{classification:Array.isArray(i.classification)?i.classification.map(l=>l.name).join(", "):i.classification?.name,subCategories:i.subCategories.map(l=>l.name).join(", ")}))}):this.getAllCategories()}onPageChange(e){this.first=e.first||0,this.pageSize=e.rows||10,this.pageNumber=e.page||1,this.getAllCategories()}onDialogClose(){this.displayDialog=!1}onSearch(){this.searchControl.valueChanges.pipe(Ne(e=>e.trim().length>=0),Te(400),Fe(e=>this._product.getAllCategories(this.pageSize,this.pageNumber,e.trim()))).subscribe(e=>{e&&e.data&&(this.tableConfig=T(N({},We),{rows:e.data.result.map(a=>T(N({},a),{classification:a.classification.map(i=>i.name).join(", "),subCategories:a.subCategories.map(i=>i.name).join(", ")}))||[],totalRecords:e.data.rowCount,rowsActions:["EDIT","DELETE"]}))})}openCreateDialog(){this._popup.open(fi,{title:this._translate.instant("CATEGORY.ADD_NEW_CATEGORY"),position:this._translate.currentLang==="ar"?"left":"right",data:{classifications:this.classifications}}).afterClosed.subscribe(e=>e&&this.getAllCategories())}getCategoryById(e){this._product.getCategoryById(Number(e.id)).subscribe(a=>{a.data&&this._popup.open(fi,{title:this._translate.instant("CATEGORY.EDIT_NEW_CATEGORY"),position:this._translate.currentLang==="ar"?"left":"right",data:{response:a.data,classifications:this.classifications}}).afterClosed.subscribe(i=>i&&this.getAllCategories())})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(a){return new(a||t)(u(ne),u(de),u(U),u(R))};static \u0275cmp=D({type:t,selectors:[["admin-categories"]],standalone:!0,features:[y],decls:10,vars:7,consts:[[1,"dialog-side"],[3,"actionClicked","onPage","onSearch","config"],["filters-area","",1,"filters","row"],[1,"filters-item","col-2","p-0"],[1,"filters-actions","col-4","p-0"],["formControlName","classification","optionLabel","name","filterBy","name",1,"w-full",3,"onChange","options","filter","showClear","placeholder"],["pTemplate","selectedItem"],[1,"flex","align-items-center","gap-2"]],template:function(a,i){a&1&&(s(0,"section",0)(1,"shared-ui-table",1),h("actionClicked",function(d){return i.onActionClicked(d)})("onPage",function(d){return i.onPageChange(d)})("onSearch",function(d){return i.searchControl.patchValue(d)}),s(2,"div",2)(3,"div",3),m(4,"Filters"),o(),s(5,"div",4),m(6,"` "),s(7,"p-dropdown",5),r(8,"translate"),h("onChange",function(d){return i.onClassificationChange(d)}),E(9,dt,3,1,"ng-template",6),o()()()()()),a&2&&(n(),p("config",i.tableConfig),n(6),p("options",i.classifications)("filter",!0)("showClear",!0)("placeholder",c(8,5,"FIELDS.CLASSIFICATION")))},dependencies:[L,ae,j,ie,le,re,B,w],encapsulation:2})}return t})();var Mi={columns:[{field:"arabicName",header:"VARIANTNAME",type:"label",exported:!1},{field:"variantsValueProp",header:"VARIANTVALUE",type:"label",exported:!1},{field:"classification",header:"CLASSIFICATION",type:"label",exported:!1},{field:"actions",header:"ACTIONS",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",actions:["CREATE"],rowsActions:["EDIT","DELETE","ADD_VARIANT_VALUE"],paginator:!0,locale:"FIELDS.",dataLoading:"server",hasFilters:!0};var Pe=(()=>{class t{_http;constructor(e){this._http=e}getAll(e){return this._http.get(`${F.URL_API}Variants/name`,e)}getById(e){return this._http.get(`${F.URL_API}Variants/${e}/Details`)}update(e){return this._http.put(`${F.URL_API}Variants`,e)}create(e){return this._http.post(`${F.URL_API}Variants`,e)}delete(e){return this._http.delete(`${F.URL_API}Variants/${e}`)}addValues(e){return this._http.post(`${F.URL_API}Variants/variantValues`,e)}static \u0275fac=function(a){return new(a||t)(Ce(be))};static \u0275prov=ge({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ge=t=>({fieldName:t}),Je=()=>({maxLength:50});function mt(t,f){t&1&&(s(0,"div",18),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Ge,c(2,1,"FIELDS.CLASSIFICATION")))," "))}function ut(t,f){t&1&&(s(0,"div",18),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Ge,c(2,1,"FIELDS.ARABIC_NAME")))," "))}function ft(t,f){t&1&&(s(0,"div",18),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,Je))," "))}function ht(t,f){t&1&&(s(0,"div",18),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Ge,c(2,1,"FIELDS.ENGLISH_NAME")))," "))}function _t(t,f){t&1&&(s(0,"div",18),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,Je))," "))}function gt(t,f){t&1&&(s(0,"div",18),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Ge,c(2,1,"FIELDS.ARABIC_NAME")))," "))}function Ct(t,f){t&1&&(s(0,"div",18),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,Je))," "))}function Et(t,f){t&1&&(s(0,"div",18),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Ge,c(2,1,"FIELDS.ENGLISH_NAME")))," "))}function vt(t,f){t&1&&(s(0,"div",18),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,Je))," "))}function bt(t,f){if(t&1){let e=H();s(0,"div",19)(1,"div",6)(2,"div",20)(3,"div",21)(4,"div",8)(5,"label",9),m(6),r(7,"translate"),o(),S(8,"input",22),r(9,"translate"),E(10,gt,4,8,"div",5)(11,Ct,3,5,"div",5),o()(),s(12,"div",23)(13,"div",8)(14,"label",9),m(15),r(16,"translate"),o(),S(17,"input",24),r(18,"translate"),E(19,Et,4,8,"div",5)(20,vt,3,5,"div",5),o()(),s(21,"div",25)(22,"div",15)(23,"p-button",26),h("click",function(){k(e);let i=V();return O(i.addNewVariants())}),o(),s(24,"p-button",27),h("click",function(){let i=k(e).index,l=V();return O(l.removeVariants(i))}),o()()()()()()}if(t&2){let e,a,i,l,d=f.index,P=V();p("formGroupName",d),n(6),b(c(7,13,"FIELDS.ARABIC_NAME")),n(2),ye("id","arabicName",d,""),p("placeholder",c(9,15,"FIELDS.ARABIC_NAME")),n(2),p("ngIf",((e=P.variantValues.at(d).get("arabicName"))==null?null:e.touched)&&((e=P.variantValues.at(d).get("arabicName"))==null?null:e.hasError("required"))),n(),p("ngIf",((a=P.variantValues.at(d).get("arabicName"))==null?null:a.touched)&&((a=P.variantValues.at(d).get("arabicName"))==null?null:a.hasError("maxlength"))),n(4),b(c(16,17,"FIELDS.ENGLISH_NAME")),n(2),ye("id","englishName",d,""),p("placeholder",c(18,19,"FIELDS.ENGLISH_NAME")),n(2),p("ngIf",((i=P.variantValues.at(d).get("englishName"))==null?null:i.touched)&&((i=P.variantValues.at(d).get("englishName"))==null?null:i.hasError("required"))),n(),p("ngIf",((l=P.variantValues.at(d).get("englishName"))==null?null:l.touched)&&((l=P.variantValues.at(d).get("englishName"))==null?null:l.hasError("maxlength")))}}var hi=(()=>{class t{fb;_popup;_varaints;_translate;_toastr;_product;destroy$=new x;addVariantForm;classifications=[];breadcrumb;variantsData;constructor(e,a,i,l,d,P){this.fb=e,this._popup=a,this._varaints=i,this._translate=l,this._toastr=d,this._product=P}ngOnInit(){this.initForm(),this.getClassifications(),this.variantsData=this._popup.getData(),this.variantsData.id&&this.getVariantsDataDetails()}getClassifications(){this._product.getClassifications().pipe(v(this.destroy$)).subscribe(e=>{this.classifications=e.data.classifications})}getVariantsDataDetails(){this._varaints.getById(this.variantsData.id).pipe(v(this.destroy$)).subscribe(e=>{this.variantsData=e.data,this.variantsData.id&&this.setdataInform()})}initForm(){this.addVariantForm=this.fb.group({id:[0],arabicName:["",[C.required,C.maxLength(50)]],englishName:["",[C.required,C.maxLength(50)]],classificationIds:[[],C.required],variantValues:this.fb.array([this.createVariantGroup()])})}setdataInform(){if(this.variantsData){this.addVariantForm.patchValue(this.variantsData),this.variantValues.clear();for(let e=0;e<this.variantsData.variantValues.length;e++)this.variantValues.push(this.fb.group({id:this.variantsData.variantValues[e].id,englishName:this.variantsData.variantValues[e].englishName,arabicName:this.variantsData.variantValues[e].arabicName}))}}onClassificationChange(e){this.addVariantForm.get("classificationId")?.setValue(e.value.id),this.addVariantForm.get("classification")?.setValue(e.value)}get variantValues(){return this.addVariantForm.get("variantValues")}get control(){return this.addVariantForm.controls}createVariantGroup(){return this.fb.group({id:[0],arabicName:["",[C.required,C.maxLength(50)]],englishName:["",[C.required,C.maxLength(50)]]})}addNewVariants(){this.variantValues.push(this.createVariantGroup())}removeVariants(e){e&&this.variantValues.removeAt(e)}save(){let e=this.addVariantForm.getRawValue();(e.id?this._varaints.update(e):this._varaints.create(e)).pipe(v(this.destroy$)).subscribe(()=>this.afterSavingDone(e.id?"edit":"add",e))}afterSavingDone(e,a){let i=this._translate.currentLang==="ar"?a?.arabicName:a?.englishName;this._translate.get(e?"GENERAL.ADDED_SUCCESSFULLY":"UPDATED_SUCCESSFULLY",{name:i}).subscribe(l=>this._toastr.success(l)),this._popup.close(!0)}close=()=>this._popup.close();ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(a){return new(a||t)(u(K),u(U),u(Pe),u(R),u(M),u(de))};static \u0275cmp=D({type:t,selectors:[["admin-add-edit-variants"]],standalone:!0,features:[y],decls:36,vars:37,consts:[[1,"p-fluid","formgrid",3,"formGroup"],[1,"p-grid","mb-1"],[1,"p-col-6"],["for","classificationIds"],["formControlName","classificationIds","optionLabel","name","optionValue","id","filterBy","name",3,"onChange","options","filter","showClear","placeholder"],["class","error-message",4,"ngIf"],[1,"grid"],[1,"field","col-6"],[1,"flex","flex-column","gap-2"],["for","arabicName"],["pInputText","","formControlName","arabicName","id","arabicName","aria-describedby","arabicName-help",3,"placeholder"],["for","englishName"],["pInputText","","formControlName","englishName","id","englishName","aria-describedby","englishName-help",3,"placeholder"],["formArrayName","variantValues"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","gap-2","align-items-center","justify-content-end"],["severity","danger",3,"onClick","label"],["severity","primary",3,"onClick","disabled","label"],[1,"error-message"],[3,"formGroupName"],[1,"flex","align-items-center"],[1,"field","col-5"],["pInputText","","formControlName","arabicName","aria-describedby","arabicName-help",3,"placeholder","id"],[1,"field","md:col-5"],["pInputText","","formControlName","englishName","aria-describedby","englishName-help",3,"placeholder","id"],[1,"field","col-2"],["severity","primary","icon","pi pi-plus",3,"click"],["severity","danger","icon","pi pi-minus",3,"click"]],template:function(a,i){a&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),m(4),r(5,"translate"),o(),s(6,"p-multiSelect",4),r(7,"translate"),h("onChange",function(d){return i.onClassificationChange(d)}),o(),E(8,mt,4,8,"div",5),o()(),s(9,"div",6)(10,"div",7)(11,"div",8)(12,"label",9),m(13),r(14,"translate"),o(),S(15,"input",10),r(16,"translate"),E(17,ut,4,8,"div",5)(18,ft,3,5,"div",5),o()(),s(19,"div",7)(20,"div",8)(21,"label",11),m(22),r(23,"translate"),o(),S(24,"input",12),r(25,"translate"),E(26,ht,4,8,"div",5)(27,_t,3,5,"div",5),o()()(),s(28,"div",13),E(29,bt,25,21,"div",14),o(),s(30,"div",15)(31,"p-button",16),r(32,"translate"),h("onClick",function(){return i.close()}),o(),s(33,"p-button",17),r(34,"translate"),r(35,"translate"),h("onClick",function(){return i.save()}),o()()()),a&2&&(p("formGroup",i.addVariantForm),n(4),b(c(5,19,"FIELDS.CLASSIFICATION")),n(2),p("options",i.classifications)("filter",!0)("showClear",!0)("placeholder",c(7,21,"FIELDS.CLASSIFICATION")),n(2),p("ngIf",i.control.classificationIds.touched&&(i.control.classificationIds.errors==null?null:i.control.classificationIds.errors.required)),n(5),b(c(14,23,"FIELDS.ARABIC_NAME")),n(2),p("placeholder",c(16,25,"FIELDS.ARABIC_NAME")),n(2),p("ngIf",i.control.arabicName.touched&&(i.control.arabicName.errors==null?null:i.control.arabicName.errors.required)),n(),p("ngIf",i.control.arabicName.touched&&(i.control.arabicName.errors==null?null:i.control.arabicName.errors.maxlength)),n(4),b(c(23,27,"FIELDS.ENGLISH_NAME")),n(2),p("placeholder",c(25,29,"FIELDS.ENGLISH_NAME")),n(2),p("ngIf",i.control.englishName.touched&&(i.control.englishName.errors==null?null:i.control.englishName.errors.required)),n(),p("ngIf",i.control.englishName.touched&&(i.control.englishName.errors==null?null:i.control.englishName.errors.maxlength)),n(2),p("ngForOf",i.variantValues.controls),n(2),p("label",c(32,31,"GENERAL.CANCEL")),n(2),p("disabled",i.addVariantForm.invalid)("label",i.variantsData.id?c(34,33,"GENERAL.UPDATE"):c(35,35,"GENERAL.SAVE")))},dependencies:[L,He,Ee,ce,Y,q,W,z,Z,J,qe,ze,$,te,X,ee,B,w,oe,Ie,we]})}return t})();var Pi=t=>({fieldName:t}),Gi=()=>({maxLength:50});function It(t,f){t&1&&(s(0,"div",20),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Pi,c(2,1,"FIELDS.ARABIC_NAME")))," "))}function St(t,f){t&1&&(s(0,"div",20),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,Gi))," "))}function At(t,f){t&1&&(s(0,"div",20),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Pi,c(2,1,"FIELDS.ENGLISH_NAME")))," "))}function Nt(t,f){t&1&&(s(0,"div",20),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,Gi))," "))}function Tt(t,f){if(t&1){let e=H();s(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"label",11),m(6),r(7,"translate"),o(),S(8,"input",12),r(9,"translate"),E(10,It,4,8,"div",13)(11,St,3,5,"div",13),o()(),s(12,"div",14)(13,"div",10)(14,"label",11),m(15),r(16,"translate"),o(),S(17,"input",15),r(18,"translate"),E(19,At,4,8,"div",13)(20,Nt,3,5,"div",13),o()(),s(21,"div",16)(22,"div",17)(23,"p-button",18),h("click",function(){k(e);let i=V();return O(i.addNewVariants())}),o(),s(24,"p-button",19),h("click",function(){let i=k(e).index,l=V();return O(l.removeVariants(i))}),o()()()()()()}if(t&2){let e,a,i,l,d=f.index,P=V();p("formGroupName",d),n(6),b(c(7,13,"FIELDS.ARABIC_NAME")),n(2),ye("id","arabicName",d,""),p("placeholder",c(9,15,"FIELDS.ARABIC_NAME")),n(2),p("ngIf",((e=P.variantValues.at(d).get("arabicName"))==null?null:e.touched)&&((e=P.variantValues.at(d).get("arabicName"))==null?null:e.hasError("required"))),n(),p("ngIf",((a=P.variantValues.at(d).get("arabicName"))==null?null:a.touched)&&((a=P.variantValues.at(d).get("arabicName"))==null?null:a.hasError("maxlength"))),n(4),b(c(16,17,"FIELDS.ENGLISH_NAME")),n(2),ye("id","englishName",d,""),p("placeholder",c(18,19,"FIELDS.ENGLISH_NAME")),n(2),p("ngIf",((i=P.variantValues.at(d).get("englishName"))==null?null:i.touched)&&((i=P.variantValues.at(d).get("englishName"))==null?null:i.hasError("required"))),n(),p("ngIf",((l=P.variantValues.at(d).get("englishName"))==null?null:l.touched)&&((l=P.variantValues.at(d).get("englishName"))==null?null:l.hasError("maxlength")))}}var ki=(()=>{class t{fb;_popup;_variants;_translate;_toastr;addVariantValueForm;destroy$=new x;variantsData;constructor(e,a,i,l,d){this.fb=e,this._popup=a,this._variants=i,this._translate=l,this._toastr=d}ngOnInit(){this.initForm(),this.variantsData=this._popup.getData()}initForm(){this.addVariantValueForm=this.fb.group({id:[0],variantValues:this.fb.array([this.createVariantGroup()])})}addNewVariants(){this.variantValues.push(this.createVariantGroup())}removeVariants(e){e&&this.variantValues.removeAt(e)}get variantValues(){return this.addVariantValueForm.get("variantValues")}createVariantGroup(){return this.fb.group({id:[0],arabicName:["",[C.required,C.maxLength(50)]],englishName:["",[C.required,C.maxLength(50)]]})}get control(){return this.addVariantValueForm.controls}save(){let e=this.addVariantValueForm.getRawValue();e.id=this.variantsData?.id,e.classificationIds&&(e.classificationIds=e.classificationIds.map(a=>a.id?a.id:a)),this._variants.create(e).pipe(v(this.destroy$)).subscribe(()=>this.afterSavingDone(this.variantsData))}afterSavingDone(e){let a=this._translate.currentLang==="ar"?e?.arabicName:e?.englishName;this._translate.get("GENERAL.ADDED_SUCCESSFULLY",{name:a}).subscribe(i=>this._toastr.success(i)),this._popup.close(!0)}close=()=>this._popup.close();ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(a){return new(a||t)(u(K),u(U),u(Pe),u(R),u(M))};static \u0275cmp=D({type:t,selectors:[["admin-add-variants-value"]],standalone:!0,features:[y],decls:8,vars:9,consts:[[1,"p-fluid","formgrid",3,"formGroup"],["formArrayName","variantValues"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","gap-2","align-items-center","justify-content-end"],["severity","danger",3,"onClick","label"],["severity","primary",3,"onClick","disabled","label"],[3,"formGroupName"],[1,"grid"],[1,"flex","align-items-center"],[1,"field","col-5"],[1,"flex","flex-column","gap-2"],["for","arabicName"],["pInputText","","formControlName","arabicName","aria-describedby","arabicName-help",3,"placeholder","id"],["class","error-message",4,"ngIf"],[1,"field","md:col-5"],["pInputText","","type","text","formControlName","englishName",3,"id","placeholder"],[1,"field","col-2"],[1,"flex","gap-2","mt-1","align-items-center","justify-content-end"],["severity","primary","icon","pi pi-plus",3,"click"],["severity","danger","icon","pi pi-minus",3,"click"],[1,"error-message"]],template:function(a,i){a&1&&(s(0,"div",0)(1,"div",1),E(2,Tt,25,21,"div",2),o(),s(3,"div",3)(4,"p-button",4),r(5,"translate"),h("onClick",function(){return i.close()}),o(),s(6,"p-button",5),r(7,"translate"),h("onClick",function(){return i.save()}),o()()()),a&2&&(p("formGroup",i.addVariantValueForm),n(2),p("ngForOf",i.variantValues.controls),n(2),p("label",c(5,5,"GENERAL.CANCEL")),n(2),p("disabled",i.addVariantValueForm.invalid)("label",c(7,7,"GENERAL.SAVE")))},dependencies:[L,He,Ee,ce,Y,q,W,z,Z,J,qe,ze,X,ee,B,w,$,te]})}return t})();var yt=()=>[],Dr=(()=>{class t{_confirm;_product;_variants;_popup;_toastr;_translate;destroy$=new x;classifications$;tableConfig$;searchControl=new pe;filters={PageNumber:1,PageSize:10,name:"",classification:null};constructor(e,a,i,l,d,P){this._confirm=e,this._product=a,this._variants=i,this._popup=l,this._toastr=d,this._translate=P}ngOnInit(){this.getClassifications(),this.getAllVariants(this.filters),this.onSearchData()}getClassifications(){this.classifications$=this._product.getClassifications().pipe(he(e=>e.data.classifications))}onSearchData(){this.searchControl.valueChanges.pipe(Ne(e=>e.trim().length>0),Te(400),Fe(e=>this._variants.getAll(this.filters=T(N({},this.filters),{name:e})))).subscribe(e=>{this.tableConfig$=_e(this.mappedVariants(e))})}onPageChange(e){this.filters=T(N({},this.filters),{PageSize:e.rows||10,PageNumber:e.page||1}),this.getAllVariants(this.filters)}getAllVariants(e){this.tableConfig$=this._variants.getAll(e).pipe(he(a=>this.mappedVariants(a)))}onActionClicked(e){switch(e.action){case"CREATE":this.createVariant();break;case"ADD_VARIANT_VALUE":e.data&&this.createVariantValues(e.data);break;case"DELETE":e.data&&this.deleteVariant(e.data);break;case"EDIT":e.data&&this.editVariant(e.data);break;default:break}}createVariant(){this._popup.open(hi,{title:this._translate.instant("VARIANTS.ADD_NEW_VARIANT"),position:this._translate.currentLang==="ar"?"left":"right"}).afterClosed.subscribe(e=>e&&this.getAllVariants(this.filters))}createVariantValues(e){this._popup.open(ki,{title:this._translate.instant("VARIANTS.ADD_NEW_VARIANT"),position:this._translate.currentLang==="ar"?"left":"right",data:e}).afterClosed.subscribe(a=>a&&this.getAllVariants(this.filters))}editVariant(e){this._popup.open(hi,{title:this._translate.instant("VARIANTS.EDIT_VARIANT"),position:this._translate.currentLang==="ar"?"left":"right",data:e}).afterClosed.subscribe(a=>a&&this.getAllVariants(this.filters))}deleteVariant(e){this._confirm.confirm("delete").subscribe(a=>{a&&this._variants.delete(e.id).pipe(v(this.destroy$)).subscribe(i=>{i.data&&(this._toastr.success("Variant Deleted Successfully"),this.getAllVariants(this.filters))})})}mappedVariants(e){return console.log("API Response:",e),T(N({},Mi),{totalRecords:e.data.rowCount,rowsPerPage:this.filters.PageSize,rows:e.data.result.map(a=>T(N({},a),{classification:a.classificationIds.map(i=>i.name).join(", "),variantsValueProp:a.variantValues.map(i=>i.name).join(", ")}))||[]})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(a){return new(a||t)(u(ne),u(de),u(Pe),u(U),u(M),u(R))};static \u0275cmp=D({type:t,selectors:[["admin-variants"]],standalone:!0,features:[y],decls:9,vars:13,consts:[[3,"actionClicked","onPage","onSearch","config"],["filters-area","",1,"filters","p-grid"],[1,"filters-item","col-2","p-0"],[1,"filters-actions","col-4","p-0"],["optionLabel","name","filterBy","name","placeholder","Select a classifications",1,"w-full",3,"ngModelChange","onChange","options","ngModel","filter","showClear"]],template:function(a,i){a&1&&(s(0,"shared-ui-table",0),r(1,"async"),h("actionClicked",function(d){return i.onActionClicked(d)})("onPage",function(d){return i.onPageChange(d)})("onSearch",function(d){return i.searchControl.patchValue(d)}),s(2,"div",1)(3,"div",2),m(4),r(5,"translate"),o(),s(6,"div",3)(7,"p-dropdown",4),r(8,"async"),$e("ngModelChange",function(d){return je(i.filters.classification,d)||(i.filters.classification=d),d}),h("onChange",function(){return i.getAllVariants(i.filters)}),o()()()()),a&2&&(p("config",c(1,6,i.tableConfig$)),n(4),b(c(5,8,"GENERAL.FILTERS")),n(3),p("options",c(8,10,i.classifications$)||A(12,yt)),Oe("ngModel",i.filters.classification),p("filter",!0)("showClear",!0))},dependencies:[L,ve,j,ie,re,X,ae,B,w,ce,q,Ti,z],encapsulation:2})}return t})();var Ke=(()=>{class t{_http;constructor(e){this._http=e}getClassifications(){return this._http.get(`${F.URL_API}Classifications`)}getBrands(e){return this._http.get(`${F.URL_API}Brands?PageSize=${e.size}&PageNumber=${e.number}`)}addBrand(e){return this._http.post(`${F.URL_API}Brands`,e)}deleteBrand(e){return this._http.delete(`${F.URL_API}Brands/${e}`)}editBrand(e){return this._http.put(`${F.URL_API}Brands`,e)}getBrandById(e){return this._http.get(`${F.URL_API}Brands/${e}`)}static \u0275fac=function(a){return new(a||t)(Ce(be))};static \u0275prov=ge({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ji=t=>({"ng-dirty ng-invalid":t}),_i=t=>({fieldName:t}),$i=()=>({maxLength:50});function Lt(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,_i,c(2,1,"FIELDS.classificationIds")))," "))}function Bt(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,_i,c(2,1,"FIELDS.ENGLISH_NAME")))," "))}function xt(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,$i))," "))}function Vt(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,_i,c(2,1,"FIELDS.ARABIC_NAME")))," "))}function Rt(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,$i))," "))}function wt(t,f){if(t&1){let e=H();s(0,"div",11),S(1,"img",15),s(2,"img",16),h("click",function(){k(e);let i=V();return O(i.removeFile())}),o()()}if(t&2){let e=V();n(),p("src",e.brand.icon==null?null:e.brand.icon.blobUrI,De)("alt",e.brand.icon==null?null:e.brand.icon.id)}}function Mt(t,f){if(t&1){let e=H();s(0,"label",17),m(1,"Brand Icon"),o(),s(2,"p-fileUpload",18),h("onSelect",function(i){k(e);let l=V();return O(l.uploadFile(i))}),o()}t&2&&(n(2),p("showUploadButton",!1)("showCancelButton",!1)("maxFileSize",1e6))}var gi=(()=>{class t{_product;_popup;_translate;_toastr;_fb;destroy$=new x;formError;brandForm;brand;selectedBrands;classifications=[];constructor(e,a,i,l,d){this._product=e,this._popup=a,this._translate=i,this._toastr=l,this._fb=d}ngOnInit(){this.brand=this._popup.getData(),this.brandForm=this.initForm(),this.formError=new Be.ErrorManagement(this.brandForm),this.brand.id&&this.getBrandDetails(),this.getClassifications()}getBrandDetails(){this._product.getBrandById(this.brand.id).pipe(v(this.destroy$)).subscribe({next:e=>{this.brand=e.data,this.selectedBrands||(this.selectedBrands={classificationModels:[],classificationIds:[]}),this.selectedBrands.classificationIds=(this.brand.classificationModels||[]).map(a=>a.id||0),this.brand.id&&this.patchFormData()}})}initForm(){return this._fb.group({id:[0],classificationIds:[[],[C.required]],arabicName:["",[C.required]],englishName:["",[C.required]],serviceType:[null,[C.required]],icon:this._fb.group({id:0,externalStorageId:"",mimeType:"",has360View:!1,sizeInBytes:0,blobUrI:""})})}patchFormData(){this.brandForm.patchValue({id:this.brand.id,classificationIds:this.selectedBrands.classificationIds||[],arabicName:this.brand.arabicName,englishName:this.brand.englishName,icon:this.brand.icon||{}}),console.log("Form Value Inside patchFormData:",this.brandForm.value);let e=this.brandForm.get("icon");this.brand.icon&&e.patchValue({id:this.brand.icon.id,externalStorageId:this.brand.icon.externalStorageId,mimeType:this.brand.icon.mimeType,has360View:this.brand.icon.has360View,sizeInBytes:this.brand.icon.sizeInBytes,blobUrI:this.brand.icon.blobUrI})}uploadFile(e){let a=e.files;if(a.length>0){let i=a[0];this.brandForm.get("icon").patchValue({id:0,externalStorageId:i.name,mimeType:i.type,sizeInBytes:i.size,has360View:!0,blobUrl:URL.createObjectURL(i)})}}removeFile(){this.brandForm.get("icon")?.get("blobUrI")?.setValue(""),this.brand.icon&&(this.brand.icon.blobUrI=void 0)}save(){let e=this.brandForm.getRawValue();(e.id?this._product.editBrand(e):this._product.addBrand(e)).pipe(v(this.destroy$)).subscribe(()=>this.afterSavingDone(e.id?"edit":"add",e))}afterSavingDone(e,a){let i=this._translate.currentLang==="ar"?a?.arabicName:a?.englishName;this._translate.get(e?"GENERAL.ADDED_SUCCESSFULLY":"UPDATED_SUCCESSFULLY",{name:i}).subscribe(l=>this._toastr.success(l)),this._popup.close(!0)}close=()=>this._popup.close();onClassificationChange(e){this.brandForm.get("classificationId")?.setValue(e.value.id),this.brandForm.get("classification")?.setValue(e.value)}getClassifications(){this._product.getClassifications().pipe(v(this.destroy$)).subscribe({next:e=>{this.classifications=e.data.classifications}})}static \u0275fac=function(a){return new(a||t)(u(Ke),u(U),u(R),u(M),u(K))};static \u0275cmp=D({type:t,selectors:[["admin-brands-form"]],standalone:!0,features:[y],decls:34,vars:42,consts:[["autocomplete","off",3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12"],["for","classificationIds"],["formControlName","classificationIds","optionLabel","name","optionValue","id","filterBy","name",3,"onChange","options","filter","showClear","placeholder"],["id","serviceType-error",1,"text-error"],[1,"field","col-12","md:col-6"],["for","englishName"],["pInputText","","type","text","pInputText","","formControlName","englishName",1,"w-full",3,"ngClass","placeholder"],["for","arabicName"],["type","text","pInputText","","formControlName","arabicName",1,"w-full",3,"ngClass","placeholder"],[1,"container-img"],[1,"flex","gap-2","align-items-center","justify-content-end"],["severity","danger",3,"onClick","label"],["severity","primary",3,"onClick","label"],[3,"src","alt"],["src","assets/layout/images/close-icon.svg","alt","close-icon",1,"close",3,"click"],["for","icon"],["name","icon","id","icon","accept","image/*",3,"onSelect","showUploadButton","showCancelButton","maxFileSize"]],template:function(a,i){a&1&&(s(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),m(4),r(5,"translate"),o(),s(6,"p-multiSelect",4),r(7,"translate"),h("onChange",function(d){return i.onClassificationChange(d)}),o(),E(8,Lt,4,8,"small",5),o(),s(9,"div",6)(10,"label",7),m(11),r(12,"translate"),o(),S(13,"input",8),r(14,"translate"),E(15,Bt,4,8,"small",5)(16,xt,3,5,"small",5),o(),s(17,"div",6)(18,"label",9),m(19),r(20,"translate"),o(),S(21,"input",10),r(22,"translate"),E(23,Vt,4,8,"small",5)(24,Rt,3,5,"small",5),o(),s(25,"div",2),E(26,wt,3,2,"div",11)(27,Mt,3,3),o()()(),s(28,"div",12)(29,"p-button",13),r(30,"translate"),h("onClick",function(){return i.close()}),o(),s(31,"p-button",14),r(32,"translate"),r(33,"translate"),h("onClick",function(){return i.save()}),o()()),a&2&&(p("formGroup",i.brandForm),n(4),b(c(5,20,"FIELDS.CLASSIFICATIONS")),n(2),p("options",i.classifications)("filter",!0)("showClear",!0)("placeholder",c(7,22,"FIELDS.CLASSIFICATIONS")),n(2),G(i.formError.hasSpecificError("classificationIds","required")?8:-1),n(3),b(c(12,24,"FIELDS.ENGLISH_NAME")),n(2),p("ngClass",I(38,ji,i.formError.hasError("englishName")))("placeholder",c(14,26,"FIELDS.ENGLISH_NAME")),n(2),G(i.formError.hasSpecificError("englishName","required")?15:-1),n(),G(i.formError.hasSpecificError("englishName","maxlength")?16:-1),n(3),b(c(20,28,"FIELDS.ARABIC_NAME")),n(2),p("ngClass",I(40,ji,i.formError.hasError("arabicName")))("placeholder",c(22,30,"FIELDS.ARABIC_NAME")),n(2),G(i.formError.hasSpecificError("arabicName","required")?23:-1),n(),G(i.formError.hasSpecificError("arabicName","maxlength")?24:-1),n(2),G(i.brand.icon!=null&&i.brand.icon.blobUrI?26:27),n(3),p("label",c(30,32,"GENERAL.CANCEL")),n(2),p("label",i.brand.id?c(32,34,"GENERAL.UPDATE"):c(33,36,"GENERAL.SAVE")))},dependencies:[L,Le,z,xe,Y,q,W,Z,J,j,$,te,oe,Ie,X,ee,B,w,Re,Ve]})}return t})();var Ci={columns:[{field:"name",header:"BRANDNAME",type:"label",exported:!1},{field:"classifications",header:"CLASSIFICATION",type:"label",exported:!0},{field:"actions",header:"ACTIONS",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",locale:"FIELDS.",actions:["CREATE"],rowsActions:["EDIT","DELETE"],dataLoading:"server",paginator:!0,globalFilterFields:["name"],hasFilters:!0};function Ut(t,f){if(t&1&&(s(0,"div",6)(1,"div"),m(2),o()()),t&2){let e=f.$implicit;n(2),b(e.name)}}var _o=(()=>{class t{_brands;_confirm;_translate;_popup;_toast;destroy$=new x;tableConfig$;filters={number:1,size:10};searchControl=new pe;classifications=[];currentPage=1;totalRecords=0;first=0;pageSize=10;rows=10;selectedClassification=null;constructor(e,a,i,l,d){this._brands=e,this._confirm=a,this._translate=i,this._popup=l,this._toast=d}ngOnInit(){this.getAllBrand(this.filters),this.getClassifications()}getAllBrand(e){this._brands.getBrands(e).pipe(he(a=>T(N({},Ci),{rows:a.data?.result.map(i=>T(N({},i),{classifications:(i.classifications||[]).map(l=>l.name)}))||[],totalRecords:a.data?.rowCount}))).subscribe({next:a=>{this.tableConfig$=_e(a)}})}onActionClicked(e){switch(e.action){case"CREATE":this.createBrand();break;case"EDIT":this.editBrand(e.data);break;case"DELETE":this.deleteBrand(e.data);break}}createBrand(){this._popup.open(gi,{title:this._translate.instant("BRANDS.ADD_NEW_BRAND"),position:this._translate.currentLang==="ar"?"left":"right"}).afterClosed.subscribe(e=>e&&this.getAllBrand(this.filters))}editBrand(e){this._popup.open(gi,{title:this._translate.instant("BRANDS.EDIT_BRAND"),position:this._translate.currentLang==="ar"?"left":"right",data:e}).afterClosed.subscribe(a=>a&&this.getAllBrand(this.filters))}deleteBrand(e){e.id&&this._confirm.confirm("delete").subscribe(a=>{a&&this._brands.deleteBrand(e.id).pipe(v(this.destroy$)).subscribe(()=>{this._toast.success(this._translate.instant("BRANDS.DELETE_BRAND_SUCCESS")),this.getAllBrand(this.filters)})})}getClassifications(){this._brands.getClassifications().pipe(v(this.destroy$)).subscribe(e=>{this.classifications=e.data.classifications})}onClassificationChange(e){this.selectedClassification=e.value,this.filterWithClassifications()}filterWithClassifications(){this.selectedClassification?this._brands.getBrands({size:this.rows,number:this.currentPage}).pipe(v(this.destroy$)).subscribe({next:e=>{let a=e.data.result.filter(i=>i.classifications.some(l=>l.id===this.selectedClassification?.id));this.tableConfig$=_e(T(N({},Ci),{rows:a.map(i=>T(N({},i),{classifications:(i.classifications||[]).map(l=>l.name).join(", ")}))||[],totalRecords:a.length}))}}):this.getAllBrand({size:this.rows,number:this.currentPage})}onPageChange(e){this.first=e.first||0,this.rows=e.rows||10,this.currentPage=e.page||1,console.log("PageSize:",this.rows,"PageNumber:",this.currentPage),this.getAllBrand({size:this.rows,number:this.currentPage})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(a){return new(a||t)(u(Ke),u(ne),u(R),u(U),u(M))};static \u0275cmp=D({type:t,selectors:[["admin-brands"]],standalone:!0,features:[y],decls:9,vars:9,consts:[[3,"actionClicked","onSearch","onPage","config"],["filters-area","",1,"filters","p-grid"],[1,"filters-item","col-2","p-0"],[1,"filters-actions","col-4","p-0"],["formControlName","classification","optionLabel","name","filterBy","name","placeholder","Select a classifications",1,"w-full",3,"onChange","options","filter","showClear"],["pTemplate","selectedItem"],[1,"flex","align-items-center","gap-2"]],template:function(a,i){a&1&&(s(0,"shared-ui-table",0),r(1,"async"),h("actionClicked",function(d){return i.onActionClicked(d)})("onSearch",function(d){return i.searchControl.patchValue(d)})("onPage",function(d){return i.onPageChange(d)}),s(2,"div",1)(3,"div",2),m(4),r(5,"translate"),o(),s(6,"div",3)(7,"p-dropdown",4),h("onChange",function(d){return i.onClassificationChange(d)}),E(8,Ut,3,1,"ng-template",5),o()()()()),a&2&&(p("config",c(1,5,i.tableConfig$)),n(4),b(c(5,7,"GENERAL.FILTERS")),n(3),p("options",i.classifications)("filter",!0)("showClear",!0))},dependencies:[L,ve,ae,$,j,ie,le,oe,re,B,w],encapsulation:2})}return t})();var ke=t=>({fieldName:t}),ei=()=>({maxLength:50});function Pt(t,f){if(t&1&&(s(0,"div",11)(1,"div"),m(2),o()()),t&2){let e=f.$implicit;n(2),b(e.name)}}function Gt(t,f){t&1&&(s(0,"div",16),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,ke,c(2,1,"FIELDS.CLASSIFICATION")))," "))}function kt(t,f){t&1&&(s(0,"div",16),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,ke,c(2,1,"FIELDS.SHORT_ARABIC_NAME")))," "))}function Ot(t,f){t&1&&(s(0,"div",16),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,ei))," "))}function jt(t,f){t&1&&(s(0,"div",16),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,ke,c(2,1,"FIELDS.ENGLISH_NAME")))," "))}function $t(t,f){t&1&&(s(0,"div",16),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,ei))," "))}function Ht(t,f){t&1&&(s(0,"div",16),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,ke,c(2,1,"FIELDS.SHORT_ARABIC_NAME")))," "))}function qt(t,f){t&1&&(s(0,"div",16),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,ei))," "))}function zt(t,f){t&1&&(s(0,"div",16),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,ke,c(2,1,"FIELDS.SHORT_ENGLISH_NAME")))," "))}function Xt(t,f){t&1&&(s(0,"div",16),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,ei))," "))}var Hi=(()=>{class t{_fb;classifications=[];unitData;addUnitForm;save=new Ii;constructor(e){this._fb=e}ngOnInit(){if(this.prepareForm(),this.unitData&&(this.addUnitForm.patchValue(this.unitData),this.unitData.classificationId)){let e=Number(this.unitData.classificationId),a=this.classifications.find(i=>i.id===e);a&&this.addUnitForm.get("classification")?.setValue(a)}}prepareForm(){this.addUnitForm=this._fb.group({childId:[],arabicName:[null,[C.required,C.maxLength(50)]],englishName:[null,[C.required,C.maxLength(50)]],classificationId:[null,C.required],classification:[null,C.required],shortArabicName:[null,[C.required,C.maxLength(50)]],shortEnglishName:[null,[C.required,C.maxLength(50)]],isDecimal:[!0]})}get control(){return this.addUnitForm.controls}onClassificationChange(e){this.addUnitForm.get("classificationId")?.setValue(e.value.id),this.addUnitForm.get("classification")?.setValue(e.value)}onSave(){this.addUnitForm.valid?this.save.emit(this.addUnitForm.value):this.addUnitForm.markAllAsTouched()}static \u0275fac=function(a){return new(a||t)(u(K))};static \u0275cmp=D({type:t,selectors:[["admin-add-edit-units"]],inputs:{classifications:"classifications",unitData:"unitData"},outputs:{save:"save"},standalone:!0,features:[y],decls:37,vars:37,consts:[[1,"form-content",3,"formGroup"],[1,"row"],[1,"col-12"],["formControlName","classification","optionLabel","name","filterBy","name",3,"onChange","options","filter","showClear","placeholder"],["pTemplate","selectedItem"],["class","error-message",4,"ngIf"],[1,"col-6"],["type","text","pInputText","","formControlName","arabicName",1,"w-full",3,"placeholder"],["type","text","pInputText","","formControlName","englishName",1,"w-full",3,"placeholder"],["type","text","pInputText","","formControlName","shortArabicName",1,"w-full",3,"placeholder"],["type","text","pInputText","","formControlName","shortEnglishName",1,"w-full",3,"placeholder"],[1,"flex","align-items-center","gap-2"],["formControlName","isDecimal","inputId","binary",3,"binary"],["for","ny"],[1,"col-3"],[1,"p-element","btn-tasheel","btn-primary","w-full",3,"onClick","label"],[1,"error-message"]],template:function(a,i){a&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-dropdown",3),r(4,"translate"),h("onChange",function(d){return i.onClassificationChange(d)}),E(5,Pt,3,1,"ng-template",4),o(),E(6,Gt,4,8,"div",5),o(),s(7,"div",6),S(8,"input",7),r(9,"translate"),E(10,kt,4,8,"div",5)(11,Ot,3,5,"div",5),o(),s(12,"div",6),S(13,"input",8),r(14,"translate"),E(15,jt,4,8,"div",5)(16,$t,3,5,"div",5),o(),s(17,"div",6),S(18,"input",9),r(19,"translate"),E(20,Ht,4,8,"div",5)(21,qt,3,5,"div",5),o(),s(22,"div",6),S(23,"input",10),r(24,"translate"),E(25,zt,4,8,"div",5)(26,Xt,3,5,"div",5),o(),s(27,"div",2)(28,"div",11),S(29,"p-checkbox",12),s(30,"label",13),m(31),r(32,"translate"),o()()(),s(33,"div",14)(34,"p-button",15),r(35,"translate"),r(36,"translate"),h("onClick",function(){return i.onSave()}),o()()()()),a&2&&(p("formGroup",i.addUnitForm),n(3),p("options",i.classifications)("filter",!0)("showClear",!0)("placeholder",c(4,21,"FIELDS.CLASSIFICATION")),n(3),p("ngIf",i.control.classification.touched&&(i.control.classification.errors==null?null:i.control.classification.errors.required)),n(2),p("placeholder",c(9,23,"FIELDS.SHORT_ARABIC_NAME")),n(2),p("ngIf",i.control.arabicName.touched&&(i.control.arabicName.errors==null?null:i.control.arabicName.errors.required)),n(),p("ngIf",i.control.arabicName.touched&&(i.control.arabicName.errors==null?null:i.control.arabicName.errors.maxlength)),n(2),p("placeholder",c(14,25,"FIELDS.ENGLISH_NAME")),n(2),p("ngIf",i.control.englishName.touched&&(i.control.englishName.errors==null?null:i.control.englishName.errors.required)),n(),p("ngIf",i.control.englishName.touched&&(i.control.englishName.errors==null?null:i.control.englishName.errors.maxlength)),n(2),p("placeholder",c(19,27,"FIELDS.SHORT_ARABIC_NAME")),n(2),p("ngIf",i.control.shortArabicName.touched&&(i.control.shortArabicName.errors==null?null:i.control.shortArabicName.errors.required)),n(),p("ngIf",i.control.shortArabicName.touched&&(i.control.shortArabicName.errors==null?null:i.control.shortArabicName.errors.maxlength)),n(2),p("placeholder",c(24,29,"FIELDS.SHORT_ENGLISH_NAME")),n(2),p("ngIf",i.control.shortEnglishName.touched&&(i.control.shortEnglishName.errors==null?null:i.control.shortEnglishName.errors.required)),n(),p("ngIf",i.control.shortEnglishName.touched&&(i.control.shortEnglishName.errors==null?null:i.control.shortEnglishName.errors.maxlength)),n(3),p("binary",!0),n(2),b(c(32,31,"FIELDS.ALLOW_DECIMAL")),n(3),p("label",i.unitData?c(35,33,"GENERAL.UPDATE"):c(36,35,"GENERAL.SAVE")))},dependencies:[L,Ee,ce,Y,q,W,j,ie,le,B,w,we,Bi,z,Z,J,$,te,X,ee]})}return t})();var ii={columns:[{field:"name",header:"UNIT_NAME",type:"label",exported:!1},{field:"shortName",header:"SHORT_NAME",type:"label",exported:!1},{field:"classification",header:"CLASSIFICATION",type:"label",exported:!1},{field:"actions",header:"ACTIONS",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",locale:"FIELDS.",actions:["CREATE"],rowsActions:["EDIT","DELETE"],dataLoading:"server",paginator:!0};var Qt=()=>({width:"600px",height:"100vh",top:"0",margin:"0",padding:"0"});function Yt(t,f){if(t&1&&(s(0,"div",11)(1,"div"),m(2),o()()),t&2){let e=f.$implicit;n(2),b(e.name)}}function Wt(t,f){if(t&1){let e=H();s(0,"div",12)(1,"div",13),m(2),r(3,"translate"),o(),s(4,"button",14),h("click",function(){k(e);let i=V();return O(i.displayDialog=!1)}),S(5,"img",15),o()()}t&2&&(n(2),b(c(3,1,"UNITS.ADD_NEW_UNIT")))}function Zt(t,f){if(t&1){let e=H();s(0,"admin-add-edit-units",16),h("save",function(i){k(e);let l=V();return O(l.handleSave(i))}),o()}if(t&2){let e=V();p("classifications",e.classifications)("unitData",e.selectedUnit)}}var Yo=(()=>{class t{_toastr;_confirm;_translate;_product;_unsubscribeAll=new x;displayDialog=!1;pageSize=10;pageNumber=1;totalRecords=0;first=0;keyword="";searchControl=new pe;breadcrumb;tableConfig;classifications=[];selectedClassification=null;constructor(e,a,i,l){this._toastr=e,this._confirm=a,this._translate=i,this._product=l}ngOnInit(){this.tableConfig=ii,this.setBreadcrumb(),this.getClassifications(),this.getAllUnits(),this.onSearch(),this._translate.onLangChange.pipe(v(this._unsubscribeAll)).subscribe(e=>{this.setBreadcrumb()})}setBreadcrumb(){this.breadcrumb=[{icon:"pi pi-home",route:"/"},{label:this._translate.instant("UNITS.PRODUCT_MANAGEMENT")},{label:this._translate.instant("UNITS.NAME"),route:"/units"}]}getClassifications(){this._product.getClassifications().pipe(v(this._unsubscribeAll)).subscribe(e=>{this.classifications=e.data.classifications})}getAllUnits(){this._product.getAllUnits(this.pageSize,this.pageNumber,this.keyword).pipe(v(this._unsubscribeAll)).subscribe(e=>{this.tableConfig=T(N({},ii),{rows:e.data.result.map(a=>T(N({},a),{classification:a.classification?.name}))||[],totalRecords:e.data.rowCount,rowsActions:["EDIT","DELETE"]})})}onPageChange(e){this.first=e.first||0,this.pageSize=e.rows||10,this.pageNumber=e.page||1,this.getAllUnits()}onActionClicked(e){switch(e.action){case"CREATE":this.selectedUnit=null,this.openCreateDialog();break;case"EDIT":this.getUnitById(e.data);break;case"DELETE":this.onActionDelete(e.data);break;default:break}}openCreateDialog(){this.displayDialog=!0}onDialogClose(){this.displayDialog=!1}onActionDelete(e){this._confirm.confirm("delete").subscribe(a=>{a&&this._product.deleteUnit(e.id).pipe(v(this._unsubscribeAll)).subscribe(i=>{i.data&&this.getAllUnits()})})}handleSave(e){this.selectedUnit?this._product.editUnit(T(N({},e),{id:this.selectedUnit.id})).pipe(v(this._unsubscribeAll)).subscribe(a=>{a.data&&(this._toastr.success(this._translate.instant("GENERAL.UPDATED_SUCCESSFULLY",{name:"UNITS.NAME"})),this.getAllUnits(),this.displayDialog=!1)}):this._product.addUnit(e).pipe(v(this._unsubscribeAll)).subscribe(()=>{this.getAllUnits(),this.displayDialog=!1,this._toastr.success(this._translate.instant("GENERAL.ADDED_SUCCESSFULLY",{name:"UNITS.NAME"}))})}selectedUnit=null;getUnitById(e){let a=typeof e.id=="string"?Number(e.id):e.id;a&&this._product.getUnitById(a).subscribe(i=>{i.data&&(this.displayDialog=!0,this.selectedUnit=i.data)})}onClassificationChange(e){this.selectedClassification=e.value,this.filterUnits()}filterUnits(){this.selectedClassification?this._product.getAllUnits(this.pageSize,this.pageNumber,this.keyword).pipe(v(this._unsubscribeAll)).subscribe(e=>{let a=e.data.result.filter(i=>i.classification?.id===this.selectedClassification?.id);this.tableConfig.rows=a.map(i=>T(N({},i),{classification:i.classification?.name}))}):this.getAllUnits()}onSearch(){this.searchControl.valueChanges.pipe(Ne(e=>e.trim().length>=0),Te(400),Fe(e=>this._product.getAllUnits(this.pageSize,this.pageNumber,e.trim()))).subscribe(e=>{e&&e.data&&(this.tableConfig=T(N({},ii),{rows:e.data.result.map(a=>T(N({},a),{classification:a.classification?.name}))||[],totalRecords:e.data.rowCount,rowsActions:["EDIT","DELETE"]}))})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(a){return new(a||t)(u(M),u(ne),u(R),u(de))};static \u0275cmp=D({type:t,selectors:[["admin-units"]],standalone:!0,features:[y],decls:13,vars:19,consts:[[1,"dialog-side"],[3,"items"],[3,"onPage","onSearch","actionClicked","config"],["filters-area","",1,"filters","row"],[1,"filters-item","col-2","p-0"],[1,"filters-actions","col-4","p-0"],["formControlName","classification","optionLabel","name","filterBy","name","placeholder","Select a classifications",1,"w-full",3,"onChange","options","filter","showClear"],["pTemplate","selectedItem"],[3,"visibleChange","visible","modal","dismissableMask","position","baseZIndex","draggable","blockScroll","closable"],["pTemplate","header"],["pTemplate","content"],[1,"flex","align-items-center","gap-2"],[1,"dialog-header"],[1,"dialog-header__title"],[1,"dialog-header__close-button",3,"click"],["src","assets/layout/images/close-icon.svg","alt","Close",1,"dialog-header__close-icon"],[3,"save","classifications","unitData"]],template:function(a,i){a&1&&(s(0,"section",0),S(1,"pos-ui-breadcrumb",1),s(2,"shared-ui-table",2),h("onPage",function(d){return i.onPageChange(d)})("onSearch",function(d){return i.searchControl.patchValue(d)})("actionClicked",function(d){return i.onActionClicked(d)}),s(3,"div",3)(4,"div",4),m(5),r(6,"translate"),o(),s(7,"div",5)(8,"p-dropdown",6),h("onChange",function(d){return i.onClassificationChange(d)}),E(9,Yt,3,1,"ng-template",7),o()()()(),s(10,"p-dialog",8),$e("visibleChange",function(d){return je(i.displayDialog,d)||(i.displayDialog=d),d}),E(11,Wt,6,3,"ng-template",9)(12,Zt,1,2,"ng-template",10),o()()),a&2&&(n(),p("items",i.breadcrumb),n(),p("config",i.tableConfig),n(3),b(c(6,16,"GENERAL.FILTERS")),n(3),p("options",i.classifications)("filter",!0)("showClear",!0),n(2),Si(A(18,Qt)),Oe("visible",i.displayDialog),p("modal",!0)("dismissableMask",!0)("position","right")("baseZIndex",1e4)("draggable",!1)("blockScroll",!0)("closable",!1))},dependencies:[L,ae,j,ie,le,Hi,B,w,yi,re,Li],encapsulation:2})}return t})();var ti=(()=>{class t{_http;constructor(e){this._http=e}getClassifications(){return this._http.get(`${F.URL_API}Classifications`)}getAllTags(e){return this._http.get(`${F.URL_API}Tags?TagTypeIds=2&PageSize=${e.size}&PageNumber=${e.number}`)}deleteTags(e){return this._http.delete(`${F.URL_API}Tags/${e}`)}addTags(e){return this._http.post(`${F.URL_API}Tags`,e)}editTags(e){return this._http.put(`${F.URL_API}Tags`,e)}getTagsById(e){return this._http.get(`/api/Tags/${e}`)}static \u0275fac=function(a){return new(a||t)(Ce(be))};static \u0275prov=ge({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var zi=t=>({"ng-dirty ng-invalid":t}),Ei=t=>({fieldName:t}),Xi=()=>({maxLength:50});function Jt(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Ei,c(2,1,"FIELDS.classificationIds")))," "))}function Kt(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Ei,c(2,1,"FIELDS.ENGLISH_NAME")))," "))}function ea(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,Xi))," "))}function ia(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),r(3,"translate"),o()),t&2&&(n(),_(" ",g(3,3,"GENERAL.FIELD_REQUIRED",I(6,Ei,c(2,1,"FIELDS.ARABIC_NAME")))," "))}function ta(t,f){t&1&&(s(0,"small",5),m(1),r(2,"translate"),o()),t&2&&(n(),_(" ",g(2,1,"GENERAL.MAX_LENGTH_EXCEEDED",A(4,Xi))," "))}var vi=(()=>{class t{_tag;_popup;_translate;_toastr;_fb;destroy$=new x;formError;tagForm;tag;classifications=[];selectedTag;constructor(e,a,i,l,d){this._tag=e,this._popup=a,this._translate=i,this._toastr=l,this._fb=d}ngOnInit(){this.tag=this._popup.getData(),this.tagForm=this.initForm(),this.formError=new Be.ErrorManagement(this.tagForm),this.tag&&this.tag.tagId&&this.getTagsDetails({tagId:this.tag.tagId}),this.getClassifications()}getClassifications(){this._tag.getClassifications().pipe(v(this.destroy$)).subscribe({next:e=>{this.classifications=e.data.classifications}})}getTagsDetails(e){let a=typeof e.tagId=="string"?Number(e.tagId):e.tagId;a&&!isNaN(a)&&this._tag.getTagsById(a).subscribe(i=>{i.data&&(this.selectedTag=i.data,this.selectedTag.classificationIds=(this.selectedTag.classificationIds||[]).map(l=>l.id),this.patchFormData())})}initForm(){return this._fb.group({classificationIds:[[],[C.required]],arabicName:["",[C.required]],englishName:["",[C.required]],TagTypeId:[2]})}patchFormData(){this.tagForm.patchValue({classificationIds:this.selectedTag.classificationIds||[],arabicName:this.selectedTag.arabicName,englishName:this.selectedTag.englishName})}save(){let e=this.tagForm.getRawValue();(e.id?this._tag.editTags(e):this._tag.addTags(e)).pipe(v(this.destroy$)).subscribe(()=>this.afterSavingDone(e.id?"edit":"add",e))}afterSavingDone(e,a){let i=this._translate.currentLang==="ar"?a?.arabicName:a?.englishName;this._translate.get(e?"GENERAL.ADDED_SUCCESSFULLY":"UPDATED_SUCCESSFULLY",{name:i}).subscribe(l=>this._toastr.success(l)),this._popup.close(!0)}close=()=>this._popup.close();onClassificationChange(e){this.tagForm.get("classificationId")?.setValue(e.value.id),this.tagForm.get("classification")?.setValue(e.value)}static \u0275fac=function(a){return new(a||t)(u(ti),u(U),u(R),u(M),u(K))};static \u0275cmp=D({type:t,selectors:[["admin-tags-form"]],standalone:!0,features:[y],decls:31,vars:41,consts:[["autocomplete","off",3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12"],["for","classificationIds"],["formControlName","classificationIds","optionLabel","name","optionValue","id","filterBy","name",3,"onChange","options","filter","showClear","placeholder"],["id","serviceType-error",1,"text-error"],[1,"field","col-12","md:col-6"],["for","englishName"],["pInputText","","type","text","pInputText","","formControlName","englishName",1,"w-full",3,"ngClass","placeholder"],["for","arabicName"],["type","text","pInputText","","formControlName","arabicName",1,"w-full",3,"ngClass","placeholder"],[1,"flex","gap-2","align-items-center","justify-content-end"],["severity","danger",3,"onClick","label"],["severity","primary",3,"onClick","label"]],template:function(a,i){a&1&&(s(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),m(4),r(5,"translate"),o(),s(6,"p-multiSelect",4),r(7,"translate"),h("onChange",function(d){return i.onClassificationChange(d)}),o(),E(8,Jt,4,8,"small",5),o(),s(9,"div",6)(10,"label",7),m(11),r(12,"translate"),o(),S(13,"input",8),r(14,"translate"),E(15,Kt,4,8,"small",5)(16,ea,3,5,"small",5),o(),s(17,"div",6)(18,"label",9),m(19),r(20,"translate"),o(),S(21,"input",10),r(22,"translate"),E(23,ia,4,8,"small",5)(24,ta,3,5,"small",5),o()()(),s(25,"div",11)(26,"p-button",12),r(27,"translate"),h("onClick",function(){return i.close()}),o(),s(28,"p-button",13),r(29,"translate"),r(30,"translate"),h("onClick",function(){return i.save()}),o()()),a&2&&(p("formGroup",i.tagForm),n(4),b(c(5,19,"FIELDS.CLASSIFICATIONS")),n(2),p("options",i.classifications)("filter",!0)("showClear",!0)("placeholder",c(7,21,"FIELDS.CLASSIFICATIONS")),n(2),G(i.formError.hasSpecificError("classificationIds","required")?8:-1),n(3),b(c(12,23,"FIELDS.ENGLISH_NAME")),n(2),p("ngClass",I(37,zi,i.formError.hasError("englishName")))("placeholder",c(14,25,"FIELDS.ENGLISH_NAME")),n(2),G(i.formError.hasSpecificError("englishName","required")?15:-1),n(),G(i.formError.hasSpecificError("englishName","maxlength")?16:-1),n(3),b(c(20,27,"FIELDS.ARABIC_NAME")),n(2),p("ngClass",I(39,zi,i.formError.hasError("arabicName")))("placeholder",c(22,29,"FIELDS.ARABIC_NAME")),n(2),G(i.formError.hasSpecificError("arabicName","required")?23:-1),n(),G(i.formError.hasSpecificError("arabicName","maxlength")?24:-1),n(2),p("label",c(27,31,"GENERAL.CANCEL")),n(2),p("label",i.tag.id?c(29,33,"GENERAL.UPDATE"):c(30,35,"GENERAL.SAVE")))},dependencies:[L,Le,z,xe,Y,q,W,Z,J,j,$,te,oe,Ie,X,ee,B,w],encapsulation:2})}return t})();var bi={columns:[{field:"tagName",header:"TAGNAME",type:"label",exported:!1},{field:"classifications",header:"CLASSIFICATION",type:"label",exported:!1},{field:"actions",header:"ACTIONS",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",actions:["CREATE"],rowsActions:["EDIT","DELETE"],dataLoading:"server",paginator:!0,globalFilterFields:["tagName","classifications"],locale:"FIELDS.",hasFilters:!0};function aa(t,f){if(t&1&&(s(0,"div",6)(1,"div"),m(2),o()()),t&2){let e=f.$implicit;n(2),b(e.name)}}var Ms=(()=>{class t{tagService;confirmService;translateService;popupService;toastrService;destroy$=new x;tableConfig$;searchControl=new pe;classifications=[];currentPage=1;totalRecords=0;first=0;pageSize=10;rows=10;selectedClassification=null;filters={number:1,size:10};constructor(e,a,i,l,d){this.tagService=e,this.confirmService=a,this.translateService=i,this.popupService=l,this.toastrService=d}ngOnInit(){this.getTags(this.filters),this.getClassifications()}getTags(e){this.tagService.getAllTags(e).pipe(he(a=>T(N({},bi),{rows:a.data.result.map(i=>T(N({},i),{classifications:(i.classifications||[]).map(l=>l.name).join(", ")}))||[],totalRecords:a.data.rowCount}))).subscribe({next:a=>this.tableConfig$=_e(a)})}onActionClicked(e){switch(e.action){case"CREATE":this.createTags();break;case"EDIT":this.editTags(e.data);break;case"DELETE":this.deleteTags(e.data);break}}createTags(){this.popupService.open(vi,{title:this.translateService.instant("TAGS.ADD_NEW_TAG"),position:this.translateService.currentLang==="ar"?"left":"right"}).afterClosed.subscribe(e=>{e&&this.getTags(this.filters)})}editTags(e){this.popupService.open(vi,{title:this.translateService.instant("Tags.EDIT_TAG"),position:this.translateService.currentLang==="ar"?"left":"right",data:e}).afterClosed.subscribe(a=>{a&&this.getTags(this.filters)})}deleteTags(e){e.tagId&&this.confirmService.confirm("delete").subscribe(a=>{a&&this.tagService.deleteTags(e.tagId).pipe(v(this.destroy$)).subscribe(i=>{i.data&&(this.toastrService.success("Tag deleted successfully"),this.getTags({size:this.rows,number:this.currentPage}))})})}getClassifications(){this.tagService.getClassifications().pipe(v(this.destroy$)).subscribe(e=>{this.classifications=e.data.classifications})}onClassificationChange(e){this.selectedClassification=e.value,this.filterWithClassifications()}filterWithClassifications(){this.selectedClassification?this.tagService.getAllTags({size:this.rows,number:this.currentPage}).pipe(v(this.destroy$)).subscribe(e=>{let a=e.data.result.filter(i=>i.classifications?.some(l=>l.id===this.selectedClassification?.id)??!1);this.tableConfig$=_e(T(N({},bi),{rows:a.map(i=>T(N({},i),{classifications:(i.classifications||[]).map(l=>l.name).join(", ")}))||[],totalRecords:a.length}))}):this.getTags({size:this.rows,number:this.currentPage})}onPageChange(e){this.first=e.first||0,this.rows=e.rows||10,this.currentPage=e.page||1,this.getTags({size:this.rows,number:this.currentPage})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(a){return new(a||t)(u(ti),u(ne),u(R),u(U),u(M))};static \u0275cmp=D({type:t,selectors:[["admin-tags"]],standalone:!0,features:[y],decls:9,vars:9,consts:[[3,"actionClicked","onSearch","onPage","config"],["filters-area","",1,"filters","p-grid"],[1,"filters-item","col-2","p-0"],[1,"filters-actions","col-4","p-0"],["formControlName","classification","optionLabel","name","filterBy","name","placeholder","Select a classifications",1,"w-full",3,"onChange","options","filter","showClear"],["pTemplate","selectedItem"],[1,"flex","align-items-center","gap-2"]],template:function(a,i){a&1&&(s(0,"shared-ui-table",0),r(1,"async"),h("actionClicked",function(d){return i.onActionClicked(d)})("onSearch",function(d){return i.searchControl.patchValue(d)})("onPage",function(d){return i.onPageChange(d)}),s(2,"div",1)(3,"div",2),m(4),r(5,"translate"),o(),s(6,"div",3)(7,"p-dropdown",4),h("onChange",function(d){return i.onClassificationChange(d)}),E(8,aa,3,1,"ng-template",5),o()()()()),a&2&&(p("config",c(1,5,i.tableConfig$)),n(4),b(c(5,7,"GENERAL.FILTERS")),n(3),p("options",i.classifications)("filter",!0)("showClear",!0))},dependencies:[L,ve,ae,$,j,ie,le,oe,re,B,w],encapsulation:2})}return t})();export{Oa as a,Tn as b,Dr as c,_o as d,Yo as e,Ms as f};
