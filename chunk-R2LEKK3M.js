import{a as It}from"./chunk-55HUK3AE.js";import{a as Et,b as xt,c as wt,d as Mt,e as Tt,f as At}from"./chunk-6PPZ5FRF.js";import{a as Xe}from"./chunk-TBQ4JU5F.js";import{a as Ke,b as de}from"./chunk-TJQN6HPD.js";import{a as qe}from"./chunk-HKF3YVE5.js";import{b as L}from"./chunk-AFZ7PIN7.js";import"./chunk-S7T43SIG.js";import{b as He}from"./chunk-5PJ2XD53.js";import{a as $e}from"./chunk-XB6Z4NUB.js";import"./chunk-BTTMD4YK.js";import{b as je,e as O,g as ce,h as Ue,i as Ge,k as ze,m as We,o as se}from"./chunk-QRYLWIJ3.js";import"./chunk-G3A2VQVD.js";import{d as Te,f as Ae}from"./chunk-6K6MKTVO.js";import{B as Ve,m as Fe,n as ne,q as Re,r as Oe,t as le,u as Le,z as Be}from"./chunk-2BHT76TF.js";import{c as ge,e as F,f as Q,g as N,h as De,i as ke,k as Z,n as ee,r as te,s as ie,t as oe,w as Ne,x as ae}from"./chunk-HPGERUHF.js";import{f as re,g as R}from"./chunk-VNHB2M7P.js";import{a as we}from"./chunk-QEQCDFPQ.js";import{c as Y,d as J}from"./chunk-TI22M3TN.js";import"./chunk-NJC4F6AZ.js";import{n as Me,o as X}from"./chunk-CVH3MUVM.js";import{j as E,l as k}from"./chunk-CFQPMR5X.js";import{$a as ue,Ac as q,Db as Ee,Eb as p,Fb as h,Gb as fe,Gc as xe,Ib as j,J as D,Jb as V,K as y,Kb as U,Lc as C,Ma as l,Mb as S,Na as d,Nb as K,O as ve,P as G,T as ye,Xb as m,Y as b,Yb as u,Z as z,bb as s,f as I,ga as x,ha as w,lb as r,mb as n,n as _e,na as Se,nb as g,rb as B,t as Pe,tb as f,ub as W,v as T,vb as $,wb as H,xb as Ie,y as A}from"./chunk-FUWWX4DR.js";import{a as _,b as P}from"./chunk-4CLCTAJ7.js";var pe={columns:[{field:"classificationName",header:"CLASSIFICATION",type:"label",exported:!1},{field:"freeProdouctCount",header:"PRODUCT_NO",type:"label",exported:!1},{field:"price",header:"PRODUCT_PRICE",type:"label",exported:!1},{field:"freeProdouctCount",header:"FREE_PRODUCT_NO",type:"label",exported:!1},{field:"paidProduct",header:"PAID_PRODUCT",type:"label",exported:!1},{field:"actions",header:"ACTIONS",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",rowsActions:["EDIT","DELETE"],dataLoading:"server",locale:"FIELDS.",paginator:!0},Ye={columns:[{field:"catalog",header:"catalog",type:"checkbox",exported:!1},{field:"productName",header:"PRODUCTNAME",type:"label",exported:!1},{field:"categoryName",header:"CATEGORY_NAME",type:"label",exported:!1},{field:"brandName",header:"BRAND_NAME",type:"label",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",rowsActions:[],dataLoading:"server",locale:"FIELDS.",paginator:!0},me={columns:[{field:"catalog",header:"catalog",type:"checkbox",exported:!1},{field:"productName",header:"PRODUCTNAME",type:"label",exported:!1},{field:"categoryName",header:"CATEGORY_NAME",type:"label",exported:!1},{field:"brandName",header:"BRAND_NAME",type:"label",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",rowsActions:[],dataLoading:"server",locale:"FIELDS.",paginator:!0};var zt=(()=>{class i{_router;_route;_product;breadcrumb=[{icon:"pi pi-home",route:"/"},{label:"Products"},{label:"Products Catalog",route:"/products/products-catalog"}];_unsubscribeAll=new I;tableConfig;selectedClassification=null;pageSize=10;pageNumber=1;totalRecords=0;first=0;keyword="";searchControl=new N;constructor(e,t,o){this._router=e,this._route=t,this._product=o}ngOnInit(){this.getAllProductCatalog(),this.onSearch(),this.tableConfig=pe}onActionClicked(e){switch(e.action){case"EDIT":this._router.navigate([`/products/add-product-catalog/${e.data.classificationId}`],{relativeTo:this._route});break;default:break}}getAllProductCatalog(){this._product.getAllProductCatalog(this.pageSize,this.pageNumber,this.keyword).pipe(y(this._unsubscribeAll)).subscribe(e=>{this.tableConfig=P(_({},pe),{rows:e.data.map(t=>P(_({},t),{paidProduct:t.numberOfPrdoucts+" Product  "+t.price+" EGP"}))||[],totalRecords:e.data.rowCount,rowsActions:["EDIT"]})})}onPageChange(e){this.first=e.first||0,this.pageSize=e.rows||10,this.pageNumber=e.page||1,this.getAllProductCatalog()}handleSave(e){}onSearch(){this.searchControl.valueChanges.pipe(T(e=>e.trim().length>=0),A(400),D(e=>this._product.getAllProductCatalog(this.pageSize,this.pageNumber,e.trim()))).subscribe(e=>{e&&e.data&&(this.tableConfig=P(_({},pe),{rows:e.data.map(t=>P(_({},t),{paidProduct:t.numberOfPrdoucts+" Product  "+t.price+" EGP"}))||[],totalRecords:e.data.rowCount,rowsActions:["EDIT"]}))})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(t){return new(t||i)(d(k),d(E),d(L))};static \u0275cmp=b({type:i,selectors:[["admin-products-catalog"]],standalone:!0,features:[S],decls:4,vars:2,consts:[[3,"items"],[3,"actionClicked","onPage","onSearch","config"]],template:function(t,o){t&1&&(g(0,"pos-ui-breadcrumb",0)(1,"br"),r(2,"section")(3,"shared-ui-table",1),f("actionClicked",function(c){return o.onActionClicked(c)})("onPage",function(c){return o.onPageChange(c)})("onSearch",function(c){return o.searchControl.patchValue(c)}),n()()),t&2&&(s("items",o.breadcrumb),l(3),s("config",o.tableConfig))},dependencies:[C,ce,O,ne,se],encapsulation:2})}return i})();var Qe=(()=>{class i{_http;constructor(e){this._http=e}getAllPaidProduct(e,t,o){return this._http.get(`${we.URL_API}Products/paid-product/classification/${e}?PageSize=${o}&PageNumber=${t}`)}static \u0275fac=function(t){return new(t||i)(ye(Ae))};static \u0275prov=ve({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var gi=(()=>{class i{_fb;_catalog;_route;_unsubscribeAll=new I;pageSize=10;pageNumber=1;classId;items=[{label:"All products"},{label:"Selected"}];activeItem;tableConfig;catalogFormGroup;constructor(e,t,o){this._fb=e,this._catalog=t,this._route=o}ngOnInit(){this.classId=Number(this._route.snapshot.paramMap.get("id")),this.prepareCatalogForm(),this.activateTab(this.items[0])}selectedProducts=[];activateTab(e){this.activeItem=e,e.label=="All products"?(this.tableConfig=Ye,this.getAllPaidProduct()):e.label=="Selected"&&(this.tableConfig=me,this.tableConfig=P(_({},me),{rows:[...this.selectedProducts]}))}onActionClicked(e){let t=e.data;this.selectedProducts.some(a=>a.id===t.id)||this.selectedProducts.push(t),this.activeItem&&this.activeItem.label==="Selected"&&(this.tableConfig=P(_({},me),{rows:[...this.selectedProducts]})),console.log(this.selectedProducts)}prepareCatalogForm(){this.catalogFormGroup=this._fb.group({id:[null],catalogProductCount:[null,ge.required],catalogProductCountPrice:[null,ge.required]})}getAllPaidProduct(){this._catalog.getAllPaidProduct(this.classId,this.pageNumber,this.pageSize).pipe(y(this._unsubscribeAll)).subscribe(e=>{console.log("response.data.result",e.data.result),this.tableConfig.rows=e.data.result.map(t=>P(_({},t),{brandName:t.brand?.name,categoryName:t.category?.name}))||[],this.tableConfig.totalRecords=e.data.rowCount})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(t){return new(t||i)(d(te),d(Qe),d(E))};static \u0275cmp=b({type:i,selectors:[["admin-add-edit-product-catalog"]],standalone:!0,features:[S],decls:28,vars:15,consts:[[1,"row"],[1,"col-12"],[1,"flex-box"],[1,"back-action","flex","items-center","gap-2","cursor-pointer"],["src","assets/system/icons/back-arrow.png","alt","back-arrow"],[1,"submit-action","flex-box"],[1,"btn","btn-light"],[1,"btn","btn-primary"],[1,"w-full","card-details","flex-box"],[1,"title"],[1,"flex-box",3,"formGroup"],["mode","decimal","inputId","withoutgrouping","formControlName","catalogProductCountPrice",1,"w-full",3,"useGrouping","placeholder"],["mode","decimal","inputId","withoutgrouping","formControlName","catalogProductCount",1,"w-full",3,"useGrouping","placeholder"],[1,"w-full"],[3,"activeItemChange","model","activeItem"],[3,"actionClicked","config"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g(4,"img",4),r(5,"span"),p(6,"Back"),n()(),r(7,"div",5)(8,"button",6),p(9,"Cancel"),n(),r(10,"button",7),p(11,"Save"),n()()()(),r(12,"div",1)(13,"div",8)(14,"div",9),p(15),m(16,"translate"),n(),r(17,"div",10)(18,"div"),g(19,"p-inputNumber",11),m(20,"translate"),n(),r(21,"div"),g(22,"p-inputNumber",12),m(23,"translate"),n()()()(),r(24,"div",1)(25,"div",13)(26,"p-tabMenu",14),U("activeItemChange",function(c){return V(o.activeItem,c)||(o.activeItem=c),c}),f("activeItemChange",function(c){return o.activateTab(c)}),n(),r(27,"shared-ui-table",15),f("actionClicked",function(c){return o.onActionClicked(c)}),n()()()()),t&2&&(l(15),h(u(16,9,"FIELDS.PAID_PRODUCTS")),l(2),s("formGroup",o.catalogFormGroup),l(2),s("useGrouping",!1)("placeholder",u(20,11,"FIELDS.PRICE")),l(3),s("useGrouping",!1)("placeholder",u(23,13,"FIELDS.NO_PRODUCTS")),l(4),s("model",o.items),j("activeItem",o.activeItem),l(),s("config",o.tableConfig))},dependencies:[C,Ge,Ue,O,$e,J,Y,ie,F,Q,je,He,de,Oe,Re,oe,Z,ee,ae,R],styles:[".flex-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px}.back-action[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:20px;color:#999}.submit-action[_ngcontent-%COMP%]{gap:16px}.submit-action[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 32px;border-radius:4px;font-weight:500;font-size:16px;line-height:20px;color:#222;border:none;cursor:pointer}.submit-action[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{background:#ececec;color:#222}.submit-action[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#8fc9e9;color:#fff}.card-details[_ngcontent-%COMP%]{background:#fff;padding:16px;border-radius:8px}.card-details[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:600;font-size:19px;line-height:23px;color:#222}"]})}return i})();var tt=(()=>{class i{_fb;_product;onFilter=new Se;filterForm;filterData$;constructor(e,t){this._fb=e,this._product=t}ngOnInit(){this.filterForm=this.initializeForm(),this.filterData$=this.getData()}initializeForm(){return this._fb.group({ClassificationId:[""],BrandId:[""],Unit:[""],CategoryId:[""]})}getData(){return Pe({classifications:this._product.getClassifications().pipe(_e(e=>e.data.classifications)),categories:this._product.getCategories(),brands:this._product.getAllBrands(1e5,1)})}onSubmit(){this.onFilter.emit(this.filterForm.value)}onReset(){this.filterForm.reset(),this.onFilter.emit(this.filterForm.value)}static \u0275fac=function(t){return new(t||i)(d(te),d(L))};static \u0275cmp=b({type:i,selectors:[["admin-product-filter"]],outputs:{onFilter:"onFilter"},standalone:!0,features:[S],decls:13,vars:15,consts:[[1,"p-fluid","p-formgrid","grid",3,"ngSubmit","formGroup"],[1,"col-12","md:col-3"],["optionLabel","name","optionValue","id","placeholder","Select a Classification","formControlName","ClassificationId","filterBy","name",3,"options","filter"],["optionLabel","name","optionValue","id","placeholder","Select a Brand","formControlName","BrandId","filterBy","name",3,"options","filter"],["optionLabel","name","optionValue","id","placeholder","Select a Category","formControlName","CategoryId","filterBy","name",3,"options","filter"],[1,"col-12","md:col-3","flex","justify-content-end","align-items-center"],["type","submit","label","Filter","severity","success",1,"mr-2",3,"outlined"],["label","Reset","severity","warning",3,"click","outlined"]],template:function(t,o){if(t&1&&(r(0,"form",0),f("ngSubmit",function(){return o.onSubmit()}),r(1,"div",1),g(2,"p-dropdown",2),m(3,"async"),n(),r(4,"div",1),g(5,"p-dropdown",3),m(6,"async"),n(),r(7,"div",1),g(8,"p-dropdown",4),m(9,"async"),n(),r(10,"div",5),g(11,"p-button",6),r(12,"p-button",7),f("click",function(){return o.onReset()}),n()()()),t&2){let a,c,Ce;s("formGroup",o.filterForm),l(2),s("options",(a=u(3,9,o.filterData$))==null?null:a.classifications)("filter",!0),l(3),s("options",(c=u(6,11,o.filterData$))==null?null:c.brands)("filter",!0),l(3),s("options",(Ce=u(9,13,o.filterData$))==null?null:Ce.categories)("filter",!0),l(3),s("outlined",!0),l(),s("outlined",!0)}},dependencies:[C,xe,ne,Fe,oe,ke,F,Q,Z,ee,R,re],encapsulation:2,changeDetection:0})}return i})();var be={columns:[{field:"name",header:"NAME",type:"link",exported:!1,sortable:!0},{field:"sKU",header:"SKU",type:"label",exported:!0,sortable:!0},{field:"unit",header:"Unit",type:"label",exported:!0,sortable:!0},{field:"barcode",header:"Barcode",type:"label",exported:!0,sortable:!0},{field:"cost",header:"Cost",type:"label",exported:!0,sortable:!0},{field:"price",header:"Price",type:"label",exported:!0,sortable:!0},{field:"actions",header:"Actions",type:"actions",exported:!1}],rowsPerPage:10,rowsPerPageOptions:[5,10,15,20,25,50,100],selectionMode:"single",actions:["EXPORT","IMPORT","CREATE"],rowsActions:["EDIT","DELETE"],paginator:!0,dataLoading:"server",locale:"FIELDS.",hasFilters:!0};function it(i,v){let e=new FileReader;e.onload=t=>{let o=t.target.result;console.log("CSV Data:",o);let a=document.createElement("a"),c=URL.createObjectURL(i);a.href=c,a.download=v,a.click(),URL.revokeObjectURL(c)},e.readAsText(i)}var Qi=(()=>{class i{_router;_route;_confirm;productService;_popup;_unsubscribeAll=new I;tableConfig;items;currentPage=1;totalRecords=0;first=0;rows=10;breadcrumb=[{icon:"pi pi-home",route:"/"},{label:"Products Management"},{label:"Product",route:"/product"}];searchControl=new N;constructor(e,t,o,a,c){this._router=e,this._route=t,this._confirm=o,this.productService=a,this._popup=c}ngOnInit(){this.getProducts({pageSize:this.rows,pageNumber:this.currentPage}),this.onSearch()}getProducts(e){this.productService.getProducts(e).pipe(y(this._unsubscribeAll)).subscribe(t=>{if(t&&t.data){let o=t.data.result.map(a=>P(_({},a),{unit:a.unit?a.unit.name:"-",classification:a.classification?a.classification.name:"No Classification"}));this.tableConfig=P(_({},be),{rows:o,totalRecords:t.data.rowCount,rowsActions:["EDIT","DELETE"]}),this.totalRecords=t.data.rowCount}})}deleteProduct(e){this.productService.deleteProduct(e).subscribe({next:()=>{this.getProducts({pageSize:this.rows,pageNumber:this.currentPage})}})}onPageChange(e){this.first=e.first||0,this.rows=e.rows||10,this.currentPage=e.page||1,this.getProducts({pageSize:this.rows,pageNumber:this.currentPage})}exportProducts(){this.productService.downloadProdctsAsCsv().subscribe({next:e=>{it(e,"products.csv")}})}onActionClicked(e){switch(e.action){case"CREATE":this._router.navigate(["product/id"],{relativeTo:this._route});break;case"DELETE":this._confirm.confirm("delete").subscribe(t=>{t&&e.data?.id&&this.deleteProduct(e.data.id)});break;case"EXPORT":this.exportProducts();break;case"NAVIGATE":this.openProductDetail(e.data);break;default:break}}onFilter(e){console.log(e),this.getProducts({pageSize:this.rows,pageNumber:this.currentPage,ClassificationId:e.ClassificationId,BrandId:e.BrandId,CategoryId:e.CategoryId})}onSearch(){this.searchControl.valueChanges.pipe(T(e=>e.trim().length>=0),A(400),D(e=>this.productService.getProducts({pageSize:this.rows,pageNumber:this.currentPage,Keyword:e.trim()}))).subscribe(e=>{e&&e.data&&(this.tableConfig=P(_({},be),{rows:e.data.result,totalRecords:e.data.rowCount,rowsActions:["EDIT","DELETE"]}),this.totalRecords=e.data.rowCount)})}openProductDetail(e){this._popup.open(qe,{title:"Product Details",position:"right",data:e,width:"70%",closable:!0,customHeader:!1}).afterClosed.subscribe(t=>t&&this.getProducts({pageSize:this.rows,pageNumber:this.currentPage}))}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(t){return new(t||i)(d(k),d(E),d(ze),d(L),d(We))};static \u0275cmp=b({type:i,selectors:[["admin-product"]],standalone:!0,features:[S],decls:10,vars:2,consts:[[3,"items"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mb-4"],[3,"actionClicked","onSearch","onPage","config"],["filters-area","",1,"mt-4"],[3,"onFilter"]],template:function(t,o){t&1&&(g(0,"pos-ui-breadcrumb",0)(1,"br"),r(2,"div",1)(3,"div",2)(4,"div",3)(5,"h4",4),p(6,"Product Management"),n(),r(7,"shared-ui-table",5),f("actionClicked",function(c){return o.onActionClicked(c)})("onSearch",function(c){return o.searchControl.patchValue(c)})("onPage",function(c){return o.onPageChange(c)}),r(8,"div",6)(9,"admin-product-filter",7),f("onFilter",function(c){return o.onFilter(c)}),n()()()()()()),t&2&&(s("items",o.breadcrumb),l(7),s("config",o.tableConfig))},dependencies:[C,O,ce,Ve,tt,le,se],encapsulation:2})}return i})();var dt=["*"],ot=(()=>{class i{iconPosition="left";get containerClass(){return{"p-icon-field-left":this.iconPosition==="left","p-icon-field-right":this.iconPosition==="right"}}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["p-iconField"]],inputs:{iconPosition:"iconPosition"},ngContentSelectors:dt,decls:2,vars:1,consts:[[1,"p-icon-field",3,"ngClass"]],template:function(t,o){t&1&&($(),r(0,"span",0),H(1),n()),t&2&&s("ngClass",o.containerClass)},dependencies:[q],styles:[`@layer primeng{.p-icon-field{position:relative}}
`],encapsulation:2,changeDetection:0})}return i})(),rt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=z({type:i});static \u0275inj=G({imports:[C,X]})}return i})();var mt=["*"],nt=(()=>{class i{styleClass;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=b({type:i,selectors:[["p-inputIcon"]],inputs:{styleClass:"styleClass"},ngContentSelectors:mt,decls:2,vars:1,consts:[[1,"p-input-icon",3,"ngClass"]],template:function(t,o){t&1&&($(),r(0,"span",0),H(1),n()),t&2&&s("ngClass",o.styleClass)},dependencies:[q],styles:[`@layer primeng{.p-fluid .p-icon-field-left,.p-fluid .p-icon-field-right{width:100%}}
`],encapsulation:2,changeDetection:0})}return i})(),at=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=z({type:i});static \u0275inj=G({imports:[C,X]})}return i})();var ft=()=>["name"],gt=()=>({"min-width":"30rem"}),ht=()=>[5,10,20];function bt(i,v){i&1&&(r(0,"tr")(1,"th"),p(2),m(3,"translate"),n(),r(4,"th"),p(5),m(6,"translate"),n(),r(7,"th"),p(8),m(9,"translate"),n(),r(10,"th"),p(11),m(12,"translate"),n()()),i&2&&(l(2),h(u(3,4,"FIELDS.PRODUCTNAME")),l(3),h(u(6,6,"FIELDS.BARCODE")),l(3),h(u(9,8,"FIELDS.COST")),l(3),h(u(12,10,"FIELDS.PRICE")))}function Ct(i,v){if(i&1){let e=B();r(0,"tr")(1,"td",17)(2,"p-checkbox",18),U("ngModelChange",function(o){let a=x(e).$implicit;return V(a.checked,o)||(a.checked=o),w(o)}),n(),r(3,"span"),p(4),n()(),r(5,"td"),p(6),n(),r(7,"td"),p(8),n(),r(9,"td"),p(10),n()()}if(i&2){let e=v.$implicit,t=W();l(2),j("ngModel",e.checked),s("disabled",t.disabledProducts),l(2),fe(" ",e.name," "),l(2),h(e.barCode),l(2),h(e.cost),l(2),h(e.price)}}function _t(i,v){i&1&&(r(0,"tr")(1,"td",19),p(2),m(3,"translate"),n()()),i&2&&(l(2),h(u(3,1,"GENERAL.NODATA")))}function Pt(i,v){if(i&1){let e=B();r(0,"div",20)(1,"p-iconField",21)(2,"p-inputIcon"),g(3,"i",22),n(),r(4,"input",23,2),m(6,"translate"),f("input",function(){x(e);let o=Ee(5),a=W();return w(a.searchControl.patchValue(o.value))}),n()()()}i&2&&(l(4),Ie("placeholder",u(6,1,"FIELDS.SEARCH")))}function vt(i,v){i&1&&(r(0,"tr")(1,"th"),p(2),m(3,"translate"),n(),r(4,"th"),p(5),m(6,"translate"),n()()),i&2&&(l(2),h(u(3,2,"FIELDS.PRODUCTNAME")),l(3),h(u(6,4,"FIELDS.BARCODE")))}function yt(i,v){if(i&1){let e=B();r(0,"tr")(1,"td",24)(2,"p-checkbox",18),U("ngModelChange",function(o){let a=x(e).$implicit;return V(a.checked,o)||(a.checked=o),w(o)}),n(),r(3,"span"),p(4),n()(),r(5,"td"),p(6),n()()}if(i&2){let e=v.$implicit,t=W();l(2),j("ngModel",e.checked),s("disabled",t.disabledProducts),l(2),fe(" ",e.name," "),l(2),h(e.barCode)}}function St(i,v){i&1&&(r(0,"tr")(1,"td",25),p(2),m(3,"translate"),n()()),i&2&&(l(2),h(u(3,1,"GENERAL.NODATA")))}var Eo=(()=>{class i{_router;toaster;activatedRoute;_merchantProducts;_unsubscribeAll=new I;searchControl=new N;merchantProducts=[];products=[];constructor(e,t,o,a){this._router=e,this.toaster=t,this.activatedRoute=o,this._merchantProducts=a}ngOnInit(){let e=+this.activatedRoute.snapshot.params.id;this.getMerchantProductbyId(e),this.onProductsSearch()}getMerchantProductbyId(e){this._merchantProducts.getMerchantProductById(e).pipe(y(this._unsubscribeAll)).subscribe(t=>this.merchantProducts=t.data||[])}onProductsSearch(){this.searchControl.valueChanges.pipe(T(e=>e.trim().length>0),A(400),D(e=>this._merchantProducts.searchForMerchantProduct(e.trim())),y(this._unsubscribeAll)).subscribe(e=>{this.products=e.data||[]})}save(){let e=[{productId:this.products.find(t=>t.checked).id,merchantProductId:this.merchantProducts.find(t=>t.checked).id}];this._merchantProducts.linkProducts({productsToCatalogs:e}).pipe(y(this._unsubscribeAll)).subscribe(()=>{this.toaster.success("Products linked successfully"),this._back()})}get disabledProducts(){return this.merchantProducts.some(e=>e.checked)&&this.products.some(e=>e.checked)}clear(){this.merchantProducts.forEach(e=>e.checked=!1),this.products.forEach(e=>e.checked=!1)}_back=()=>this._router.navigate(["/products/merchant"]);ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}static \u0275fac=function(t){return new(t||i)(d(k),d(Te),d(E),d(Xe))};static \u0275cmp=b({type:i,selectors:[["admin-link-products"]],standalone:!0,features:[S],decls:23,vars:22,consts:[["dt1",""],["dt2",""],["prodsearch",""],[1,"card",2,"border-radius","0"],[1,"grid"],["icon","pi pi-angle-left",1,"p-button-link",3,"onClick","label","text"],[1,"grid","mt-2"],[1,"col-6"],["styleClass","p-datatable-gridlines",3,"value","globalFilterFields"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["styleClass","p-datatable-gridlines",3,"value","paginator","rows","tableStyle","rowsPerPageOptions"],["pTemplate","caption"],[1,"flex","gap-2","align-items-center","justify-content-end"],["severity","danger",3,"onClick","label","disabled"],["severity","primary",3,"onClick","label","disabled"],[1,"flex","align-items-center","gap-2"],["binary","true",3,"ngModelChange","ngModel","disabled"],["colspan","4"],[1,"flex"],["iconPosition","left",1,"ml-auto"],[1,"pi","pi-search"],["pInputText","","type","text",3,"input","placeholder"],[1,"flex","gap-2","align-items-center"],["colspan","2"]],template:function(t,o){if(t&1){let a=B();r(0,"div",3)(1,"div",4)(2,"p-button",5),m(3,"translate"),f("onClick",function(){return x(a),w(o._back())}),n()(),r(4,"div",6)(5,"div",7)(6,"p-table",8,0),ue(8,bt,13,12,"ng-template",9)(9,Ct,11,6,"ng-template",10)(10,_t,4,3,"ng-template",11),n()(),r(11,"div",7)(12,"p-table",12,1),ue(14,Pt,7,3,"ng-template",13)(15,vt,7,6,"ng-template",9)(16,yt,7,4,"ng-template",10)(17,St,4,3,"ng-template",11),n()()(),r(18,"div",14)(19,"p-button",15),m(20,"translate"),f("onClick",function(){return x(a),w(o.clear())}),n(),r(21,"p-button",16),m(22,"translate"),f("onClick",function(){return x(a),w(o.save())}),n()()()}t&2&&(l(2),s("label",u(3,13,"GENERAL.BACK"))("text",!0),l(4),s("value",o.merchantProducts)("globalFilterFields",K(19,ft)),l(6),s("value",o.products)("paginator",!0)("rows",5)("tableStyle",K(20,gt))("rowsPerPageOptions",K(21,ht)),l(7),s("label",u(20,15,"GENERAL.CLEAR"))("disabled",!o.disabledProducts),l(2),s("label",u(22,17,"GENERAL.SAVE"))("disabled",!o.disabledProducts))},dependencies:[C,ie,F,De,Be,Le,Me,R,re,de,Ke,le,rt,ot,at,nt,J,Y,ae,Ne],encapsulation:2})}return i})();export{gi as AddEditProductCatalogComponent,Mt as BrandsComponent,xt as CategoriesComponent,Et as ClassificationsComponent,Eo as LinkProductsComponent,It as MerchantproductsComponent,Qi as ProductComponent,zt as ProductsCatalogComponent,At as TagsComponent,Tt as UnitsComponent,wt as VariantsComponent};
